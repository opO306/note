import{r as u,j as e}from"./index-Dk92xA2w.js";import{b as E,I as R,J as L,T as N,K as j}from"./MainScreenRefactored-Cnk3o5eP.js";import{h as D,d as V,B as O,g as f}from"./App-Bs6YIlvy.js";import{C as y,a as P}from"./card-BTNeCppV.js";import{A as T}from"./arrow-left-BKP0x_yl.js";import{L as B}from"./lock-BlxSE2Lo.js";import"./vendor-capacitor-rvH5hiNU.js";import"./vendor-react-1wgkHQEd.js";import"./vendor-firebase-C8ERkm_B.js";import"./toastHelper-CmqwgrpB.js";import"./index-DKlU3y7i.js";import"./index-SzzsopSI.js";import"./checkbox-BNqRj2KP.js";import"./check-CFbpOADo.js";import"./avatar-BVorKTXF.js";import"./alert-dialog-simple-CJo3HBbI.js";import"./sparkles-BV-B8Lrs.js";import"./firebaseCache-C_csZa1c.js";import"./profanityFilter-CmEWjjlv.js";import"./users-D58BOHBF.js";import"./sun-aJJImKwH.js";function U(r,s=[]){let n=[];function c(d,l){const o=u.createContext(l);o.displayName=d+"Context";const t=n.length;n=[...n,l];const i=m=>{const{scope:v,children:g,...p}=m,_=v?.[r]?.[t]||o,k=u.useMemo(()=>p,Object.values(p));return e.jsx(_.Provider,{value:k,children:g})};i.displayName=d+"Provider";function x(m,v){const g=v?.[r]?.[t]||o,p=u.useContext(g);if(p)return p;if(l!==void 0)return l;throw new Error(`\`${m}\` must be used within \`${d}\``)}return[i,x]}const a=()=>{const d=n.map(l=>u.createContext(l));return function(o){const t=o?.[r]||d;return u.useMemo(()=>({[`__scope${r}`]:{...o,[r]:t}}),[o,t])}};return a.scopeName=r,[c,z(a,...s)]}function z(...r){const s=r[0];if(r.length===1)return s;const n=()=>{const c=r.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(d){const l=c.reduce((o,{useScope:t,scopeName:i})=>{const m=t(d)[`__scope${i}`];return{...o,...m}},{});return u.useMemo(()=>({[`__scope${s.scopeName}`]:l}),[l])}};return n.scopeName=s.scopeName,n}var G=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],$=G.reduce((r,s)=>{const n=D(`Primitive.${s}`),c=u.forwardRef((a,d)=>{const{asChild:l,...o}=a,t=l?n:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(t,{...o,ref:d})});return c.displayName=`Primitive.${s}`,{...r,[s]:c}},{}),b="Progress",H=100,[K]=U(b),[X,F]=K(b),S=u.forwardRef((r,s)=>{const{__scopeProgress:n,value:c=null,max:a,getValueLabel:d=J,...l}=r;(a||a===0)&&w(a);const o=w(a)?a:H;c!==null&&C(c,o);const t=C(c,o)?c:null,i=h(t)?d(t,o):void 0;return e.jsx(X,{scope:n,value:t,max:o,children:e.jsx($.div,{"aria-valuemax":o,"aria-valuemin":0,"aria-valuenow":h(t)?t:void 0,"aria-valuetext":i,role:"progressbar","data-state":M(t,o),"data-value":t??void 0,"data-max":o,...l,ref:s})})});S.displayName=b;var A="ProgressIndicator",I=u.forwardRef((r,s)=>{const{__scopeProgress:n,...c}=r,a=F(A,n);return e.jsx($.div,{"data-state":M(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...c,ref:s})});I.displayName=A;function J(r,s){return`${Math.round(r/s*100)}%`}function M(r,s){return r==null?"indeterminate":r===s?"complete":"loading"}function h(r){return typeof r=="number"}function w(r){return h(r)&&!isNaN(r)&&r>0}function C(r,s){return h(r)&&!isNaN(r)&&r<=s&&r>=0}var q=S,Q=I;function W({className:r,value:s,...n}){return e.jsx(q,{"data-slot":"progress",className:V("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",r),...n,children:e.jsx(Q,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(s||0)}%)`}})})}function be({onBack:r}){const s=E({key:"achievements"}),{isAchievementUnlocked:n,getAchievementInfo:c}=R(),a=u.useMemo(()=>L.filter(t=>t.hidden?n(t.id):!0),[n]),{achievedCount:d,totalCount:l,progressPercentage:o}=u.useMemo(()=>{const t=a.filter(m=>n(m.id)).length,i=a.length,x=i>0?t/i*100:0;return{achievedCount:t,totalCount:i,progressPercentage:x}},[a,n]);return e.jsxs("div",{className:"w-full h-full bg-background text-foreground flex flex-col overflow-hidden",children:[e.jsx("header",{className:"bg-card/95 backdrop-blur-xl border-b border-border flex-shrink-0 safe-top z-10",children:e.jsx("div",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(O,{variant:"ghost",size:"icon",onClick:r,className:"-ml-2",children:e.jsx(T,{className:"w-5 h-5"})}),e.jsx("h1",{className:"font-medium text-lg",children:"업적"})]})})}),e.jsxs("div",{ref:s,className:"flex-1 overflow-y-auto no-scrollbar p-4 pb-24 space-y-4",children:[e.jsx(y,{className:"border-border/50 shadow-sm",children:e.jsx(P,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-3xl font-bold text-primary flex items-baseline gap-1",children:[d,e.jsxs("span",{className:"text-sm font-normal text-muted-foreground",children:["/ ",l]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"현재 달성도"})]}),e.jsx("div",{className:"p-3 bg-amber-500/10 rounded-full",children:e.jsx(N,{className:"w-8 h-8 text-amber-500"})})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(W,{value:o,className:"h-2.5"}),e.jsxs("p",{className:"text-xs text-right text-muted-foreground",children:[Math.round(o),"% 완료"]})]})]})})}),e.jsx("div",{className:"space-y-3",children:a.map(t=>{const i=n(t.id),x=t.hidden,m=c(t.id);return e.jsx(y,{className:`transition-colors duration-200 ${i?"bg-card border-border shadow-sm":"bg-muted/30 border-dashed border-border"}`,children:e.jsx(P,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:`mt-1 flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center ${i?"bg-primary/10 text-primary":"bg-muted text-muted-foreground"}`,children:i?e.jsx(N,{className:"w-5 h-5"}):e.jsx(B,{className:"w-5 h-5 opacity-50"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1 gap-2",children:[e.jsx("h3",{className:`font-medium truncate ${!i&&"text-muted-foreground"}`,children:t.name}),e.jsxs("div",{className:"flex-shrink-0 flex gap-1.5",children:[x&&i&&e.jsx(f,{variant:"outline",className:"text-[10px] px-1.5 h-5 border-amber-500/50 text-amber-600 bg-amber-500/5",children:"히든"}),i?e.jsx(f,{variant:"default",className:"text-[10px] px-1.5 h-5",children:"달성"}):e.jsx(f,{variant:"outline",className:"text-[10px] px-1.5 h-5 text-muted-foreground",children:j(t.category)}),i&&e.jsx(f,{variant:"secondary",className:"text-[10px] px-1.5 h-5",children:j(t.category)})]})]}),e.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:t.description}),i&&m?.achievedAt&&e.jsx("p",{className:"text-xs text-muted-foreground/70 mt-2 flex items-center gap-1",children:e.jsxs("span",{children:["달성일: ",new Date(m.achievedAt).toLocaleDateString("ko-KR")]})})]})]})})},t.id)})})]})]})}export{be as AchievementsScreen};
