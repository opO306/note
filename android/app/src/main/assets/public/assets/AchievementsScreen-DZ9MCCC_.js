import{r as u,j as e}from"./index-BJjkZhAE.js";import{a4 as E,H as R,u as L,ad as D,ae as V,B as O,f as T,C as N,b as j,T as y,k as f,af as P}from"./App-Cnx-z95_.js";import{L as B}from"./lock-CRZRN9tI.js";import"./vendor-capacitor-Bm7NWSxP.js";import"./vendor-react-1wgkHQEd.js";import"./vendor-firebase-B8qz7irO.js";function H(r,t=[]){let n=[];function c(d,l){const o=u.createContext(l);o.displayName=d+"Context";const s=n.length;n=[...n,l];const i=m=>{const{scope:v,children:g,...p}=m,M=v?.[r]?.[s]||o,_=u.useMemo(()=>p,Object.values(p));return e.jsx(M.Provider,{value:_,children:g})};i.displayName=d+"Provider";function x(m,v){const g=v?.[r]?.[s]||o,p=u.useContext(g);if(p)return p;if(l!==void 0)return l;throw new Error(`\`${m}\` must be used within \`${d}\``)}return[i,x]}const a=()=>{const d=n.map(l=>u.createContext(l));return function(o){const s=o?.[r]||d;return u.useMemo(()=>({[`__scope${r}`]:{...o,[r]:s}}),[o,s])}};return a.scopeName=r,[c,U(a,...t)]}function U(...r){const t=r[0];if(r.length===1)return t;const n=()=>{const c=r.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(d){const l=c.reduce((o,{useScope:s,scopeName:i})=>{const m=s(d)[`__scope${i}`];return{...o,...m}},{});return u.useMemo(()=>({[`__scope${t.scopeName}`]:l}),[l])}};return n.scopeName=t.scopeName,n}var z=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],$=z.reduce((r,t)=>{const n=E(`Primitive.${t}`),c=u.forwardRef((a,d)=>{const{asChild:l,...o}=a,s=l?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(s,{...o,ref:d})});return c.displayName=`Primitive.${t}`,{...r,[t]:c}},{}),b="Progress",G=100,[X]=H(b),[F,K]=X(b),S=u.forwardRef((r,t)=>{const{__scopeProgress:n,value:c=null,max:a,getValueLabel:d=q,...l}=r;(a||a===0)&&w(a);const o=w(a)?a:G;c!==null&&C(c,o);const s=C(c,o)?c:null,i=h(s)?d(s,o):void 0;return e.jsx(F,{scope:n,value:s,max:o,children:e.jsx($.div,{"aria-valuemax":o,"aria-valuemin":0,"aria-valuenow":h(s)?s:void 0,"aria-valuetext":i,role:"progressbar","data-state":I(s,o),"data-value":s??void 0,"data-max":o,...l,ref:t})})});S.displayName=b;var A="ProgressIndicator",k=u.forwardRef((r,t)=>{const{__scopeProgress:n,...c}=r,a=K(A,n);return e.jsx($.div,{"data-state":I(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...c,ref:t})});k.displayName=A;function q(r,t){return`${Math.round(r/t*100)}%`}function I(r,t){return r==null?"indeterminate":r===t?"complete":"loading"}function h(r){return typeof r=="number"}function w(r){return h(r)&&!isNaN(r)&&r>0}function C(r,t){return h(r)&&!isNaN(r)&&r<=t&&r>=0}var J=S,Q=k;function W({className:r,value:t,...n}){return e.jsx(J,{"data-slot":"progress",className:R("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",r),...n,children:e.jsx(Q,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})})}function ae({onBack:r}){const t=L({key:"achievements"}),{isAchievementUnlocked:n,getAchievementInfo:c}=D(),a=u.useMemo(()=>V.filter(s=>s.hidden?n(s.id):!0),[n]),{achievedCount:d,totalCount:l,progressPercentage:o}=u.useMemo(()=>{const s=a.filter(m=>n(m.id)).length,i=a.length,x=i>0?s/i*100:0;return{achievedCount:s,totalCount:i,progressPercentage:x}},[a,n]);return e.jsxs("div",{className:"w-full h-full bg-background text-foreground flex flex-col overflow-hidden",children:[e.jsx("header",{className:"bg-card/95 backdrop-blur-xl border-b border-border flex-shrink-0 safe-top z-10",children:e.jsx("div",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(O,{variant:"ghost",size:"icon",onClick:r,className:"-ml-2",children:e.jsx(T,{className:"w-5 h-5"})}),e.jsx("h1",{className:"font-medium text-lg",children:"업적"})]})})}),e.jsxs("div",{ref:t,className:"flex-1 overflow-y-auto no-scrollbar p-4 pb-24 space-y-4",children:[e.jsx(N,{className:"border-border/50 shadow-sm",children:e.jsx(j,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-3xl font-bold text-primary flex items-baseline gap-1",children:[d,e.jsxs("span",{className:"text-sm font-normal text-muted-foreground",children:["/ ",l]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"현재 달성도"})]}),e.jsx("div",{className:"p-3 bg-amber-500/10 rounded-full",children:e.jsx(y,{className:"w-8 h-8 text-amber-500"})})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(W,{value:o,className:"h-2.5"}),e.jsxs("p",{className:"text-xs text-right text-muted-foreground",children:[Math.round(o),"% 완료"]})]})]})})}),e.jsx("div",{className:"space-y-3",children:a.map(s=>{const i=n(s.id),x=s.hidden,m=c(s.id);return e.jsx(N,{className:`transition-colors duration-200 ${i?"bg-card border-border shadow-sm":"bg-muted/30 border-dashed border-border"}`,children:e.jsx(j,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:`mt-1 flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center ${i?"bg-primary/10 text-primary":"bg-muted text-muted-foreground"}`,children:i?e.jsx(y,{className:"w-5 h-5"}):e.jsx(B,{className:"w-5 h-5 opacity-50"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1 gap-2",children:[e.jsx("h3",{className:`font-medium truncate ${!i&&"text-muted-foreground"}`,children:s.name}),e.jsxs("div",{className:"flex-shrink-0 flex gap-1.5",children:[x&&i&&e.jsx(f,{variant:"outline",className:"text-[10px] px-1.5 h-5 border-amber-500/50 text-amber-600 bg-amber-500/5",children:"히든"}),i?e.jsx(f,{variant:"default",className:"text-[10px] px-1.5 h-5",children:"달성"}):e.jsx(f,{variant:"outline",className:"text-[10px] px-1.5 h-5 text-muted-foreground",children:P(s.category)}),i&&e.jsx(f,{variant:"secondary",className:"text-[10px] px-1.5 h-5",children:P(s.category)})]})]}),e.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:s.description}),i&&m?.achievedAt&&e.jsx("p",{className:"text-xs text-muted-foreground/70 mt-2 flex items-center gap-1",children:e.jsxs("span",{children:["달성일: ",new Date(m.achievedAt).toLocaleDateString("ko-KR")]})})]})]})})},s.id)})})]})]})}export{ae as AchievementsScreen};
