const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./WelcomeScreen-CXUExfNa.js","./vendor-capacitor-Bm7NWSxP.js","./index-BJjkZhAE.js","./vendor-react-1wgkHQEd.js","./vendor-firebase-B8qz7irO.js","./index-CXBR1SuY.css","./log-out-CGKt3YDo.js","./CommunityGuidelinesScreen-DTRDLm7S.js","./MyPageScreen-lpPIJ3av.js","./tabs-C8huRtv9.js","./switch-BKazc2QQ.js","./separator-DCfBlNin.js","./shield-CcUm95K7.js","./triangle-alert-DhDogudD.js","./AppHeader-DUFlu2QS.js","./shield-check-BZnO_jG9.js","./user-check-B7uLcgpX.js","./file-text-BzSwTf16.js","./compass-DdDIcXqX.js","./CategoryScreen-BkqyP4K4.js","./search-CuXXKiqy.js","./SearchScreen-B9uYKFTo.js","./keyboard-dismiss-button-CgE0Ackf.js","./offline-indicator-C_WISlkw.js","./trending-up-CMkYmqDN.js","./RankingScreen-l6OG_wCF.js","./award-CSx5UlBn.js","./BookmarkScreen-ok6qFoJk.js","./MyContentListScreen-BInmtueT.js","./WriteScreen-DT2WLiU6.js","./NotesScreen-Byw1d0sP.js","./NoteDetailScreen-i54GsOA7.js","./QuestionComposeScreen-CQc7CpBX.js","./TitleShop-BaVvhVYE.js","./shopTitles-NHVA0yfQ.js","./lock-CRZRN9tI.js","./TitlesCollection-D9IoI8mt.js","./AchievementsScreen-DZ9MCCC_.js","./FollowListScreen-aYwitBPr.js","./UserProfileDialog-BnvVw9Ue.js","./NotificationSettingsDialog-Cl8AdsH7.js","./ReportDialog-CY7BpGSi.js","./AdminReportScreen-BOYqQkzz.js","./PrivacyPolicyScreen-DAe-T_Dr.js","./TermsOfServiceScreen-B4T6gwYb.js","./OpenSourceLicensesScreen-DryJ_Ox8.js","./AttributionsScreen-mKGQLZ91.js"])))=>i.map(i=>d[i]);
import{C as gn,_ as Ne,A as eo}from"./vendor-capacitor-Bm7NWSxP.js";import{c as mu,R as D,F as ri,b as ne,r as c,i as hu,d as se,f as to,e as oi,j as a,g as ja,h as vh,s as bh,u as wh,k as kh}from"./index-BJjkZhAE.js";import{a8 as Qo,a6 as es,a7 as ts,ae as ws,ak as pu,ax as Sh,ab as gu,ac as Ch,ad as si,al as Th,ay as Nh,az as Rh,ao as Ah,aA as Eh,ap as wl,aB as jh,aC as yu,Y as ke,a2 as Ot,aD as ai,y as Ia,a4 as Fn,h as xu,aE as vu,f as Ih,q as _h,k as Ph,s as ii,c as Lh,S as Ye,Q as zt,U as Ht,W as po,X as mt,a3 as hn,a0 as Pt,a5 as bu,$ as Rn,V as wu,_ as li,a1 as Kr,aF as ku,Z as no,aG as ns,aH as zn,aI as Su,aJ as Dh}from"./vendor-firebase-B8qz7irO.js";import{a as Mh,g as Oh,r as zh}from"./vendor-react-1wgkHQEd.js";const Cu="@firebase/installations",ci="0.6.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tu=1e4,Nu=`w:${ci}`,Ru="FIS_v2",Uh="https://firebaseinstallations.googleapis.com/v1",Bh=3600*1e3,Fh="installations",$h="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hh={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},lr=new pu(Fh,$h,Hh);function Au(e){return e instanceof gu&&e.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eu({projectId:e}){return`${Uh}/projects/${e}/installations`}function ju(e){return{token:e.token,requestStatus:2,expiresIn:Vh(e.expiresIn),creationTime:Date.now()}}async function Iu(e,t){const r=(await t.json()).error;return lr.create("request-failed",{requestName:e,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function _u({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function Wh(e,{refreshToken:t}){const n=_u(e);return n.append("Authorization",Gh(t)),n}async function Pu(e){const t=await e();return t.status>=500&&t.status<600?e():t}function Vh(e){return Number(e.replace("s","000"))}function Gh(e){return`${Ru} ${e}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qh({appConfig:e,heartbeatServiceProvider:t},{fid:n}){const r=Eu(e),o=_u(e),s=t.getImmediate({optional:!0});if(s){const d=await s.getHeartbeatsHeader();d&&o.append("x-firebase-client",d)}const i={fid:n,authVersion:Ru,appId:e.appId,sdkVersion:Nu},l={method:"POST",headers:o,body:JSON.stringify(i)},u=await Pu(()=>fetch(r,l));if(u.ok){const d=await u.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:ju(d.authToken)}}else throw await Iu("Create Installation",u)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lu(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yh(e){return btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xh=/^[cdef][\w-]{21}$/,_a="";function Kh(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const n=Jh(e);return Xh.test(n)?n:_a}catch{return _a}}function Jh(e){return Yh(e).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ks(e){return`${e.appName}!${e.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Du=new Map;function Mu(e,t){const n=ks(e);Ou(n,t),Zh(n,t)}function Ou(e,t){const n=Du.get(e);if(n)for(const r of n)r(t)}function Zh(e,t){const n=Qh();n&&n.postMessage({key:e,fid:t}),ep()}let or=null;function Qh(){return!or&&"BroadcastChannel"in self&&(or=new BroadcastChannel("[Firebase] FID Change"),or.onmessage=e=>{Ou(e.data.key,e.data.fid)}),or}function ep(){Du.size===0&&or&&(or.close(),or=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tp="firebase-installations-database",np=1,cr="firebase-installations-store";let oa=null;function ui(){return oa||(oa=Sh(tp,np,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(cr)}}})),oa}async function rs(e,t){const n=ks(e),o=(await ui()).transaction(cr,"readwrite"),s=o.objectStore(cr),i=await s.get(n);return await s.put(t,n),await o.done,(!i||i.fid!==t.fid)&&Mu(e,t.fid),t}async function zu(e){const t=ks(e),r=(await ui()).transaction(cr,"readwrite");await r.objectStore(cr).delete(t),await r.done}async function Ss(e,t){const n=ks(e),o=(await ui()).transaction(cr,"readwrite"),s=o.objectStore(cr),i=await s.get(n),l=t(i);return l===void 0?await s.delete(n):await s.put(l,n),await o.done,l&&(!i||i.fid!==l.fid)&&Mu(e,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function di(e){let t;const n=await Ss(e.appConfig,r=>{const o=rp(r),s=op(e,o);return t=s.registrationPromise,s.installationEntry});return n.fid===_a?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}function rp(e){const t=e||{fid:Kh(),registrationStatus:0};return Uu(t)}function op(e,t){if(t.registrationStatus===0){if(!navigator.onLine){const o=Promise.reject(lr.create("app-offline"));return{installationEntry:t,registrationPromise:o}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=sp(e,n);return{installationEntry:n,registrationPromise:r}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:ap(e)}:{installationEntry:t}}async function sp(e,t){try{const n=await qh(e,t);return rs(e.appConfig,n)}catch(n){throw Au(n)&&n.customData.serverCode===409?await zu(e.appConfig):await rs(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}async function ap(e){let t=await kl(e.appConfig);for(;t.registrationStatus===1;)await Lu(100),t=await kl(e.appConfig);if(t.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await di(e);return r||n}return t}function kl(e){return Ss(e,t=>{if(!t)throw lr.create("installation-not-found");return Uu(t)})}function Uu(e){return ip(e)?{fid:e.fid,registrationStatus:0}:e}function ip(e){return e.registrationStatus===1&&e.registrationTime+Tu<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lp({appConfig:e,heartbeatServiceProvider:t},n){const r=cp(e,n),o=Wh(e,n),s=t.getImmediate({optional:!0});if(s){const d=await s.getHeartbeatsHeader();d&&o.append("x-firebase-client",d)}const i={installation:{sdkVersion:Nu,appId:e.appId}},l={method:"POST",headers:o,body:JSON.stringify(i)},u=await Pu(()=>fetch(r,l));if(u.ok){const d=await u.json();return ju(d)}else throw await Iu("Generate Auth Token",u)}function cp(e,{fid:t}){return`${Eu(e)}/${t}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fi(e,t=!1){let n;const r=await Ss(e.appConfig,s=>{if(!Bu(s))throw lr.create("not-registered");const i=s.authToken;if(!t&&fp(i))return s;if(i.requestStatus===1)return n=up(e,t),s;{if(!navigator.onLine)throw lr.create("app-offline");const l=hp(s);return n=dp(e,l),l}});return n?await n:r.authToken}async function up(e,t){let n=await Sl(e.appConfig);for(;n.authToken.requestStatus===1;)await Lu(100),n=await Sl(e.appConfig);const r=n.authToken;return r.requestStatus===0?fi(e,t):r}function Sl(e){return Ss(e,t=>{if(!Bu(t))throw lr.create("not-registered");const n=t.authToken;return pp(n)?Object.assign(Object.assign({},t),{authToken:{requestStatus:0}}):t})}async function dp(e,t){try{const n=await lp(e,t),r=Object.assign(Object.assign({},t),{authToken:n});return await rs(e.appConfig,r),n}catch(n){if(Au(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await zu(e.appConfig);else{const r=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await rs(e.appConfig,r)}throw n}}function Bu(e){return e!==void 0&&e.registrationStatus===2}function fp(e){return e.requestStatus===2&&!mp(e)}function mp(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+Bh}function hp(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}function pp(e){return e.requestStatus===1&&e.requestTime+Tu<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gp(e){const t=e,{installationEntry:n,registrationPromise:r}=await di(t);return r?r.catch(console.error):fi(t).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yp(e,t=!1){const n=e;return await xp(n),(await fi(n,t)).token}async function xp(e){const{registrationPromise:t}=await di(e);t&&await t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vp(e){if(!e||!e.options)throw sa("App Configuration");if(!e.name)throw sa("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw sa(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}function sa(e){return lr.create("missing-app-config-values",{valueName:e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fu="installations",bp="installations-internal",wp=e=>{const t=e.getProvider("app").getImmediate(),n=vp(t),r=ws(t,"heartbeat");return{app:t,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},kp=e=>{const t=e.getProvider("app").getImmediate(),n=ws(t,Fu).getImmediate();return{getId:()=>gp(n),getToken:o=>yp(n,o)}};function Sp(){es(new ts(Fu,wp,"PUBLIC")),es(new ts(bp,kp,"PRIVATE"))}Sp();Qo(Cu,ci);Qo(Cu,ci,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const os="analytics",Cp="firebase_id",Tp="origin",Np=60*1e3,Rp="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",mi="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ft=new Th("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ap={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Lt=new pu("analytics","Analytics",Ap);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ep(e){if(!e.startsWith(mi)){const t=Lt.create("invalid-gtag-resource",{gtagURL:e});return ft.warn(t.message),""}return e}function $u(e){return Promise.all(e.map(t=>t.catch(n=>n)))}function jp(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}function Ip(e,t){const n=jp("firebase-js-sdk-policy",{createScriptURL:Ep}),r=document.createElement("script"),o=`${mi}?l=${e}&id=${t}`;r.src=n?n?.createScriptURL(o):o,r.async=!0,document.head.appendChild(r)}function _p(e){let t=[];return Array.isArray(window[e])?t=window[e]:window[e]=t,t}async function Pp(e,t,n,r,o,s){const i=r[o];try{if(i)await t[i];else{const u=(await $u(n)).find(d=>d.measurementId===o);u&&await t[u.appId]}}catch(l){ft.error(l)}e("config",o,s)}async function Lp(e,t,n,r,o){try{let s=[];if(o&&o.send_to){let i=o.send_to;Array.isArray(i)||(i=[i]);const l=await $u(n);for(const u of i){const d=l.find(f=>f.measurementId===u),m=d&&t[d.appId];if(m)s.push(m);else{s=[];break}}}s.length===0&&(s=Object.values(t)),await Promise.all(s),e("event",r,o||{})}catch(s){ft.error(s)}}function Dp(e,t,n,r){async function o(s,...i){try{if(s==="event"){const[l,u]=i;await Lp(e,t,n,l,u)}else if(s==="config"){const[l,u]=i;await Pp(e,t,n,r,l,u)}else if(s==="consent"){const[l,u]=i;e("consent",l,u)}else if(s==="get"){const[l,u,d]=i;e("get",l,u,d)}else if(s==="set"){const[l]=i;e("set",l)}else e(s,...i)}catch(l){ft.error(l)}}return o}function Mp(e,t,n,r,o){let s=function(...i){window[r].push(arguments)};return window[o]&&typeof window[o]=="function"&&(s=window[o]),window[o]=Dp(s,e,t,n),{gtagCore:s,wrappedGtag:window[o]}}function Op(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(mi)&&n.src.includes(e))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zp=30,Up=1e3;class Bp{constructor(t={},n=Up){this.throttleMetadata=t,this.intervalMillis=n}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,n){this.throttleMetadata[t]=n}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}}const Hu=new Bp;function Fp(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function $p(e){var t;const{appId:n,apiKey:r}=e,o={method:"GET",headers:Fp(r)},s=Rp.replace("{app-id}",n),i=await fetch(s,o);if(i.status!==200&&i.status!==304){let l="";try{const u=await i.json();!((t=u.error)===null||t===void 0)&&t.message&&(l=u.error.message)}catch{}throw Lt.create("config-fetch-failed",{httpStatus:i.status,responseMessage:l})}return i.json()}async function Hp(e,t=Hu,n){const{appId:r,apiKey:o,measurementId:s}=e.options;if(!r)throw Lt.create("no-app-id");if(!o){if(s)return{measurementId:s,appId:r};throw Lt.create("no-api-key")}const i=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new Gp;return setTimeout(async()=>{l.abort()},Np),Wu({appId:r,apiKey:o,measurementId:s},i,l,t)}async function Wu(e,{throttleEndTimeMillis:t,backoffCount:n},r,o=Hu){var s;const{appId:i,measurementId:l}=e;try{await Wp(r,t)}catch(u){if(l)return ft.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${u?.message}]`),{appId:i,measurementId:l};throw u}try{const u=await $p(e);return o.deleteThrottleMetadata(i),u}catch(u){const d=u;if(!Vp(d)){if(o.deleteThrottleMetadata(i),l)return ft.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${d?.message}]`),{appId:i,measurementId:l};throw u}const m=Number((s=d?.customData)===null||s===void 0?void 0:s.httpStatus)===503?wl(n,o.intervalMillis,zp):wl(n,o.intervalMillis),f={throttleEndTimeMillis:Date.now()+m,backoffCount:n+1};return o.setThrottleMetadata(i,f),ft.debug(`Calling attemptFetch again in ${m} millis`),Wu(e,f,r,o)}}function Wp(e,t){return new Promise((n,r)=>{const o=Math.max(t-Date.now(),0),s=setTimeout(n,o);e.addEventListener(()=>{clearTimeout(s),r(Lt.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function Vp(e){if(!(e instanceof gu)||!e.customData)return!1;const t=Number(e.customData.httpStatus);return t===429||t===500||t===503||t===504}class Gp{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}}async function qp(e,t,n,r,o){if(o&&o.global){e("event",n,r);return}else{const s=await t,i=Object.assign(Object.assign({},r),{send_to:s});e("event",n,i)}}async function Yp(e,t,n,r){{const o=await t;e("config",o,{update:!0,user_id:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xp(){if(Ah())try{await Eh()}catch(e){return ft.warn(Lt.create("indexeddb-unavailable",{errorInfo:e?.toString()}).message),!1}else return ft.warn(Lt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function Kp(e,t,n,r,o,s,i){var l;const u=Hp(e);u.then(y=>{n[y.measurementId]=y.appId,e.options.measurementId&&y.measurementId!==e.options.measurementId&&ft.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${y.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(y=>ft.error(y)),t.push(u);const d=Xp().then(y=>{if(y)return r.getId()}),[m,f]=await Promise.all([u,d]);Op(s)||Ip(s,m.measurementId),o("js",new Date);const h=(l=i?.config)!==null&&l!==void 0?l:{};return h[Tp]="firebase",h.update=!0,f!=null&&(h[Cp]=f),o("config",m.measurementId,h),m.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(t){this.app=t}_delete(){return delete Nr[this.app.options.appId],Promise.resolve()}}let Nr={},Cl=[];const Tl={};let aa="dataLayer",Zp="gtag",Nl,hi,Rl=!1;function Qp(){const e=[];if(Rh()&&e.push("This is a browser extension environment."),jh()||e.push("Cookies are not available."),e.length>0){const t=e.map((r,o)=>`(${o+1}) ${r}`).join(" "),n=Lt.create("invalid-analytics-context",{errorInfo:t});ft.warn(n.message)}}function eg(e,t,n){Qp();const r=e.options.appId;if(!r)throw Lt.create("no-app-id");if(!e.options.apiKey)if(e.options.measurementId)ft.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Lt.create("no-api-key");if(Nr[r]!=null)throw Lt.create("already-exists",{id:r});if(!Rl){_p(aa);const{wrappedGtag:s,gtagCore:i}=Mp(Nr,Cl,Tl,aa,Zp);hi=s,Nl=i,Rl=!0}return Nr[r]=Kp(e,Cl,Tl,t,Nl,aa,n),new Jp(e)}function tg(e=Ch()){e=si(e);const t=ws(e,os);return t.isInitialized()?t.getImmediate():ng(e)}function ng(e,t={}){const n=ws(e,os);if(n.isInitialized()){const o=n.getImmediate();if(Nh(t,n.getOptions()))return o;throw Lt.create("already-initialized")}return n.initialize({options:t})}function rg(e,t,n){e=si(e),Yp(hi,Nr[e.app.options.appId],t).catch(r=>ft.error(r))}function Wt(e,t,n,r){e=si(e),qp(hi,Nr[e.app.options.appId],t,n,r).catch(o=>ft.error(o))}const Al="@firebase/analytics",El="0.10.17";function og(){es(new ts(os,(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),o=t.getProvider("installations-internal").getImmediate();return eg(r,o,n)},"PUBLIC")),es(new ts("analytics-internal",e,"PRIVATE")),Qo(Al,El),Qo(Al,El,"esm2017");function e(t){try{const n=t.getProvider(os).getImmediate();return{logEvent:(r,o,s)=>Wt(n,r,o,s)}}catch(n){throw Lt.create("interop-component-reg-failed",{reason:n})}}}og();let Pe=null,jl=!1;function sg(){if(jl)return Pe;jl=!0;try{return Pe=tg(mu),Pe}catch{return null}}function Il(e){if(Pe)try{rg(Pe,e)}catch{}}function Vu(e,t){if(Pe)try{Wt(Pe,"screen_view",{firebase_screen:e,firebase_screen_class:t??e,platform:gn.getPlatform()})}catch{}}function ag(){Vu("login_screen","LoginScreen")}function ig(e){if(Pe)try{Wt(Pe,"login_started",{method:e,timestamp:Date.now(),platform:gn.getPlatform()})}catch{}}function lg(e,t){if(Pe)try{Wt(Pe,"login",{method:e}),Wt(Pe,"login_success",{method:e,duration_ms:t,platform:gn.getPlatform()})}catch{}}function cg(e,t,n){if(Pe)try{Wt(Pe,"login_failure",{method:e,error_type:t.substring(0,100),duration_ms:n,platform:gn.getPlatform()})}catch{}}function ug(e){if(Pe)try{Wt(Pe,"login_cancelled",{method:e,platform:gn.getPlatform()})}catch{}}function _l(e){if(Pe)try{Wt(Pe,"onboarding_step",{step:e,platform:gn.getPlatform()})}catch{}}function J1(){if(Pe)try{Wt(Pe,"tutorial_complete",{platform:gn.getPlatform()})}catch{}}function dg(){if(Pe)try{Wt(Pe,"logout",{platform:gn.getPlatform()})}catch{}}function fg(){if(Pe)try{Wt(Pe,"app_open",{platform:gn.getPlatform(),timestamp:Date.now()})}catch{}}function mg(){if(Pe)try{Wt(Pe,"terms_agreed",{platform:gn.getPlatform()})}catch{}}var Cs=Mh();const pi=Oh(Cs);function hg(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}const pg=e=>{switch(e){case"success":return xg;case"info":return bg;case"warning":return vg;case"error":return wg;default:return null}},gg=Array(12).fill(0),yg=({visible:e,className:t})=>D.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},D.createElement("div",{className:"sonner-spinner"},gg.map((n,r)=>D.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),xg=D.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},D.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),vg=D.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},D.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),bg=D.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},D.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),wg=D.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},D.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),kg=D.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},D.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),D.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),Sg=()=>{const[e,t]=D.useState(document.hidden);return D.useEffect(()=>{const n=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),e};let Pa=1;class Cg{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{const n=this.subscribers.indexOf(t);this.subscribers.splice(n,1)}),this.publish=t=>{this.subscribers.forEach(n=>n(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var n;const{message:r,...o}=t,s=typeof t?.id=="number"||((n=t.id)==null?void 0:n.length)>0?t.id:Pa++,i=this.toasts.find(u=>u.id===s),l=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),i?this.toasts=this.toasts.map(u=>u.id===s?(this.publish({...u,...t,id:s,title:r}),{...u,...t,id:s,dismissible:l,title:r}):u):this.addToast({title:r,...o,dismissible:l,id:s}),s},this.dismiss=t=>(t?(this.dismissedToasts.add(t),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:t,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),t),this.message=(t,n)=>this.create({...n,message:t}),this.error=(t,n)=>this.create({...n,message:t,type:"error"}),this.success=(t,n)=>this.create({...n,type:"success",message:t}),this.info=(t,n)=>this.create({...n,type:"info",message:t}),this.warning=(t,n)=>this.create({...n,type:"warning",message:t}),this.loading=(t,n)=>this.create({...n,type:"loading",message:t}),this.promise=(t,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:t,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const o=Promise.resolve(t instanceof Function?t():t);let s=r!==void 0,i;const l=o.then(async d=>{if(i=["resolve",d],D.isValidElement(d))s=!1,this.create({id:r,type:"default",message:d});else if(Ng(d)&&!d.ok){s=!1;const f=typeof n.error=="function"?await n.error(`HTTP error! status: ${d.status}`):n.error,h=typeof n.description=="function"?await n.description(`HTTP error! status: ${d.status}`):n.description,b=typeof f=="object"&&!D.isValidElement(f)?f:{message:f};this.create({id:r,type:"error",description:h,...b})}else if(d instanceof Error){s=!1;const f=typeof n.error=="function"?await n.error(d):n.error,h=typeof n.description=="function"?await n.description(d):n.description,b=typeof f=="object"&&!D.isValidElement(f)?f:{message:f};this.create({id:r,type:"error",description:h,...b})}else if(n.success!==void 0){s=!1;const f=typeof n.success=="function"?await n.success(d):n.success,h=typeof n.description=="function"?await n.description(d):n.description,b=typeof f=="object"&&!D.isValidElement(f)?f:{message:f};this.create({id:r,type:"success",description:h,...b})}}).catch(async d=>{if(i=["reject",d],n.error!==void 0){s=!1;const m=typeof n.error=="function"?await n.error(d):n.error,f=typeof n.description=="function"?await n.description(d):n.description,y=typeof m=="object"&&!D.isValidElement(m)?m:{message:m};this.create({id:r,type:"error",description:f,...y})}}).finally(()=>{s&&(this.dismiss(r),r=void 0),n.finally==null||n.finally.call(n)}),u=()=>new Promise((d,m)=>l.then(()=>i[0]==="reject"?m(i[1]):d(i[1])).catch(m));return typeof r!="string"&&typeof r!="number"?{unwrap:u}:Object.assign(r,{unwrap:u})},this.custom=(t,n)=>{const r=n?.id||Pa++;return this.create({jsx:t(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const kt=new Cg,Tg=(e,t)=>{const n=t?.id||Pa++;return kt.addToast({title:e,...t,id:n}),n},Ng=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",Rg=Tg,Ag=()=>kt.toasts,Eg=()=>kt.getActiveToasts(),Cn=Object.assign(Rg,{success:kt.success,info:kt.info,warning:kt.warning,error:kt.error,custom:kt.custom,message:kt.message,promise:kt.promise,dismiss:kt.dismiss,loading:kt.loading},{getHistory:Ag,getToasts:Eg});hg("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function _o(e){return e.label!==void 0}const jg=3,Ig="24px",_g="16px",Pl=4e3,Pg=356,Lg=14,Dg=45,Mg=200;function cn(...e){return e.filter(Boolean).join(" ")}function Og(e){const[t,n]=e.split("-"),r=[];return t&&r.push(t),n&&r.push(n),r}const zg=e=>{var t,n,r,o,s,i,l,u,d;const{invert:m,toast:f,unstyled:h,interacting:y,setHeights:b,visibleToasts:v,heights:w,index:p,toasts:g,expanded:x,removeToast:S,defaultRichColors:C,closeButton:R,style:k,cancelButtonStyle:T,actionButtonStyle:N,className:A="",descriptionClassName:L="",duration:O,position:E,gap:j,expandByDefault:M,classNames:I,icons:_,closeButtonAriaLabel:P="Close toast"}=e,[W,K]=D.useState(null),[q,G]=D.useState(null),[F,X]=D.useState(!1),[J,fe]=D.useState(!1),[Q,U]=D.useState(!1),[le,he]=D.useState(!1),[Ce,Ee]=D.useState(!1),[Re,je]=D.useState(0),[$e,Le]=D.useState(0),pe=D.useRef(f.duration||O||Pl),Se=D.useRef(null),_e=D.useRef(null),We=p===0,Xn=p+1<=v,Xe=f.type,pt=f.dismissible!==!1,qt=f.className||"",Yt=f.descriptionClassName||"",Tt=D.useMemo(()=>w.findIndex(ce=>ce.toastId===f.id)||0,[w,f.id]),Kn=D.useMemo(()=>{var ce;return(ce=f.closeButton)!=null?ce:R},[f.closeButton,R]),wn=D.useMemo(()=>f.duration||O||Pl,[f.duration,O]),_n=D.useRef(0),Xt=D.useRef(0),Kt=D.useRef(0),sn=D.useRef(null),[kn,Jn]=E.split("-"),Zn=D.useMemo(()=>w.reduce((ce,De,Ge)=>Ge>=Tt?ce:ce+De.height,0),[w,Tt]),Qn=Sg(),pr=f.invert||m,Pn=Xe==="loading";Xt.current=D.useMemo(()=>Tt*j+Zn,[Tt,Zn]),D.useEffect(()=>{pe.current=wn},[wn]),D.useEffect(()=>{X(!0)},[]),D.useEffect(()=>{const ce=_e.current;if(ce){const De=ce.getBoundingClientRect().height;return Le(De),b(Ge=>[{toastId:f.id,height:De,position:f.position},...Ge]),()=>b(Ge=>Ge.filter(Ke=>Ke.toastId!==f.id))}},[b,f.id]),D.useLayoutEffect(()=>{if(!F)return;const ce=_e.current,De=ce.style.height;ce.style.height="auto";const Ge=ce.getBoundingClientRect().height;ce.style.height=De,Le(Ge),b(Ke=>Ke.find(He=>He.toastId===f.id)?Ke.map(He=>He.toastId===f.id?{...He,height:Ge}:He):[{toastId:f.id,height:Ge,position:f.position},...Ke])},[F,f.title,f.description,b,f.id,f.jsx,f.action,f.cancel]);const Nt=D.useCallback(()=>{fe(!0),je(Xt.current),b(ce=>ce.filter(De=>De.toastId!==f.id)),setTimeout(()=>{S(f)},Mg)},[f,S,b,Xt]);D.useEffect(()=>{if(f.promise&&Xe==="loading"||f.duration===1/0||f.type==="loading")return;let ce;return x||y||Qn?(()=>{if(Kt.current<_n.current){const Ke=new Date().getTime()-_n.current;pe.current=pe.current-Ke}Kt.current=new Date().getTime()})():(()=>{pe.current!==1/0&&(_n.current=new Date().getTime(),ce=setTimeout(()=>{f.onAutoClose==null||f.onAutoClose.call(f,f),Nt()},pe.current))})(),()=>clearTimeout(ce)},[x,y,f,Xe,Qn,Nt]),D.useEffect(()=>{f.delete&&(Nt(),f.onDismiss==null||f.onDismiss.call(f,f))},[Nt,f.delete]);function gr(){var ce;if(_?.loading){var De;return D.createElement("div",{className:cn(I?.loader,f==null||(De=f.classNames)==null?void 0:De.loader,"sonner-loader"),"data-visible":Xe==="loading"},_.loading)}return D.createElement(yg,{className:cn(I?.loader,f==null||(ce=f.classNames)==null?void 0:ce.loader),visible:Xe==="loading"})}const yr=f.icon||_?.[Xe]||pg(Xe);var So,er;return D.createElement("li",{tabIndex:0,ref:_e,className:cn(A,qt,I?.toast,f==null||(t=f.classNames)==null?void 0:t.toast,I?.default,I?.[Xe],f==null||(n=f.classNames)==null?void 0:n[Xe]),"data-sonner-toast":"","data-rich-colors":(So=f.richColors)!=null?So:C,"data-styled":!(f.jsx||f.unstyled||h),"data-mounted":F,"data-promise":!!f.promise,"data-swiped":Ce,"data-removed":J,"data-visible":Xn,"data-y-position":kn,"data-x-position":Jn,"data-index":p,"data-front":We,"data-swiping":Q,"data-dismissible":pt,"data-type":Xe,"data-invert":pr,"data-swipe-out":le,"data-swipe-direction":q,"data-expanded":!!(x||M&&F),"data-testid":f.testId,style:{"--index":p,"--toasts-before":p,"--z-index":g.length-p,"--offset":`${J?Re:Xt.current}px`,"--initial-height":M?"auto":`${$e}px`,...k,...f.style},onDragEnd:()=>{U(!1),K(null),sn.current=null},onPointerDown:ce=>{ce.button!==2&&(Pn||!pt||(Se.current=new Date,je(Xt.current),ce.target.setPointerCapture(ce.pointerId),ce.target.tagName!=="BUTTON"&&(U(!0),sn.current={x:ce.clientX,y:ce.clientY})))},onPointerUp:()=>{var ce,De,Ge;if(le||!pt)return;sn.current=null;const Ke=Number(((ce=_e.current)==null?void 0:ce.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Ln=Number(((De=_e.current)==null?void 0:De.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),He=new Date().getTime()-((Ge=Se.current)==null?void 0:Ge.getTime()),ut=W==="x"?Ke:Ln,Dn=Math.abs(ut)/He;if(Math.abs(ut)>=Dg||Dn>.11){je(Xt.current),f.onDismiss==null||f.onDismiss.call(f,f),G(W==="x"?Ke>0?"right":"left":Ln>0?"down":"up"),Nt(),he(!0);return}else{var ze,ge;(ze=_e.current)==null||ze.style.setProperty("--swipe-amount-x","0px"),(ge=_e.current)==null||ge.style.setProperty("--swipe-amount-y","0px")}Ee(!1),U(!1),K(null)},onPointerMove:ce=>{var De,Ge,Ke;if(!sn.current||!pt||((De=window.getSelection())==null?void 0:De.toString().length)>0)return;const He=ce.clientY-sn.current.y,ut=ce.clientX-sn.current.x;var Dn;const ze=(Dn=e.swipeDirections)!=null?Dn:Og(E);!W&&(Math.abs(ut)>1||Math.abs(He)>1)&&K(Math.abs(ut)>Math.abs(He)?"x":"y");let ge={x:0,y:0};const tr=Jt=>1/(1.5+Math.abs(Jt)/20);if(W==="y"){if(ze.includes("top")||ze.includes("bottom"))if(ze.includes("top")&&He<0||ze.includes("bottom")&&He>0)ge.y=He;else{const Jt=He*tr(He);ge.y=Math.abs(Jt)<Math.abs(He)?Jt:He}}else if(W==="x"&&(ze.includes("left")||ze.includes("right")))if(ze.includes("left")&&ut<0||ze.includes("right")&&ut>0)ge.x=ut;else{const Jt=ut*tr(ut);ge.x=Math.abs(Jt)<Math.abs(ut)?Jt:ut}(Math.abs(ge.x)>0||Math.abs(ge.y)>0)&&Ee(!0),(Ge=_e.current)==null||Ge.style.setProperty("--swipe-amount-x",`${ge.x}px`),(Ke=_e.current)==null||Ke.style.setProperty("--swipe-amount-y",`${ge.y}px`)}},Kn&&!f.jsx&&Xe!=="loading"?D.createElement("button",{"aria-label":P,"data-disabled":Pn,"data-close-button":!0,onClick:Pn||!pt?()=>{}:()=>{Nt(),f.onDismiss==null||f.onDismiss.call(f,f)},className:cn(I?.closeButton,f==null||(r=f.classNames)==null?void 0:r.closeButton)},(er=_?.close)!=null?er:kg):null,(Xe||f.icon||f.promise)&&f.icon!==null&&(_?.[Xe]!==null||f.icon)?D.createElement("div",{"data-icon":"",className:cn(I?.icon,f==null||(o=f.classNames)==null?void 0:o.icon)},f.promise||f.type==="loading"&&!f.icon?f.icon||gr():null,f.type!=="loading"?yr:null):null,D.createElement("div",{"data-content":"",className:cn(I?.content,f==null||(s=f.classNames)==null?void 0:s.content)},D.createElement("div",{"data-title":"",className:cn(I?.title,f==null||(i=f.classNames)==null?void 0:i.title)},f.jsx?f.jsx:typeof f.title=="function"?f.title():f.title),f.description?D.createElement("div",{"data-description":"",className:cn(L,Yt,I?.description,f==null||(l=f.classNames)==null?void 0:l.description)},typeof f.description=="function"?f.description():f.description):null),D.isValidElement(f.cancel)?f.cancel:f.cancel&&_o(f.cancel)?D.createElement("button",{"data-button":!0,"data-cancel":!0,style:f.cancelButtonStyle||T,onClick:ce=>{_o(f.cancel)&&pt&&(f.cancel.onClick==null||f.cancel.onClick.call(f.cancel,ce),Nt())},className:cn(I?.cancelButton,f==null||(u=f.classNames)==null?void 0:u.cancelButton)},f.cancel.label):null,D.isValidElement(f.action)?f.action:f.action&&_o(f.action)?D.createElement("button",{"data-button":!0,"data-action":!0,style:f.actionButtonStyle||N,onClick:ce=>{_o(f.action)&&(f.action.onClick==null||f.action.onClick.call(f.action,ce),!ce.defaultPrevented&&Nt())},className:cn(I?.actionButton,f==null||(d=f.classNames)==null?void 0:d.actionButton)},f.action.label):null)};function Ll(){if(typeof window>"u"||typeof document>"u")return"ltr";const e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function Ug(e,t){const n={};return[e,t].forEach((r,o)=>{const s=o===1,i=s?"--mobile-offset":"--offset",l=s?_g:Ig;function u(d){["top","right","bottom","left"].forEach(m=>{n[`${i}-${m}`]=typeof d=="number"?`${d}px`:d})}typeof r=="number"||typeof r=="string"?u(r):typeof r=="object"?["top","right","bottom","left"].forEach(d=>{r[d]===void 0?n[`${i}-${d}`]=l:n[`${i}-${d}`]=typeof r[d]=="number"?`${r[d]}px`:r[d]}):u(l)}),n}const Bg=D.forwardRef(function(t,n){const{id:r,invert:o,position:s="bottom-right",hotkey:i=["altKey","KeyT"],expand:l,closeButton:u,className:d,offset:m,mobileOffset:f,theme:h="light",richColors:y,duration:b,style:v,visibleToasts:w=jg,toastOptions:p,dir:g=Ll(),gap:x=Lg,icons:S,containerAriaLabel:C="Notifications"}=t,[R,k]=D.useState([]),T=D.useMemo(()=>r?R.filter(F=>F.toasterId===r):R.filter(F=>!F.toasterId),[R,r]),N=D.useMemo(()=>Array.from(new Set([s].concat(T.filter(F=>F.position).map(F=>F.position)))),[T,s]),[A,L]=D.useState([]),[O,E]=D.useState(!1),[j,M]=D.useState(!1),[I,_]=D.useState(h!=="system"?h:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),P=D.useRef(null),W=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),K=D.useRef(null),q=D.useRef(!1),G=D.useCallback(F=>{k(X=>{var J;return(J=X.find(fe=>fe.id===F.id))!=null&&J.delete||kt.dismiss(F.id),X.filter(({id:fe})=>fe!==F.id)})},[]);return D.useEffect(()=>kt.subscribe(F=>{if(F.dismiss){requestAnimationFrame(()=>{k(X=>X.map(J=>J.id===F.id?{...J,delete:!0}:J))});return}setTimeout(()=>{pi.flushSync(()=>{k(X=>{const J=X.findIndex(fe=>fe.id===F.id);return J!==-1?[...X.slice(0,J),{...X[J],...F},...X.slice(J+1)]:[F,...X]})})})}),[R]),D.useEffect(()=>{if(h!=="system"){_(h);return}if(h==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?_("dark"):_("light")),typeof window>"u")return;const F=window.matchMedia("(prefers-color-scheme: dark)");try{F.addEventListener("change",({matches:X})=>{_(X?"dark":"light")})}catch{F.addListener(({matches:J})=>{try{_(J?"dark":"light")}catch{}})}},[h]),D.useEffect(()=>{R.length<=1&&E(!1)},[R]),D.useEffect(()=>{const F=X=>{var J;if(i.every(U=>X[U]||X.code===U)){var Q;E(!0),(Q=P.current)==null||Q.focus()}X.code==="Escape"&&(document.activeElement===P.current||(J=P.current)!=null&&J.contains(document.activeElement))&&E(!1)};return document.addEventListener("keydown",F),()=>document.removeEventListener("keydown",F)},[i]),D.useEffect(()=>{if(P.current)return()=>{K.current&&(K.current.focus({preventScroll:!0}),K.current=null,q.current=!1)}},[P.current]),D.createElement("section",{ref:n,"aria-label":`${C} ${W}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},N.map((F,X)=>{var J;const[fe,Q]=F.split("-");return T.length?D.createElement("ol",{key:F,dir:g==="auto"?Ll():g,tabIndex:-1,ref:P,className:d,"data-sonner-toaster":!0,"data-sonner-theme":I,"data-y-position":fe,"data-x-position":Q,style:{"--front-toast-height":`${((J=A[0])==null?void 0:J.height)||0}px`,"--width":`${Pg}px`,"--gap":`${x}px`,...v,...Ug(m,f)},onBlur:U=>{q.current&&!U.currentTarget.contains(U.relatedTarget)&&(q.current=!1,K.current&&(K.current.focus({preventScroll:!0}),K.current=null))},onFocus:U=>{U.target instanceof HTMLElement&&U.target.dataset.dismissible==="false"||q.current||(q.current=!0,K.current=U.relatedTarget)},onMouseEnter:()=>E(!0),onMouseMove:()=>E(!0),onMouseLeave:()=>{j||E(!1)},onDragEnd:()=>E(!1),onPointerDown:U=>{U.target instanceof HTMLElement&&U.target.dataset.dismissible==="false"||M(!0)},onPointerUp:()=>M(!1)},T.filter(U=>!U.position&&X===0||U.position===F).map((U,le)=>{var he,Ce;return D.createElement(zg,{key:U.id,icons:S,index:le,toast:U,defaultRichColors:y,duration:(he=p?.duration)!=null?he:b,className:p?.className,descriptionClassName:p?.descriptionClassName,invert:o,visibleToasts:w,closeButton:(Ce=p?.closeButton)!=null?Ce:u,interacting:j,position:F,style:p?.style,unstyled:p?.unstyled,classNames:p?.classNames,cancelButtonStyle:p?.cancelButtonStyle,actionButtonStyle:p?.actionButtonStyle,closeButtonAriaLabel:p?.closeButtonAriaLabel,removeToast:G,toasts:T.filter(Ee=>Ee.position==U.position),heights:A.filter(Ee=>Ee.position==U.position),setHeights:L,expandByDefault:l,gap:x,expanded:O,swipeDirections:t.swipeDirections})})):null}))});function Po(){try{if(typeof window>"u")return!0;const e=localStorage.getItem("toastEnabled");return e===null?!0:e==="true"}catch{return!0}}function Z1(e){try{if(typeof window>"u")return;localStorage.setItem("toastEnabled",e.toString())}catch{}}const H={success:(e,t)=>{if(Po())return Cn.success(e,t)},error:(e,t)=>Cn.error(e,t),info:(e,t)=>{if(Po())return Cn.info(e,t)},warning:(e,t)=>Cn.warning(e,t),message:(e,t)=>{if(Po())return Cn.message(e,t)},promise:(e,t)=>Cn.promise(e,t),loading:(e,t)=>Cn.loading(e,t),custom:(e,t)=>{if(Po())return Cn.custom(e,t)},dismiss:e=>Cn.dismiss(e)};async function Fg(){try{await ri.signOut()}catch{}try{await yu(ne)}catch{}}const $g=Fn(to,"verifyLogin"),Gr="app_init_cache_v1_",Dl=1440*60*1e3;function Hg(){const[e,t]=c.useState(!0),[n,r]=c.useState("login"),[o,s]=c.useState(0),[i,l]=c.useState({nickname:"",email:"",profileImage:""}),[u]=c.useState(null),d={current:null},m=c.useCallback(()=>(d.current||(d.current=hu().catch(()=>{})),d.current),[]),f=c.useCallback(async v=>{const w=m(),p=g=>{const x=String(g?.code??"");return x==="permission-denied"||x==="firestore/permission-denied"||x==="functions/permission-denied"||x.includes("permission-denied")};try{const g=ke(se,"users",v);return await Ot(g)}catch(g){if(!p(g))throw g;return await w,await Ot(ke(se,"users",v))}},[m]),h=c.useCallback(async v=>{const w=await f(v.uid),p=w.exists()?w.data():{},g=typeof p.nickname=="string"?p.nickname:"",x=!!p.onboardingComplete;let S="";const C=p.photoURL;typeof C=="string"&&(C.includes("googleusercontent.com")||C.includes("googleapis.com")||C.includes("lh3.googleusercontent.com")||C.includes("lh4.googleusercontent.com")||C.includes("lh5.googleusercontent.com")||C.includes("lh6.googleusercontent.com")||(S=C)),l({nickname:g,email:v.email??"",profileImage:S});try{if(typeof window<"u"){const R=`${Gr}${v.uid}`,k={nickname:g,email:v.email??"",profileImage:S,onboardingComplete:x,lastVerifiedAt:Date.now(),uid:v.uid};window.localStorage.setItem(R,JSON.stringify(k))}}catch{}r(g?x?"main":"guidelines":"nickname")},[f]),y=c.useCallback(async()=>{const v=ne.currentUser;if(!v){l({nickname:"",email:"",profileImage:""}),r("login"),t(!1);return}if(await v.reload(),!v.emailVerified){r("verifyEmail"),t(!1);return}await h({uid:v.uid,email:v.email}),t(!1)},[h]);c.useEffect(()=>{const w=(()=>{try{const g=ne.currentUser;if(g){if(!g.emailVerified)return l({nickname:"",email:g.email??"",profileImage:""}),r("verifyEmail"),t(!1),!0;const x=`${Gr}${g.uid}`,S=typeof window<"u"?window.localStorage.getItem(x):null;if(S){const C=JSON.parse(S),R=Date.now();if(C.email===g.email&&C.uid===g.uid&&R-C.lastVerifiedAt<Dl)return l({nickname:C.nickname,email:C.email,profileImage:C.profileImage}),C.nickname?C.onboardingComplete?r("main"):r("guidelines"):r("nickname"),t(!1),!0}}}catch{}return!1})(),p=ai(ne,async g=>{if(s(x=>x+1),g){const x=(S,C)=>{};if(typeof performance<"u"?performance.now():Date.now(),m().finally(()=>{typeof performance<"u"?performance.now():Date.now()}),!g.emailVerified){l({nickname:"",email:g.email??"",profileImage:""}),r("verifyEmail"),t(!1);return}if(w){(async()=>{try{const S=`${Gr}${g.uid}`,C=await f(g.uid);if(C.exists()){const R=C.data(),k=R.nickname||"",T=R.onboardingComplete||!1;let N="";if(R.photoURL&&typeof R.photoURL=="string"){const L=R.photoURL;L.includes("googleusercontent.com")||L.includes("googleapis.com")||L.includes("lh3.googleusercontent.com")||L.includes("lh4.googleusercontent.com")||L.includes("lh5.googleusercontent.com")||L.includes("lh6.googleusercontent.com")||(N=L)}const A={nickname:k,email:g.email,profileImage:N};try{if(typeof window<"u"){const L={...A,onboardingComplete:T,lastVerifiedAt:Date.now(),uid:g.uid};window.localStorage.setItem(S,JSON.stringify(L))}}catch{}}}catch{}})();return}try{const S=`${Gr}${g.uid}`;let C=!1;try{const E=typeof window<"u"?window.localStorage.getItem(S):null;if(E){const j=JSON.parse(E),M=Date.now();j.email===g.email&&M-j.lastVerifiedAt<Dl&&(l({nickname:j.nickname,email:j.email,profileImage:j.profileImage}),j.nickname?j.onboardingComplete?r("main"):r("guidelines"):r("nickname"),t(!1),C=!0)}}catch{}if(C){(async()=>{try{const E=await f(g.uid);if(E.exists()){const j=E.data(),M=j.nickname||"",I=j.onboardingComplete||!1;let _="";if(j.photoURL&&typeof j.photoURL=="string"){const W=j.photoURL;W.includes("googleusercontent.com")||W.includes("googleapis.com")||W.includes("lh3.googleusercontent.com")||W.includes("lh4.googleusercontent.com")||W.includes("lh5.googleusercontent.com")||W.includes("lh6.googleusercontent.com")||(_=W)}const P={nickname:M,email:g.email,profileImage:_};try{if(typeof window<"u"){const W={...P,onboardingComplete:I,lastVerifiedAt:Date.now(),uid:g.uid};window.localStorage.setItem(S,JSON.stringify(W))}}catch{}}}catch{}})();return}const R=g.providerData.some(E=>E.providerId==="google.com");let k=await f(g.uid);if(!k.exists()){R&&g.photoURL&&Ia(g,{photoURL:null}).catch(()=>{});const E={nickname:"",email:g.email,profileImage:""};l(E),r("nickname");try{if(typeof window<"u"){const j={...E,onboardingComplete:!1,lastVerifiedAt:Date.now(),uid:g.uid};window.localStorage.setItem(S,JSON.stringify(j))}}catch{}t(!1),(async()=>{try{const j=typeof performance<"u"?performance.now():Date.now();await $g({email:g.email});const M=typeof performance<"u"?performance.now():Date.now();x("functions.verifyLogin(background)",M-j)}catch{}})();return}const T=k.data(),N=T.nickname||"",A=T.onboardingComplete||!1;R&&g.photoURL&&Ia(g,{photoURL:null}).catch(()=>{});let L="";if(T.photoURL&&typeof T.photoURL=="string"){const E=T.photoURL;E.includes("googleusercontent.com")||E.includes("googleapis.com")||E.includes("lh3.googleusercontent.com")||E.includes("lh4.googleusercontent.com")||E.includes("lh5.googleusercontent.com")||E.includes("lh6.googleusercontent.com")||(L=E)}const O={nickname:N,email:g.email,profileImage:L};l(O),r(N?A?"main":"guidelines":"nickname");try{if(typeof window<"u"){const E={...O,onboardingComplete:A,lastVerifiedAt:Date.now(),uid:g.uid};window.localStorage.setItem(S,JSON.stringify(E))}}catch{}}catch(S){const C=String(S?.code??""),R=String(S?.message??"");C==="functions/failed-precondition"&&R?H.error(R):C==="functions/unauthenticated"?H.error("  .   ."):C==="functions/unavailable"?H.error("   ."):C==="permission-denied"||C==="firestore/permission-denied"?H.error("    . Firestore    App Check   ."):H.error("    ."),await yu(ne),r("login");try{if(g&&typeof window<"u"){const k=`${Gr}${g.uid}`;window.localStorage.removeItem(k)}}catch{}}finally{t(!1)}}else l({nickname:"",email:"",profileImage:""}),r("main"),t(!1)});return!w&&ne.currentUser===null&&t(!1),()=>p()},[m,f]);const b=c.useCallback(async()=>{await Fg()},[]);return{isLoading:e,initialScreen:n,authStateVersion:o,userData:i,globalError:u,resetAuthState:b,refreshAfterEmailVerified:y}}/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wg=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Vg=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),Ml=e=>{const t=Vg(e);return t.charAt(0).toUpperCase()+t.slice(1)},Gu=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Gg={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qg=c.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:o="",children:s,iconNode:i,...l},u)=>c.createElement("svg",{ref:u,...Gg,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:Gu("lucide",o),...l},[...i.map(([d,m])=>c.createElement(d,m)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=(e,t)=>{const n=c.forwardRef(({className:r,...o},s)=>c.createElement(qg,{ref:s,iconNode:t,className:Gu(`lucide-${Wg(Ml(e))}`,`lucide-${e}`,r),...o}));return n.displayName=Ml(e),n};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yg=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],gi=ve("arrow-left",Yg);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xg=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Kg=ve("bell",Xg);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jg=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Zg=ve("book-open",Jg);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qg=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]],yi=ve("bookmark",Qg);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ey=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],xi=ve("check",ey);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ty=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],ny=ve("chevron-down",ty);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ry=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],oy=ve("circle-alert",ry);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sy=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Ol=ve("circle-check",sy);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ay=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],qu=ve("circle-help",ay);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iy=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],zl=ve("circle-x",iy);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ly=[["path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",key:"sobvz5"}],["path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",key:"11i496"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}]],cy=ve("cog",ly);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uy=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],dy=ve("dollar-sign",uy);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fy=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],Yu=ve("ellipsis",fy);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const my=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],hy=ve("eye",my);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const py=[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]],Xu=ve("flag",py);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gy=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],yy=ve("globe",gy);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xy=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],Ul=ve("hash",xy);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vy=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],by=ve("house",vy);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wy=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],vi=ve("loader-circle",wy);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ky=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],Sy=ve("menu",ky);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cy=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],bi=ve("message-circle",Cy);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ty=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],wi=ve("moon",Ty);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ny=[["path",{d:"M2 6h4",key:"aawbzj"}],["path",{d:"M2 10h4",key:"l0bgd4"}],["path",{d:"M2 14h4",key:"1gsvsf"}],["path",{d:"M2 18h4",key:"1bu2t1"}],["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["path",{d:"M9.5 8h5",key:"11mslq"}],["path",{d:"M9.5 12H16",key:"ktog6x"}],["path",{d:"M9.5 16H14",key:"p1seyn"}]],Ry=ve("notebook-text",Ny);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ay=[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]],Ey=ve("pen-line",Ay);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jy=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],Iy=ve("pen-tool",jy);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _y=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ku=ve("plus",_y);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Py=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],Ly=ve("rotate-cw",Py);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dy=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],My=ve("send",Dy);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oy=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],zy=ve("settings",Oy);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uy=[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]],By=ve("shopping-bag",Uy);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fy=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],La=ve("sparkles",Fy);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $y=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],ss=ve("star",$y);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hy=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],ki=ve("sun",Hy);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wy=[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]],Da=ve("trophy",Wy);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vy=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],Gy=ve("user-x",Vy);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qy=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Yy=ve("user",qy);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xy=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],Ky=ve("users",Xy);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jy=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],as=ve("x",Jy);function Bl(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Ts(...e){return t=>{let n=!1;const r=e.map(o=>{const s=Bl(o,t);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let o=0;o<r.length;o++){const s=r[o];typeof s=="function"?s():Bl(e[o],null)}}}}function ot(...e){return c.useCallback(Ts(...e),e)}var Zy=Symbol.for("react.lazy"),is=oi[" use ".trim().toString()];function Qy(e){return typeof e=="object"&&e!==null&&"then"in e}function Ju(e){return e!=null&&typeof e=="object"&&"$$typeof"in e&&e.$$typeof===Zy&&"_payload"in e&&Qy(e._payload)}function Si(e){const t=e0(e),n=c.forwardRef((r,o)=>{let{children:s,...i}=r;Ju(s)&&typeof is=="function"&&(s=is(s._payload));const l=c.Children.toArray(s),u=l.find(n0);if(u){const d=u.props.children,m=l.map(f=>f===u?c.Children.count(d)>1?c.Children.only(null):c.isValidElement(d)?d.props.children:null:f);return a.jsx(t,{...i,ref:o,children:c.isValidElement(d)?c.cloneElement(d,void 0,m):null})}return a.jsx(t,{...i,ref:o,children:s})});return n.displayName=`${e}.Slot`,n}var Zu=Si("Slot");function e0(e){const t=c.forwardRef((n,r)=>{let{children:o,...s}=n;if(Ju(o)&&typeof is=="function"&&(o=is(o._payload)),c.isValidElement(o)){const i=o0(o),l=r0(s,o.props);return o.type!==c.Fragment&&(l.ref=r?Ts(r,i):i),c.cloneElement(o,l)}return c.Children.count(o)>1?c.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var t0=Symbol("radix.slottable");function n0(e){return c.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===t0}function r0(e,t){const n={...t};for(const r in t){const o=e[r],s=t[r];/^on[A-Z]/.test(r)?o&&s?n[r]=(...l)=>{const u=s(...l);return o(...l),u}:o&&(n[r]=o):r==="style"?n[r]={...o,...s}:r==="className"&&(n[r]=[o,s].filter(Boolean).join(" "))}return{...e,...n}}function o0(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function Qu(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(n=Qu(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Ci(){for(var e,t,n=0,r="",o=arguments.length;n<o;n++)(e=arguments[n])&&(t=Qu(e))&&(r&&(r+=" "),r+=t);return r}const s0=(e,t)=>{const n=new Array(e.length+t.length);for(let r=0;r<e.length;r++)n[r]=e[r];for(let r=0;r<t.length;r++)n[e.length+r]=t[r];return n},a0=(e,t)=>({classGroupId:e,validator:t}),ed=(e=new Map,t=null,n)=>({nextPart:e,validators:t,classGroupId:n}),ls="-",Fl=[],i0="arbitrary..",l0=e=>{const t=u0(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:i=>{if(i.startsWith("[")&&i.endsWith("]"))return c0(i);const l=i.split(ls),u=l[0]===""&&l.length>1?1:0;return td(l,u,t)},getConflictingClassGroupIds:(i,l)=>{if(l){const u=r[i],d=n[i];return u?d?s0(d,u):u:d||Fl}return n[i]||Fl}}},td=(e,t,n)=>{if(e.length-t===0)return n.classGroupId;const o=e[t],s=n.nextPart.get(o);if(s){const d=td(e,t+1,s);if(d)return d}const i=n.validators;if(i===null)return;const l=t===0?e.join(ls):e.slice(t).join(ls),u=i.length;for(let d=0;d<u;d++){const m=i[d];if(m.validator(l))return m.classGroupId}},c0=e=>e.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const t=e.slice(1,-1),n=t.indexOf(":"),r=t.slice(0,n);return r?i0+r:void 0})(),u0=e=>{const{theme:t,classGroups:n}=e;return d0(n,t)},d0=(e,t)=>{const n=ed();for(const r in e){const o=e[r];Ti(o,n,r,t)}return n},Ti=(e,t,n,r)=>{const o=e.length;for(let s=0;s<o;s++){const i=e[s];f0(i,t,n,r)}},f0=(e,t,n,r)=>{if(typeof e=="string"){m0(e,t,n);return}if(typeof e=="function"){h0(e,t,n,r);return}p0(e,t,n,r)},m0=(e,t,n)=>{const r=e===""?t:nd(t,e);r.classGroupId=n},h0=(e,t,n,r)=>{if(g0(e)){Ti(e(r),t,n,r);return}t.validators===null&&(t.validators=[]),t.validators.push(a0(n,e))},p0=(e,t,n,r)=>{const o=Object.entries(e),s=o.length;for(let i=0;i<s;i++){const[l,u]=o[i];Ti(u,nd(t,l),n,r)}},nd=(e,t)=>{let n=e;const r=t.split(ls),o=r.length;for(let s=0;s<o;s++){const i=r[s];let l=n.nextPart.get(i);l||(l=ed(),n.nextPart.set(i,l)),n=l}return n},g0=e=>"isThemeGetter"in e&&e.isThemeGetter===!0,y0=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=Object.create(null),r=Object.create(null);const o=(s,i)=>{n[s]=i,t++,t>e&&(t=0,r=n,n=Object.create(null))};return{get(s){let i=n[s];if(i!==void 0)return i;if((i=r[s])!==void 0)return o(s,i),i},set(s,i){s in n?n[s]=i:o(s,i)}}},Ma="!",$l=":",x0=[],Hl=(e,t,n,r,o)=>({modifiers:e,hasImportantModifier:t,baseClassName:n,maybePostfixModifierPosition:r,isExternal:o}),v0=e=>{const{prefix:t,experimentalParseClassName:n}=e;let r=o=>{const s=[];let i=0,l=0,u=0,d;const m=o.length;for(let v=0;v<m;v++){const w=o[v];if(i===0&&l===0){if(w===$l){s.push(o.slice(u,v)),u=v+1;continue}if(w==="/"){d=v;continue}}w==="["?i++:w==="]"?i--:w==="("?l++:w===")"&&l--}const f=s.length===0?o:o.slice(u);let h=f,y=!1;f.endsWith(Ma)?(h=f.slice(0,-1),y=!0):f.startsWith(Ma)&&(h=f.slice(1),y=!0);const b=d&&d>u?d-u:void 0;return Hl(s,y,h,b)};if(t){const o=t+$l,s=r;r=i=>i.startsWith(o)?s(i.slice(o.length)):Hl(x0,!1,i,void 0,!0)}if(n){const o=r;r=s=>n({className:s,parseClassName:o})}return r},b0=e=>{const t=new Map;return e.orderSensitiveModifiers.forEach((n,r)=>{t.set(n,1e6+r)}),n=>{const r=[];let o=[];for(let s=0;s<n.length;s++){const i=n[s],l=i[0]==="[",u=t.has(i);l||u?(o.length>0&&(o.sort(),r.push(...o),o=[]),r.push(i)):o.push(i)}return o.length>0&&(o.sort(),r.push(...o)),r}},w0=e=>({cache:y0(e.cacheSize),parseClassName:v0(e),sortModifiers:b0(e),...l0(e)}),k0=/\s+/,S0=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:o,sortModifiers:s}=t,i=[],l=e.trim().split(k0);let u="";for(let d=l.length-1;d>=0;d-=1){const m=l[d],{isExternal:f,modifiers:h,hasImportantModifier:y,baseClassName:b,maybePostfixModifierPosition:v}=n(m);if(f){u=m+(u.length>0?" "+u:u);continue}let w=!!v,p=r(w?b.substring(0,v):b);if(!p){if(!w){u=m+(u.length>0?" "+u:u);continue}if(p=r(b),!p){u=m+(u.length>0?" "+u:u);continue}w=!1}const g=h.length===0?"":h.length===1?h[0]:s(h).join(":"),x=y?g+Ma:g,S=x+p;if(i.indexOf(S)>-1)continue;i.push(S);const C=o(p,w);for(let R=0;R<C.length;++R){const k=C[R];i.push(x+k)}u=m+(u.length>0?" "+u:u)}return u},C0=(...e)=>{let t=0,n,r,o="";for(;t<e.length;)(n=e[t++])&&(r=rd(n))&&(o&&(o+=" "),o+=r);return o},rd=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=rd(e[r]))&&(n&&(n+=" "),n+=t);return n},T0=(e,...t)=>{let n,r,o,s;const i=u=>{const d=t.reduce((m,f)=>f(m),e());return n=w0(d),r=n.cache.get,o=n.cache.set,s=l,l(u)},l=u=>{const d=r(u);if(d)return d;const m=S0(u,n);return o(u,m),m};return s=i,(...u)=>s(C0(...u))},N0=[],Ze=e=>{const t=n=>n[e]||N0;return t.isThemeGetter=!0,t},od=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,sd=/^\((?:(\w[\w-]*):)?(.+)\)$/i,R0=/^\d+\/\d+$/,A0=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,E0=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,j0=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,I0=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,_0=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,wr=e=>R0.test(e),ye=e=>!!e&&!Number.isNaN(Number(e)),Mn=e=>!!e&&Number.isInteger(Number(e)),ia=e=>e.endsWith("%")&&ye(e.slice(0,-1)),Tn=e=>A0.test(e),P0=()=>!0,L0=e=>E0.test(e)&&!j0.test(e),ad=()=>!1,D0=e=>I0.test(e),M0=e=>_0.test(e),O0=e=>!ee(e)&&!te(e),z0=e=>Dr(e,cd,ad),ee=e=>od.test(e),rr=e=>Dr(e,ud,L0),la=e=>Dr(e,H0,ye),Wl=e=>Dr(e,id,ad),U0=e=>Dr(e,ld,M0),Lo=e=>Dr(e,dd,D0),te=e=>sd.test(e),qr=e=>Mr(e,ud),B0=e=>Mr(e,W0),Vl=e=>Mr(e,id),F0=e=>Mr(e,cd),$0=e=>Mr(e,ld),Do=e=>Mr(e,dd,!0),Dr=(e,t,n)=>{const r=od.exec(e);return r?r[1]?t(r[1]):n(r[2]):!1},Mr=(e,t,n=!1)=>{const r=sd.exec(e);return r?r[1]?t(r[1]):n:!1},id=e=>e==="position"||e==="percentage",ld=e=>e==="image"||e==="url",cd=e=>e==="length"||e==="size"||e==="bg-size",ud=e=>e==="length",H0=e=>e==="number",W0=e=>e==="family-name",dd=e=>e==="shadow",V0=()=>{const e=Ze("color"),t=Ze("font"),n=Ze("text"),r=Ze("font-weight"),o=Ze("tracking"),s=Ze("leading"),i=Ze("breakpoint"),l=Ze("container"),u=Ze("spacing"),d=Ze("radius"),m=Ze("shadow"),f=Ze("inset-shadow"),h=Ze("text-shadow"),y=Ze("drop-shadow"),b=Ze("blur"),v=Ze("perspective"),w=Ze("aspect"),p=Ze("ease"),g=Ze("animate"),x=()=>["auto","avoid","all","avoid-page","page","left","right","column"],S=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],C=()=>[...S(),te,ee],R=()=>["auto","hidden","clip","visible","scroll"],k=()=>["auto","contain","none"],T=()=>[te,ee,u],N=()=>[wr,"full","auto",...T()],A=()=>[Mn,"none","subgrid",te,ee],L=()=>["auto",{span:["full",Mn,te,ee]},Mn,te,ee],O=()=>[Mn,"auto",te,ee],E=()=>["auto","min","max","fr",te,ee],j=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],M=()=>["start","end","center","stretch","center-safe","end-safe"],I=()=>["auto",...T()],_=()=>[wr,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...T()],P=()=>[e,te,ee],W=()=>[...S(),Vl,Wl,{position:[te,ee]}],K=()=>["no-repeat",{repeat:["","x","y","space","round"]}],q=()=>["auto","cover","contain",F0,z0,{size:[te,ee]}],G=()=>[ia,qr,rr],F=()=>["","none","full",d,te,ee],X=()=>["",ye,qr,rr],J=()=>["solid","dashed","dotted","double"],fe=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Q=()=>[ye,ia,Vl,Wl],U=()=>["","none",b,te,ee],le=()=>["none",ye,te,ee],he=()=>["none",ye,te,ee],Ce=()=>[ye,te,ee],Ee=()=>[wr,"full",...T()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Tn],breakpoint:[Tn],color:[P0],container:[Tn],"drop-shadow":[Tn],ease:["in","out","in-out"],font:[O0],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Tn],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Tn],shadow:[Tn],spacing:["px",ye],text:[Tn],"text-shadow":[Tn],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",wr,ee,te,w]}],container:["container"],columns:[{columns:[ye,ee,te,l]}],"break-after":[{"break-after":x()}],"break-before":[{"break-before":x()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:C()}],overflow:[{overflow:R()}],"overflow-x":[{"overflow-x":R()}],"overflow-y":[{"overflow-y":R()}],overscroll:[{overscroll:k()}],"overscroll-x":[{"overscroll-x":k()}],"overscroll-y":[{"overscroll-y":k()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:N()}],"inset-x":[{"inset-x":N()}],"inset-y":[{"inset-y":N()}],start:[{start:N()}],end:[{end:N()}],top:[{top:N()}],right:[{right:N()}],bottom:[{bottom:N()}],left:[{left:N()}],visibility:["visible","invisible","collapse"],z:[{z:[Mn,"auto",te,ee]}],basis:[{basis:[wr,"full","auto",l,...T()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[ye,wr,"auto","initial","none",ee]}],grow:[{grow:["",ye,te,ee]}],shrink:[{shrink:["",ye,te,ee]}],order:[{order:[Mn,"first","last","none",te,ee]}],"grid-cols":[{"grid-cols":A()}],"col-start-end":[{col:L()}],"col-start":[{"col-start":O()}],"col-end":[{"col-end":O()}],"grid-rows":[{"grid-rows":A()}],"row-start-end":[{row:L()}],"row-start":[{"row-start":O()}],"row-end":[{"row-end":O()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":E()}],"auto-rows":[{"auto-rows":E()}],gap:[{gap:T()}],"gap-x":[{"gap-x":T()}],"gap-y":[{"gap-y":T()}],"justify-content":[{justify:[...j(),"normal"]}],"justify-items":[{"justify-items":[...M(),"normal"]}],"justify-self":[{"justify-self":["auto",...M()]}],"align-content":[{content:["normal",...j()]}],"align-items":[{items:[...M(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...M(),{baseline:["","last"]}]}],"place-content":[{"place-content":j()}],"place-items":[{"place-items":[...M(),"baseline"]}],"place-self":[{"place-self":["auto",...M()]}],p:[{p:T()}],px:[{px:T()}],py:[{py:T()}],ps:[{ps:T()}],pe:[{pe:T()}],pt:[{pt:T()}],pr:[{pr:T()}],pb:[{pb:T()}],pl:[{pl:T()}],m:[{m:I()}],mx:[{mx:I()}],my:[{my:I()}],ms:[{ms:I()}],me:[{me:I()}],mt:[{mt:I()}],mr:[{mr:I()}],mb:[{mb:I()}],ml:[{ml:I()}],"space-x":[{"space-x":T()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":T()}],"space-y-reverse":["space-y-reverse"],size:[{size:_()}],w:[{w:[l,"screen",..._()]}],"min-w":[{"min-w":[l,"screen","none",..._()]}],"max-w":[{"max-w":[l,"screen","none","prose",{screen:[i]},..._()]}],h:[{h:["screen","lh",..._()]}],"min-h":[{"min-h":["screen","lh","none",..._()]}],"max-h":[{"max-h":["screen","lh",..._()]}],"font-size":[{text:["base",n,qr,rr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,te,la]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",ia,ee]}],"font-family":[{font:[B0,ee,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[o,te,ee]}],"line-clamp":[{"line-clamp":[ye,"none",te,la]}],leading:[{leading:[s,...T()]}],"list-image":[{"list-image":["none",te,ee]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",te,ee]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:P()}],"text-color":[{text:P()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...J(),"wavy"]}],"text-decoration-thickness":[{decoration:[ye,"from-font","auto",te,rr]}],"text-decoration-color":[{decoration:P()}],"underline-offset":[{"underline-offset":[ye,"auto",te,ee]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:T()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",te,ee]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",te,ee]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:W()}],"bg-repeat":[{bg:K()}],"bg-size":[{bg:q()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Mn,te,ee],radial:["",te,ee],conic:[Mn,te,ee]},$0,U0]}],"bg-color":[{bg:P()}],"gradient-from-pos":[{from:G()}],"gradient-via-pos":[{via:G()}],"gradient-to-pos":[{to:G()}],"gradient-from":[{from:P()}],"gradient-via":[{via:P()}],"gradient-to":[{to:P()}],rounded:[{rounded:F()}],"rounded-s":[{"rounded-s":F()}],"rounded-e":[{"rounded-e":F()}],"rounded-t":[{"rounded-t":F()}],"rounded-r":[{"rounded-r":F()}],"rounded-b":[{"rounded-b":F()}],"rounded-l":[{"rounded-l":F()}],"rounded-ss":[{"rounded-ss":F()}],"rounded-se":[{"rounded-se":F()}],"rounded-ee":[{"rounded-ee":F()}],"rounded-es":[{"rounded-es":F()}],"rounded-tl":[{"rounded-tl":F()}],"rounded-tr":[{"rounded-tr":F()}],"rounded-br":[{"rounded-br":F()}],"rounded-bl":[{"rounded-bl":F()}],"border-w":[{border:X()}],"border-w-x":[{"border-x":X()}],"border-w-y":[{"border-y":X()}],"border-w-s":[{"border-s":X()}],"border-w-e":[{"border-e":X()}],"border-w-t":[{"border-t":X()}],"border-w-r":[{"border-r":X()}],"border-w-b":[{"border-b":X()}],"border-w-l":[{"border-l":X()}],"divide-x":[{"divide-x":X()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":X()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...J(),"hidden","none"]}],"divide-style":[{divide:[...J(),"hidden","none"]}],"border-color":[{border:P()}],"border-color-x":[{"border-x":P()}],"border-color-y":[{"border-y":P()}],"border-color-s":[{"border-s":P()}],"border-color-e":[{"border-e":P()}],"border-color-t":[{"border-t":P()}],"border-color-r":[{"border-r":P()}],"border-color-b":[{"border-b":P()}],"border-color-l":[{"border-l":P()}],"divide-color":[{divide:P()}],"outline-style":[{outline:[...J(),"none","hidden"]}],"outline-offset":[{"outline-offset":[ye,te,ee]}],"outline-w":[{outline:["",ye,qr,rr]}],"outline-color":[{outline:P()}],shadow:[{shadow:["","none",m,Do,Lo]}],"shadow-color":[{shadow:P()}],"inset-shadow":[{"inset-shadow":["none",f,Do,Lo]}],"inset-shadow-color":[{"inset-shadow":P()}],"ring-w":[{ring:X()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:P()}],"ring-offset-w":[{"ring-offset":[ye,rr]}],"ring-offset-color":[{"ring-offset":P()}],"inset-ring-w":[{"inset-ring":X()}],"inset-ring-color":[{"inset-ring":P()}],"text-shadow":[{"text-shadow":["none",h,Do,Lo]}],"text-shadow-color":[{"text-shadow":P()}],opacity:[{opacity:[ye,te,ee]}],"mix-blend":[{"mix-blend":[...fe(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":fe()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[ye]}],"mask-image-linear-from-pos":[{"mask-linear-from":Q()}],"mask-image-linear-to-pos":[{"mask-linear-to":Q()}],"mask-image-linear-from-color":[{"mask-linear-from":P()}],"mask-image-linear-to-color":[{"mask-linear-to":P()}],"mask-image-t-from-pos":[{"mask-t-from":Q()}],"mask-image-t-to-pos":[{"mask-t-to":Q()}],"mask-image-t-from-color":[{"mask-t-from":P()}],"mask-image-t-to-color":[{"mask-t-to":P()}],"mask-image-r-from-pos":[{"mask-r-from":Q()}],"mask-image-r-to-pos":[{"mask-r-to":Q()}],"mask-image-r-from-color":[{"mask-r-from":P()}],"mask-image-r-to-color":[{"mask-r-to":P()}],"mask-image-b-from-pos":[{"mask-b-from":Q()}],"mask-image-b-to-pos":[{"mask-b-to":Q()}],"mask-image-b-from-color":[{"mask-b-from":P()}],"mask-image-b-to-color":[{"mask-b-to":P()}],"mask-image-l-from-pos":[{"mask-l-from":Q()}],"mask-image-l-to-pos":[{"mask-l-to":Q()}],"mask-image-l-from-color":[{"mask-l-from":P()}],"mask-image-l-to-color":[{"mask-l-to":P()}],"mask-image-x-from-pos":[{"mask-x-from":Q()}],"mask-image-x-to-pos":[{"mask-x-to":Q()}],"mask-image-x-from-color":[{"mask-x-from":P()}],"mask-image-x-to-color":[{"mask-x-to":P()}],"mask-image-y-from-pos":[{"mask-y-from":Q()}],"mask-image-y-to-pos":[{"mask-y-to":Q()}],"mask-image-y-from-color":[{"mask-y-from":P()}],"mask-image-y-to-color":[{"mask-y-to":P()}],"mask-image-radial":[{"mask-radial":[te,ee]}],"mask-image-radial-from-pos":[{"mask-radial-from":Q()}],"mask-image-radial-to-pos":[{"mask-radial-to":Q()}],"mask-image-radial-from-color":[{"mask-radial-from":P()}],"mask-image-radial-to-color":[{"mask-radial-to":P()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":S()}],"mask-image-conic-pos":[{"mask-conic":[ye]}],"mask-image-conic-from-pos":[{"mask-conic-from":Q()}],"mask-image-conic-to-pos":[{"mask-conic-to":Q()}],"mask-image-conic-from-color":[{"mask-conic-from":P()}],"mask-image-conic-to-color":[{"mask-conic-to":P()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:W()}],"mask-repeat":[{mask:K()}],"mask-size":[{mask:q()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",te,ee]}],filter:[{filter:["","none",te,ee]}],blur:[{blur:U()}],brightness:[{brightness:[ye,te,ee]}],contrast:[{contrast:[ye,te,ee]}],"drop-shadow":[{"drop-shadow":["","none",y,Do,Lo]}],"drop-shadow-color":[{"drop-shadow":P()}],grayscale:[{grayscale:["",ye,te,ee]}],"hue-rotate":[{"hue-rotate":[ye,te,ee]}],invert:[{invert:["",ye,te,ee]}],saturate:[{saturate:[ye,te,ee]}],sepia:[{sepia:["",ye,te,ee]}],"backdrop-filter":[{"backdrop-filter":["","none",te,ee]}],"backdrop-blur":[{"backdrop-blur":U()}],"backdrop-brightness":[{"backdrop-brightness":[ye,te,ee]}],"backdrop-contrast":[{"backdrop-contrast":[ye,te,ee]}],"backdrop-grayscale":[{"backdrop-grayscale":["",ye,te,ee]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[ye,te,ee]}],"backdrop-invert":[{"backdrop-invert":["",ye,te,ee]}],"backdrop-opacity":[{"backdrop-opacity":[ye,te,ee]}],"backdrop-saturate":[{"backdrop-saturate":[ye,te,ee]}],"backdrop-sepia":[{"backdrop-sepia":["",ye,te,ee]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":T()}],"border-spacing-x":[{"border-spacing-x":T()}],"border-spacing-y":[{"border-spacing-y":T()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",te,ee]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[ye,"initial",te,ee]}],ease:[{ease:["linear","initial",p,te,ee]}],delay:[{delay:[ye,te,ee]}],animate:[{animate:["none",g,te,ee]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[v,te,ee]}],"perspective-origin":[{"perspective-origin":C()}],rotate:[{rotate:le()}],"rotate-x":[{"rotate-x":le()}],"rotate-y":[{"rotate-y":le()}],"rotate-z":[{"rotate-z":le()}],scale:[{scale:he()}],"scale-x":[{"scale-x":he()}],"scale-y":[{"scale-y":he()}],"scale-z":[{"scale-z":he()}],"scale-3d":["scale-3d"],skew:[{skew:Ce()}],"skew-x":[{"skew-x":Ce()}],"skew-y":[{"skew-y":Ce()}],transform:[{transform:[te,ee,"","none","gpu","cpu"]}],"transform-origin":[{origin:C()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Ee()}],"translate-x":[{"translate-x":Ee()}],"translate-y":[{"translate-y":Ee()}],"translate-z":[{"translate-z":Ee()}],"translate-none":["translate-none"],accent:[{accent:P()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:P()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",te,ee]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":T()}],"scroll-mx":[{"scroll-mx":T()}],"scroll-my":[{"scroll-my":T()}],"scroll-ms":[{"scroll-ms":T()}],"scroll-me":[{"scroll-me":T()}],"scroll-mt":[{"scroll-mt":T()}],"scroll-mr":[{"scroll-mr":T()}],"scroll-mb":[{"scroll-mb":T()}],"scroll-ml":[{"scroll-ml":T()}],"scroll-p":[{"scroll-p":T()}],"scroll-px":[{"scroll-px":T()}],"scroll-py":[{"scroll-py":T()}],"scroll-ps":[{"scroll-ps":T()}],"scroll-pe":[{"scroll-pe":T()}],"scroll-pt":[{"scroll-pt":T()}],"scroll-pr":[{"scroll-pr":T()}],"scroll-pb":[{"scroll-pb":T()}],"scroll-pl":[{"scroll-pl":T()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",te,ee]}],fill:[{fill:["none",...P()]}],"stroke-w":[{stroke:[ye,qr,rr,la]}],stroke:[{stroke:["none",...P()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},fd=T0(V0),Gl=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,ql=Ci,md=(e,t)=>n=>{var r;if(t?.variants==null)return ql(e,n?.class,n?.className);const{variants:o,defaultVariants:s}=t,i=Object.keys(o).map(d=>{const m=n?.[d],f=s?.[d];if(m===null)return null;const h=Gl(m)||Gl(f);return o[d][h]}),l=n&&Object.entries(n).reduce((d,m)=>{let[f,h]=m;return h===void 0||(d[f]=h),d},{}),u=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((d,m)=>{let{class:f,className:h,...y}=m;return Object.entries(y).every(b=>{let[v,w]=b;return Array.isArray(w)?w.includes({...s,...l}[v]):{...s,...l}[v]===w})?[...d,f,h]:d},[]);return ql(e,i,u,n?.class,n?.className)};function G0(...e){return fd(Ci(e))}const q0=md("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),oe=c.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...o},s)=>{const i=r?Zu:"button";return a.jsx(i,{className:G0(q0({variant:t,size:n}),e),ref:s,...o})});oe.displayName="Button";function nt(...e){return fd(Ci(e))}function et({className:e,...t}){return a.jsx("div",{"data-slot":"card",className:nt("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",e),...t})}function Ni({className:e,...t}){return a.jsx("div",{"data-slot":"card-header",className:nt("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...t})}function hd({className:e,...t}){return a.jsx("h4",{"data-slot":"card-title",className:nt("leading-none",e),...t})}function tt({className:e,...t}){return a.jsx("div",{"data-slot":"card-content",className:nt("px-6 [&:last-child]:pb-6",e),...t})}function Q1(e,t){const n=c.createContext(t),r=s=>{const{children:i,...l}=s,u=c.useMemo(()=>l,Object.values(l));return a.jsx(n.Provider,{value:u,children:i})};r.displayName=e+"Provider";function o(s){const i=c.useContext(n);if(i)return i;if(t!==void 0)return t;throw new Error(`\`${s}\` must be used within \`${e}\``)}return[r,o]}function go(e,t=[]){let n=[];function r(s,i){const l=c.createContext(i),u=n.length;n=[...n,i];const d=f=>{const{scope:h,children:y,...b}=f,v=h?.[e]?.[u]||l,w=c.useMemo(()=>b,Object.values(b));return a.jsx(v.Provider,{value:w,children:y})};d.displayName=s+"Provider";function m(f,h){const y=h?.[e]?.[u]||l,b=c.useContext(y);if(b)return b;if(i!==void 0)return i;throw new Error(`\`${f}\` must be used within \`${s}\``)}return[d,m]}const o=()=>{const s=n.map(i=>c.createContext(i));return function(l){const u=l?.[e]||s;return c.useMemo(()=>({[`__scope${e}`]:{...l,[e]:u}}),[l,u])}};return o.scopeName=e,[r,Y0(o,...t)]}function Y0(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(s){const i=r.reduce((l,{useScope:u,scopeName:d})=>{const f=u(s)[`__scope${d}`];return{...l,...f}},{});return c.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return n.scopeName=t.scopeName,n}function Fe(e,t,{checkForDefaultPrevented:n=!0}={}){return function(o){if(e?.(o),n===!1||!o.defaultPrevented)return t?.(o)}}var Vt=globalThis?.document?c.useLayoutEffect:()=>{},X0=oi[" useInsertionEffect ".trim().toString()]||Vt;function Ri({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[o,s,i]=K0({defaultProp:t,onChange:n}),l=e!==void 0,u=l?e:o;{const m=c.useRef(e!==void 0);c.useEffect(()=>{const f=m.current;if(f!==l){const h=f?"controlled":"uncontrolled",y=l?"controlled":"uncontrolled"}m.current=l},[l,r])}const d=c.useCallback(m=>{if(l){const f=J0(m)?m(e):m;f!==e&&i.current?.(f)}else s(m)},[l,e,s,i]);return[u,d]}function K0({defaultProp:e,onChange:t}){const[n,r]=c.useState(e),o=c.useRef(n),s=c.useRef(t);return X0(()=>{s.current=t},[t]),c.useEffect(()=>{o.current!==n&&(s.current?.(n),o.current=n)},[n,o]),[n,r,s]}function J0(e){return typeof e=="function"}function Z0(e){const t=c.useRef({value:e,previous:e});return c.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}function pd(e){const[t,n]=c.useState(void 0);return Vt(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const s=o[0];let i,l;if("borderBoxSize"in s){const u=s.borderBoxSize,d=Array.isArray(u)?u[0]:u;i=d.inlineSize,l=d.blockSize}else i=e.offsetWidth,l=e.offsetHeight;n({width:i,height:l})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}function Q0(e,t){return c.useReducer((n,r)=>t[n][r]??n,e)}var yn=e=>{const{present:t,children:n}=e,r=ex(t),o=typeof n=="function"?n({present:r.isPresent}):c.Children.only(n),s=ot(r.ref,tx(o));return typeof n=="function"||r.isPresent?c.cloneElement(o,{ref:s}):null};yn.displayName="Presence";function ex(e){const[t,n]=c.useState(),r=c.useRef(null),o=c.useRef(e),s=c.useRef("none"),i=e?"mounted":"unmounted",[l,u]=Q0(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return c.useEffect(()=>{const d=Mo(r.current);s.current=l==="mounted"?d:"none"},[l]),Vt(()=>{const d=r.current,m=o.current;if(m!==e){const h=s.current,y=Mo(d);e?u("MOUNT"):y==="none"||d?.display==="none"?u("UNMOUNT"):u(m&&h!==y?"ANIMATION_OUT":"UNMOUNT"),o.current=e}},[e,u]),Vt(()=>{if(t){let d;const m=t.ownerDocument.defaultView??window,f=y=>{const v=Mo(r.current).includes(CSS.escape(y.animationName));if(y.target===t&&v&&(u("ANIMATION_END"),!o.current)){const w=t.style.animationFillMode;t.style.animationFillMode="forwards",d=m.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=w)})}},h=y=>{y.target===t&&(s.current=Mo(r.current))};return t.addEventListener("animationstart",h),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{m.clearTimeout(d),t.removeEventListener("animationstart",h),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else u("ANIMATION_END")},[t,u]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:c.useCallback(d=>{r.current=d?getComputedStyle(d):null,n(d)},[])}}function Mo(e){return e?.animationName||"none"}function tx(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function nx(e){const t=rx(e),n=c.forwardRef((r,o)=>{const{children:s,...i}=r,l=c.Children.toArray(s),u=l.find(sx);if(u){const d=u.props.children,m=l.map(f=>f===u?c.Children.count(d)>1?c.Children.only(null):c.isValidElement(d)?d.props.children:null:f);return a.jsx(t,{...i,ref:o,children:c.isValidElement(d)?c.cloneElement(d,void 0,m):null})}return a.jsx(t,{...i,ref:o,children:s})});return n.displayName=`${e}.Slot`,n}function rx(e){const t=c.forwardRef((n,r)=>{const{children:o,...s}=n;if(c.isValidElement(o)){const i=ix(o),l=ax(s,o.props);return o.type!==c.Fragment&&(l.ref=r?Ts(r,i):i),c.cloneElement(o,l)}return c.Children.count(o)>1?c.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var ox=Symbol("radix.slottable");function sx(e){return c.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===ox}function ax(e,t){const n={...t};for(const r in t){const o=e[r],s=t[r];/^on[A-Z]/.test(r)?o&&s?n[r]=(...l)=>{const u=s(...l);return o(...l),u}:o&&(n[r]=o):r==="style"?n[r]={...o,...s}:r==="className"&&(n[r]=[o,s].filter(Boolean).join(" "))}return{...e,...n}}function ix(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var lx=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],rt=lx.reduce((e,t)=>{const n=nx(`Primitive.${t}`),r=c.forwardRef((o,s)=>{const{asChild:i,...l}=o,u=i?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),a.jsx(u,{...l,ref:s})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function cx(e,t){e&&Cs.flushSync(()=>e.dispatchEvent(t))}var Ns="Checkbox",[ux]=go(Ns),[dx,Ai]=ux(Ns);function fx(e){const{__scopeCheckbox:t,checked:n,children:r,defaultChecked:o,disabled:s,form:i,name:l,onCheckedChange:u,required:d,value:m="on",internal_do_not_use_render:f}=e,[h,y]=Ri({prop:n,defaultProp:o??!1,onChange:u,caller:Ns}),[b,v]=c.useState(null),[w,p]=c.useState(null),g=c.useRef(!1),x=b?!!i||!!b.closest("form"):!0,S={checked:h,disabled:s,setChecked:y,control:b,setControl:v,name:l,form:i,value:m,hasConsumerStoppedPropagationRef:g,required:d,defaultChecked:Bn(o)?!1:o,isFormControl:x,bubbleInput:w,setBubbleInput:p};return a.jsx(dx,{scope:t,...S,children:mx(f)?f(S):r})}var gd="CheckboxTrigger",yd=c.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:n,...r},o)=>{const{control:s,value:i,disabled:l,checked:u,required:d,setControl:m,setChecked:f,hasConsumerStoppedPropagationRef:h,isFormControl:y,bubbleInput:b}=Ai(gd,e),v=ot(o,m),w=c.useRef(u);return c.useEffect(()=>{const p=s?.form;if(p){const g=()=>f(w.current);return p.addEventListener("reset",g),()=>p.removeEventListener("reset",g)}},[s,f]),a.jsx(rt.button,{type:"button",role:"checkbox","aria-checked":Bn(u)?"mixed":u,"aria-required":d,"data-state":Sd(u),"data-disabled":l?"":void 0,disabled:l,value:i,...r,ref:v,onKeyDown:Fe(t,p=>{p.key==="Enter"&&p.preventDefault()}),onClick:Fe(n,p=>{f(g=>Bn(g)?!0:!g),b&&y&&(h.current=p.isPropagationStopped(),h.current||p.stopPropagation())})})});yd.displayName=gd;var xd=c.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:o,defaultChecked:s,required:i,disabled:l,value:u,onCheckedChange:d,form:m,...f}=e;return a.jsx(fx,{__scopeCheckbox:n,checked:o,defaultChecked:s,disabled:l,required:i,onCheckedChange:d,name:r,form:m,value:u,internal_do_not_use_render:({isFormControl:h})=>a.jsxs(a.Fragment,{children:[a.jsx(yd,{...f,ref:t,__scopeCheckbox:n}),h&&a.jsx(kd,{__scopeCheckbox:n})]})})});xd.displayName=Ns;var vd="CheckboxIndicator",bd=c.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...o}=e,s=Ai(vd,n);return a.jsx(yn,{present:r||Bn(s.checked)||s.checked===!0,children:a.jsx(rt.span,{"data-state":Sd(s.checked),"data-disabled":s.disabled?"":void 0,...o,ref:t,style:{pointerEvents:"none",...e.style}})})});bd.displayName=vd;var wd="CheckboxBubbleInput",kd=c.forwardRef(({__scopeCheckbox:e,...t},n)=>{const{control:r,hasConsumerStoppedPropagationRef:o,checked:s,defaultChecked:i,required:l,disabled:u,name:d,value:m,form:f,bubbleInput:h,setBubbleInput:y}=Ai(wd,e),b=ot(n,y),v=Z0(s),w=pd(r);c.useEffect(()=>{const g=h;if(!g)return;const x=window.HTMLInputElement.prototype,C=Object.getOwnPropertyDescriptor(x,"checked").set,R=!o.current;if(v!==s&&C){const k=new Event("click",{bubbles:R});g.indeterminate=Bn(s),C.call(g,Bn(s)?!1:s),g.dispatchEvent(k)}},[h,v,s,o]);const p=c.useRef(Bn(s)?!1:s);return a.jsx(rt.input,{type:"checkbox","aria-hidden":!0,defaultChecked:i??p.current,required:l,disabled:u,name:d,value:m,form:f,...t,tabIndex:-1,ref:b,style:{...t.style,...w,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});kd.displayName=wd;function mx(e){return typeof e=="function"}function Bn(e){return e==="indeterminate"}function Sd(e){return Bn(e)?"indeterminate":e?"checked":"unchecked"}function Cd({className:e,...t}){return a.jsx(xd,{"data-slot":"checkbox",className:nt("peer border bg-input-background dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:a.jsx(bd,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:a.jsx(xi,{className:"size-3.5"})})})}var hx=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],px=hx.reduce((e,t)=>{const n=Si(`Primitive.${t}`),r=c.forwardRef((o,s)=>{const{asChild:i,...l}=o,u=i?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),a.jsx(u,{...l,ref:s})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),gx="Label",Td=c.forwardRef((e,t)=>a.jsx(px.label,{...e,ref:t,onMouseDown:n=>{n.target.closest("button, input, select, textarea")||(e.onMouseDown?.(n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));Td.displayName=gx;var yx=Td;function ar({className:e,...t}){return a.jsx(yx,{"data-slot":"label",className:nt("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}const ca=()=>{Ne(()=>import("./WelcomeScreen-CXUExfNa.js"),__vite__mapDeps([0,1,2,3,4,5,6]),import.meta.url),Ne(()=>Promise.resolve().then(()=>zx),void 0,import.meta.url),Ne(()=>import("./CommunityGuidelinesScreen-DTRDLm7S.js"),__vite__mapDeps([7,1,2,3,4,5]),import.meta.url),Ne(()=>Promise.resolve().then(()=>Ux),void 0,import.meta.url)};let Yl=!1;const Xl=()=>{Yl||(Yl=!0,hu())};let Kl=!1;const Jl=()=>{Kl||(Kl=!0,Ot(ke(se,"_warmup","ping")).catch(()=>{}))},Zl=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],Nd=D.memo(({item:e})=>{const t=e.opacity<.2?"fadeInOut1":e.opacity<.25?"fadeInOut2":"fadeInOut3",n={"--symbol-x":`${e.x}%`,"--symbol-y":`${e.y}%`,"--symbol-size":`${e.size}px`,"--symbol-animation":`${t} ${e.duration}s ease-in-out ${e.delay}s infinite both`};return a.jsx("div",{className:"floating-symbol text-slate-600 dark:text-slate-400",style:n,children:e.symbol})});Nd.displayName="FloatingSymbolItem";function xx({onShowTerms:e,onShowPrivacy:t,onShowEmailLogin:n,isDarkMode:r,onToggleDarkMode:o,onLoginStart:s,onLoginEnd:i}){c.useEffect(()=>{ag();const v=setTimeout(Xl,500),w=setTimeout(Jl,700),p=setTimeout(ca,1e3);return()=>{clearTimeout(v),clearTimeout(w),clearTimeout(p)}},[]);const l=c.useRef(!1),u=c.useMemo(()=>Array.from({length:30},(v,w)=>({id:w,symbol:Zl[Math.floor(Math.random()*Zl.length)],x:Math.random()*100,y:Math.random()*100,size:16+Math.random()*24,duration:5+Math.random()*5,delay:Math.random()*8,opacity:.15+Math.random()*.2})),[]),[d,m]=c.useState(()=>{try{return localStorage.getItem("tosAccepted")==="true"}catch{return!1}}),[f,h]=c.useState(!1),y=c.useCallback(async()=>{if(!d)return H.error(" .");if(f)return;h(!0);const v=Date.now();ig("google"),s?.();try{const w=await ri.signInWithGoogle({useCredentialManager:!1}),p=w.credential?.idToken??"",g=w.credential?.accessToken??"";if(!p&&!g){ug("google");return}ca();const x=xu.credential(p||void 0,g||void 0);await vu(ne,x);const S=Date.now()-v;lg("google",S)}catch(w){const p=Date.now()-v,g=w?.code||w?.message||"unknown_error";cg("google",g,p),H.error(" .  .")}finally{h(!1),i?.()}},[d,f,s,i]),b=c.useCallback(v=>{const w=!!v;m(w),w&&!l.current&&(l.current=!0,mg(),Xl(),Jl(),ca());try{typeof window<"u"&&window.localStorage&&(w?(window.localStorage.setItem("tosAccepted","true"),window.localStorage.setItem("privacyAccepted","true")):(window.localStorage.removeItem("tosAccepted"),window.localStorage.removeItem("privacyAccepted")))}catch{}},[]);return a.jsxs("div",{className:"relative w-full h-full flex flex-col items-center justify-center p-6 pt-safe pb-safe overflow-hidden bg-background text-foreground transition-colors duration-300",children:[o&&a.jsx("div",{className:"absolute top-4 right-4 z-50",children:a.jsx(oe,{variant:"ghost",size:"icon",onClick:o,className:"rounded-full hover:bg-accent transition-colors",children:r?a.jsx(ki,{className:"w-5 h-5 text-yellow-500"}):a.jsx(wi,{className:"w-5 h-5 text-slate-700 dark:text-slate-300"})})}),a.jsx("div",{className:"absolute inset-0 z-0 overflow-hidden pointer-events-none select-none opacity-60","aria-hidden":"true",children:u.map(v=>a.jsx(Nd,{item:v},v.id))}),a.jsx("div",{className:"absolute inset-0 opacity-30 pointer-events-none","aria-hidden":"true",children:a.jsxs("svg",{className:"w-full h-full",xmlns:"http://www.w3.org/2000/svg",children:[a.jsxs("defs",{children:[a.jsxs("pattern",{id:"loginComplexGrid",x:"0",y:"0",width:"40",height:"40",patternUnits:"userSpaceOnUse",children:[a.jsx("path",{d:"M 40 0 L 0 0 0 40",fill:"none",stroke:"currentColor",strokeWidth:"1",className:"text-muted-foreground/20"}),a.jsx("circle",{cx:"20",cy:"20",r:"2",fill:"currentColor",className:"text-muted-foreground/20"})]}),a.jsx("pattern",{id:"loginDiagonalLines",x:"0",y:"0",width:"60",height:"60",patternUnits:"userSpaceOnUse",children:a.jsx("path",{d:"M 0 60 L 60 0",stroke:"currentColor",strokeWidth:"1",className:"text-muted-foreground/10"})})]}),a.jsx("rect",{width:"100%",height:"100%",fill:"url(#loginComplexGrid)"}),a.jsx("rect",{width:"100%",height:"100%",fill:"url(#loginDiagonalLines)"})]})}),a.jsx("div",{className:"relative z-10 w-full max-w-sm animate-in fade-in zoom-in duration-500",children:a.jsx(et,{className:"w-full border-border/60 shadow-2xl bg-background/95 backdrop-blur-sm",children:a.jsxs(tt,{className:"pt-6 pb-7 px-4 sm:px-6 space-y-8",children:[a.jsx("div",{className:"flex flex-col items-center space-y-3 mt-6",children:a.jsxs("div",{className:"text-center space-y-1",children:[a.jsx("h1",{className:"text-2xl font-bold tracking-tight bg-gradient-to-r from-gray-900 to-gray-600 bg-clip-text text-transparent dark:from-white dark:to-gray-400",children:""}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"    "})]})}),a.jsx("div",{className:"space-y-3",children:a.jsxs("div",{className:"flex items-start space-x-3 p-3 rounded-lg bg-muted/30 border border-border/40 hover:bg-muted/50 transition-colors cursor-pointer group",onClick:()=>b(!d),children:[a.jsx(Cd,{id:"terms",checked:d,onCheckedChange:v=>b(v),className:"mt-0.5 data-[state=checked]:bg-primary data-[state=checked]:border-primary"}),a.jsxs("div",{className:"grid gap-1.5 leading-none",children:[a.jsx(ar,{htmlFor:"terms",className:"text-sm font-medium leading-snug cursor-pointer select-none group-hover:text-foreground/80",children:"   ()"}),a.jsxs("p",{className:"text-xs text-muted-foreground whitespace-nowrap -ml-1 sm:ml-0",children:[a.jsx("button",{type:"button",className:"underline decoration-muted-foreground/50 hover:text-primary hover:decoration-primary underline-offset-2 transition-all mr-0.5 sm:mr-1",onClick:v=>{v.stopPropagation(),e()},children:""}),"",a.jsx("button",{type:"button",className:"underline decoration-muted-foreground/50 hover:text-primary hover:decoration-primary underline-offset-2 transition-all mx-0.5 sm:mx-1",onClick:v=>{v.stopPropagation(),t()},children:""}),"  ."]})]})]})}),a.jsx(oe,{className:"w-full h-12 text-base font-medium transition-all hover:scale-[1.02] active:scale-[0.98]",variant:d?"default":"secondary",disabled:!d||f,onClick:y,children:f?a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsx(vi,{className:"w-5 h-5 animate-spin"}),a.jsx("span",{children:"  ..."})]}):a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24","aria-hidden":"true",children:[a.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),a.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),a.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.84z"}),a.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),a.jsx("span",{children:"Google  "})]})}),n&&a.jsx(oe,{variant:"outline",className:"w-full",disabled:!d||f,onClick:n,children:" "}),a.jsx("p",{className:"text-xs text-muted-foreground/60 text-center",children:" 2024 BiyuNote. All rights reserved."})]})})})]})}function vx(e){return typeof e=="string"?e:""}function Rd(e){return e==="auth/invalid-credential"||e==="INVALID_LOGIN_CREDENTIALS"||e==="auth/wrong-password"||e==="auth/user-not-found"}function Jr(e,t="login"){const r=vx(e?.code);if(r==="auth/invalid-email")return"   .";if(r==="auth/missing-password")return"  .";if(r==="auth/user-disabled")return"   .";if(r==="auth/too-many-requests")return"  .     .";if(r==="auth/network-request-failed")return"   .";if(r==="auth/operation-not-allowed")return"/   .   .";if(t==="signup"){if(r==="auth/email-already-in-use")return"  .  .";if(r==="auth/weak-password")return"  . (6  )"}if(t==="link"){if(r==="auth/weak-password")return"  . (6  )";if(r==="auth/requires-recent-login")return"      .";if(r==="auth/provider-already-linked")return"   .";if(r==="auth/credential-already-in-use"||r==="auth/email-already-in-use")return"     ."}return t==="passwordReset"?"  .     .":Rd(r)?"    .":" .     ."}async function bx(e,t){const n=t.trim();if(!n)return null;try{const r=await Ih(e,n);return Array.isArray(r)?r:[]}catch{return null}}function wx(e){return!e||e.length===0?!1:e.includes("google.com")&&!e.includes("password")}const ir=c.forwardRef(({className:e,type:t,...n},r)=>a.jsx("input",{type:t,ref:r,"data-slot":"input",className:nt("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...n}));ir.displayName="Input";function kx({onShowSignup:e}){const[t,n]=c.useState(""),[r,o]=c.useState(""),[s,i]=c.useState(!1),l=c.useMemo(()=>t.trim().length>0&&r.length>0&&!s,[t,r,s]),u=c.useCallback(async()=>{if(!s){i(!0);try{const h=await ri.signInWithGoogle({useCredentialManager:!1}),y=h.credential?.idToken??"",b=h.credential?.accessToken??"";if(!y&&!b){H.error(" .  .");return}const v=xu.credential(y||void 0,b||void 0),w=await vu(ne,v);await ja(w.user)}catch{H.error(" .  .")}finally{i(!1)}}},[s]),d=c.useCallback(async()=>{const h=t.trim();if(!h){H.error("  .");return}if(!r){H.error("  .");return}i(!0);try{const y=await _h(ne,h,r);if(await ja(y.user),await y.user.reload(),!y.user.emailVerified){H.info("  .   .",{action:{label:"  ",onClick:()=>void f(y.user)}});return}}catch(y){const b=String(y?.code??"");if(H.error(Jr(y,"login")),Rd(b)){const v=await bx(ne,h);wx(v)&&H.info("  Google  . Google  .")}}finally{i(!1)}},[t,r]),m=c.useCallback(async()=>{const h=t.trim();if(!h){H.error("  .");return}i(!0);try{await Ph(ne,h),H.success("   .")}catch(y){H.error(Jr(y,"passwordReset"))}finally{i(!1)}},[t]),f=c.useCallback(async h=>{if(!s){i(!0);try{await ii(h),H.success("  .   .")}catch(y){H.error(Jr(y,"login"))}finally{i(!1)}}},[s]);return a.jsx("div",{className:"relative w-full h-full flex flex-col items-center justify-center p-6 pt-safe pb-safe overflow-hidden bg-background text-foreground transition-colors duration-300",children:a.jsx("div",{className:"relative z-10 w-full max-w-sm animate-in fade-in zoom-in duration-500",children:a.jsx(et,{className:"w-full border-border/60 shadow-xl bg-background/95",children:a.jsxs(tt,{className:"pt-6 pb-7 px-4 sm:px-6 space-y-6",children:[a.jsx("div",{className:"space-y-1",children:a.jsx("h1",{className:"text-xl font-semibold",children:" "})}),a.jsxs("form",{className:"space-y-6",onSubmit:h=>{h.preventDefault(),d()},children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(ar,{htmlFor:"email",children:""}),a.jsx(ir,{id:"email",type:"email",autoComplete:"email",value:t,onChange:h=>n(h.target.value),disabled:s})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ar,{htmlFor:"password",children:""}),a.jsx(ir,{id:"password",type:"password",autoComplete:"current-password",value:r,onChange:h=>o(h.target.value),disabled:s})]}),a.jsx(oe,{className:"w-full",type:"submit",disabled:!l,children:s?a.jsxs("span",{className:"inline-flex items-center gap-2",children:[a.jsx(vi,{className:"w-4 h-4 animate-spin"})," ..."]}):""})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsx(oe,{variant:"outline",onClick:m,disabled:s,children:" "}),a.jsx(oe,{variant:"outline",onClick:u,disabled:s,children:"Google "})]}),a.jsx(oe,{variant:"outline",className:"w-full",onClick:e,disabled:s,children:" "})]})})})})}function Sx({onBack:e}){const[t,n]=c.useState(""),[r,o]=c.useState(""),[s,i]=c.useState(""),[l,u]=c.useState(!1),d=c.useMemo(()=>!(l||!t.trim()||!r||r!==s),[t,r,s,l]),m=c.useCallback(async()=>{const f=t.trim();if(!f){H.error("  .");return}if(!r){H.error("  .");return}if(r!==s){H.error("   .");return}u(!0);try{const h=await Lh(ne,f,r);await ii(h.user),H.success(" .     .")}catch(h){H.error(Jr(h,"signup"))}finally{u(!1)}},[t,r,s]);return a.jsxs("div",{className:"w-full h-full bg-background text-foreground overflow-y-auto",children:[a.jsx("div",{className:"p-4",children:a.jsx(oe,{variant:"ghost",onClick:e,className:"px-0",children:" "})}),a.jsx("div",{className:"px-4 pb-8 flex justify-center",children:a.jsx(et,{className:"w-full max-w-sm border-border/60 shadow-xl bg-background/95",children:a.jsxs(tt,{className:"pt-6 pb-7 px-4 sm:px-6 space-y-6",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("h1",{className:"text-xl font-semibold",children:" "}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"   ."})]}),a.jsxs("form",{className:"space-y-6",onSubmit:f=>{f.preventDefault(),m()},children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(ar,{htmlFor:"email",children:""}),a.jsx(ir,{id:"email",type:"email",autoComplete:"email",value:t,onChange:f=>n(f.target.value),disabled:l})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ar,{htmlFor:"password",children:""}),a.jsx(ir,{id:"password",type:"password",autoComplete:"new-password",value:r,onChange:f=>o(f.target.value),disabled:l})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(ar,{htmlFor:"confirm",children:" "}),a.jsx(ir,{id:"confirm",type:"password",autoComplete:"new-password",value:s,onChange:f=>i(f.target.value),disabled:l})]}),a.jsx(oe,{className:"w-full",type:"submit",disabled:!d,children:l?a.jsxs("span",{className:"inline-flex items-center gap-2",children:[a.jsx(vi,{className:"w-4 h-4 animate-spin"})," ..."]}):""})]}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"    ."})]})})})]})}function Cx(e,t=[]){let n=[];function r(s,i){const l=c.createContext(i);l.displayName=s+"Context";const u=n.length;n=[...n,i];const d=f=>{const{scope:h,children:y,...b}=f,v=h?.[e]?.[u]||l,w=c.useMemo(()=>b,Object.values(b));return a.jsx(v.Provider,{value:w,children:y})};d.displayName=s+"Provider";function m(f,h){const y=h?.[e]?.[u]||l,b=c.useContext(y);if(b)return b;if(i!==void 0)return i;throw new Error(`\`${f}\` must be used within \`${s}\``)}return[d,m]}const o=()=>{const s=n.map(i=>c.createContext(i));return function(l){const u=l?.[e]||s;return c.useMemo(()=>({[`__scope${e}`]:{...l,[e]:u}}),[l,u])}};return o.scopeName=e,[r,Tx(o,...t)]}function Tx(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(s){const i=r.reduce((l,{useScope:u,scopeName:d})=>{const f=u(s)[`__scope${d}`];return{...l,...f}},{});return c.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return n.scopeName=t.scopeName,n}function St(e){const t=c.useRef(e);return c.useEffect(()=>{t.current=e}),c.useMemo(()=>(...n)=>t.current?.(...n),[])}var Nx=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ei=Nx.reduce((e,t)=>{const n=Si(`Primitive.${t}`),r=c.forwardRef((o,s)=>{const{asChild:i,...l}=o,u=i?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),a.jsx(u,{...l,ref:s})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),ua={exports:{}},da={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ql;function Rx(){if(Ql)return da;Ql=1;var e=zh();function t(f,h){return f===h&&(f!==0||1/f===1/h)||f!==f&&h!==h}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,o=e.useEffect,s=e.useLayoutEffect,i=e.useDebugValue;function l(f,h){var y=h(),b=r({inst:{value:y,getSnapshot:h}}),v=b[0].inst,w=b[1];return s(function(){v.value=y,v.getSnapshot=h,u(v)&&w({inst:v})},[f,y,h]),o(function(){return u(v)&&w({inst:v}),f(function(){u(v)&&w({inst:v})})},[f]),i(y),y}function u(f){var h=f.getSnapshot;f=f.value;try{var y=h();return!n(f,y)}catch{return!0}}function d(f,h){return h()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:l;return da.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:m,da}var ec;function Ax(){return ec||(ec=1,ua.exports=Rx()),ua.exports}var Ex=Ax();function jx(){return Ex.useSyncExternalStore(Ix,()=>!0,()=>!1)}function Ix(){return()=>{}}var ji="Avatar",[_x]=Cx(ji),[Px,Ad]=_x(ji),Ed=c.forwardRef((e,t)=>{const{__scopeAvatar:n,...r}=e,[o,s]=c.useState("idle");return a.jsx(Px,{scope:n,imageLoadingStatus:o,onImageLoadingStatusChange:s,children:a.jsx(Ei.span,{...r,ref:t})})});Ed.displayName=ji;var jd="AvatarImage",Id=c.forwardRef((e,t)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:o=()=>{},...s}=e,i=Ad(jd,n),l=Lx(r,s),u=St(d=>{o(d),i.onImageLoadingStatusChange(d)});return Vt(()=>{l!=="idle"&&u(l)},[l,u]),l==="loaded"?a.jsx(Ei.img,{...s,ref:t,src:r}):null});Id.displayName=jd;var _d="AvatarFallback",Pd=c.forwardRef((e,t)=>{const{__scopeAvatar:n,delayMs:r,...o}=e,s=Ad(_d,n),[i,l]=c.useState(r===void 0);return c.useEffect(()=>{if(r!==void 0){const u=window.setTimeout(()=>l(!0),r);return()=>window.clearTimeout(u)}},[r]),i&&s.imageLoadingStatus!=="loaded"?a.jsx(Ei.span,{...o,ref:t}):null});Pd.displayName=_d;function tc(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function Lx(e,{referrerPolicy:t,crossOrigin:n}){const r=jx(),o=c.useRef(null),s=r?(o.current||(o.current=new window.Image),o.current):null,[i,l]=c.useState(()=>tc(s,e));return Vt(()=>{l(tc(s,e))},[s,e]),Vt(()=>{const u=f=>()=>{l(f)};if(!s)return;const d=u("loaded"),m=u("error");return s.addEventListener("load",d),s.addEventListener("error",m),t&&(s.referrerPolicy=t),typeof n=="string"&&(s.crossOrigin=n),()=>{s.removeEventListener("load",d),s.removeEventListener("error",m)}},[s,n,t]),i}var Ld=Ed,Dd=Id,Md=Pd;const Ii=c.forwardRef(({className:e,...t},n)=>a.jsx(Ld,{ref:n,"data-slot":"avatar",className:nt("relative flex size-10 shrink-0 overflow-hidden rounded-full",e),...t}));Ii.displayName=Ld.displayName;const _i=c.forwardRef(({className:e,...t},n)=>a.jsx(Dd,{ref:n,"data-slot":"avatar-image",className:nt("aspect-square size-full",e),...t}));_i.displayName=Dd.displayName;const Pi=c.forwardRef(({className:e,...t},n)=>a.jsx(Md,{ref:n,"data-slot":"avatar-fallback",className:nt("bg-muted flex size-full items-center justify-center rounded-full",e),...t}));Pi.displayName=Md.displayName;function Dx({nickname:e,onCancel:t,onConfirm:n,isDarkMode:r=!1}){const[o,s]=c.useState(!1);return c.useEffect(()=>(s(!0),document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}),[]),o?Cs.createPortal(a.jsx("div",{className:r?"dark":"",children:a.jsx("div",{className:"fixed inset-0 z-[9999] bg-black/60 backdrop-blur-sm flex items-center justify-center px-4 text-foreground",children:a.jsxs("div",{className:"w-[360px] max-w-full rounded-2xl border border-border/60 bg-card shadow-2xl shadow-black/20 p-6 space-y-5",children:[a.jsxs("div",{className:"flex flex-col items-center text-center space-y-3",children:[a.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center shrink-0 mb-1",children:a.jsx(La,{className:"w-6 h-6 text-primary"})}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("p",{className:"text-lg font-semibold text-foreground",children:[a.jsxs("span",{className:"text-primary",children:['"',e,'"']}),"() ?"]}),a.jsxs("p",{className:"text-sm text-muted-foreground leading-relaxed break-keep",children:["      .",a.jsx("br",{}),"  ."]})]})]}),a.jsxs("div",{className:"flex items-center justify-end gap-3 pt-2",children:[a.jsx("button",{onClick:t,className:"flex-1 h-11 rounded-xl border border-input bg-background hover:bg-accent hover:text-accent-foreground text-foreground font-medium transition-colors text-sm",children:""}),a.jsx("button",{onClick:n,className:"flex-1 h-11 rounded-xl bg-primary text-primary-foreground hover:bg-primary/90 font-medium shadow-lg shadow-primary/20 transition-colors text-sm",children:""})]})]})})}),document.body):null}const Od=D.memo(({item:e})=>{const t=e.opacity<.2?"fadeInOut1":e.opacity<.25?"fadeInOut2":"fadeInOut3",n=c.useCallback(r=>{r&&(r.style.setProperty("--symbol-x",`${e.x}%`),r.style.setProperty("--symbol-y",`${e.y}%`),r.style.setProperty("--symbol-size",`${e.size}px`),r.style.setProperty("--symbol-animation",`${t} ${e.duration}s ease-in-out ${e.delay}s infinite both`))},[e.x,e.y,e.size,t,e.duration,e.delay]);return a.jsx("div",{className:"floating-symbol text-slate-600 dark:text-slate-400",ref:n,children:e.symbol})});Od.displayName="FloatingSymbolItem";const Mx=["","","","","","",""," ","","","","","","","","","","","1","","","1",""];function nc(e){return(e||"").toLowerCase().replace(/[0-9\s~!@#$%^&*()\-_=+\[\]{};:'",.<>/?\\|`]/g,"")}function cs(e){const t=nc(e);return t?Mx.some(n=>{const r=nc(n);return r?t.includes(r):!1}):!1}const Ox=()=>{Ne(()=>import("./CommunityGuidelinesScreen-DTRDLm7S.js"),__vite__mapDeps([7,1,2,3,4,5]),import.meta.url)},rc=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""];function zd({onBack:e,onComplete:t,userEmail:n,isDarkMode:r,onToggleDarkMode:o}){const[s,i]=c.useState(""),[l,u]=c.useState("user"),[d,m]=c.useState(""),[f,h]=c.useState(!1),[y,b]=c.useState(!1),v=c.useMemo(()=>Array.from({length:30},(C,R)=>({id:R,symbol:rc[Math.floor(Math.random()*rc.length)],x:Math.random()*100,y:Math.random()*100,size:16+Math.random()*24,duration:5+Math.random()*5,delay:Math.random()*8,opacity:10+Math.random()*15})),[]);c.useEffect(()=>{const C=setTimeout(Ox,500);return()=>clearTimeout(C)},[]),c.useEffect(()=>{const C=s.trim(),R=window.setTimeout(()=>{u(C||"user")},250);return()=>window.clearTimeout(R)},[s]);const w=c.useCallback(C=>{i(C.target.value),m("")},[]),p=c.useCallback(()=>{const C=s.trim();if(!f){if(C.length<2||C.length>12){m(" 2~12 .");return}if(!/^[-a-zA-Z0-9]+$/.test(C)){m(", ,    .");return}b(!0)}},[s,f]),g=c.useCallback(()=>{b(!1)},[]),x=c.useCallback(async()=>{b(!1),h(!0);const C=ne.currentUser;if(!C){e();return}try{const R=s.trim(),k=R.toLowerCase();if(await ja(C),!/^[-a-zA-Z0-9]{2,12}$/.test(R)){m(" 2~12 , ,    .");return}if(cs(R)){m("      .");return}const T=Ye(se,"users"),N=zt(T,Ht("nicknameLower","==",k),po(1)),A=await mt(N);if(!A.empty&&A.docs[0].id!==C.uid){m("   .");return}await hn(ke(se,"users",C.uid),{nickname:R,nicknameLower:k,email:C.email??n??void 0,updatedAt:Pt()},{merge:!0}),t(R)}catch(R){const k=String(R?.code??"");k.includes("permission-denied")?m("  .    ."):k.includes("unauthenticated")?m(" .  ."):m(" .    .")}finally{h(!1)}},[s,e,t]),S=c.useCallback(()=>{const C=["","","","","","",""],R=`${C[Math.floor(Math.random()*C.length)]}${Math.floor(Math.random()*9e3)+1e3}`;i(R),m("")},[]);return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"relative w-full h-full flex flex-col items-center justify-center p-6 bg-background text-foreground transition-colors duration-300",children:[o&&a.jsx("div",{className:"absolute top-4 right-4 z-50",children:a.jsx(oe,{variant:"ghost",size:"icon",onClick:o,className:"rounded-full hover:bg-accent transition-colors",children:r?a.jsx(ki,{className:"w-5 h-5 text-yellow-500"}):a.jsx(wi,{className:"w-5 h-5 text-slate-700 dark:text-slate-300"})})}),a.jsx("div",{className:"absolute inset-0 z-0 overflow-hidden pointer-events-none select-none",children:v.map(C=>a.jsx(Od,{item:C},C.id))}),a.jsx("div",{className:"relative z-10 w-full max-w-sm animate-in fade-in zoom-in duration-500",children:a.jsxs(et,{className:"w-full border-border/60 shadow-2xl",children:[a.jsx(Ni,{className:"pb-4",children:a.jsxs("div",{className:"w-full relative",children:[a.jsx(oe,{variant:"ghost",size:"icon",className:"absolute left-0 top-0 rounded-full text-muted-foreground hover:text-foreground hover:bg-accent -ml-2",onClick:e,children:a.jsx(gi,{className:"w-6 h-6"})}),a.jsxs("div",{className:"flex flex-col items-center text-center space-y-4 pt-2",children:[a.jsxs(Ii,{className:"w-24 h-24 border-4 border-background shadow-xl relative ring-2 ring-primary/20",children:[a.jsx(_i,{src:`https://api.dicebear.com/7.x/notionists/svg?seed=${l}&backgroundColor=transparent`}),a.jsx(Pi,{className:"text-3xl bg-gradient-to-br from-primary via-primary/80 to-primary/60 text-primary-foreground font-bold",children:s?s.charAt(0).toUpperCase():"?"})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("h1",{className:"text-2xl font-bold tracking-tight bg-gradient-to-r from-gray-900 to-gray-600 bg-clip-text text-transparent dark:from-white dark:to-gray-400",children:" "}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:["   ",n&&a.jsxs("span",{className:"block mt-1 text-xs opacity-70 font-mono",children:["(",n,")"]})]})]})]})]})}),a.jsxs(tt,{className:"pt-2 pb-6 px-6 space-y-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(ar,{htmlFor:"nickname",className:"text-sm font-medium leading-snug",children:""}),a.jsxs("div",{className:"relative",children:[a.jsx(ir,{id:"nickname",value:s,onChange:w,placeholder:" ",className:`${d?"border-destructive focus-visible:ring-destructive":""}`,maxLength:12,onKeyDown:C=>{C.key==="Enter"&&(C.preventDefault(),setTimeout(()=>p(),10))}}),!d&&s.length>=2&&a.jsx(xi,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-green-500"})]}),a.jsx("div",{className:"h-4 text-xs",children:d?a.jsxs("span",{className:"text-destructive flex items-center gap-1",children:[a.jsx(oy,{className:"w-3 h-3"})," ",d]}):a.jsx("span",{className:"text-muted-foreground",children:"2~12 , , "})})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(oe,{onClick:p,className:"w-full h-12 text-base font-medium transition-all hover:scale-[1.02] active:scale-[0.98]",children:f?" ...":""}),a.jsx(oe,{variant:"ghost",className:"w-full text-muted-foreground hover:text-foreground hover:bg-accent",onClick:S,children:"  "})]})]})]})})]}),y&&a.jsx(Dx,{nickname:s,onCancel:g,onConfirm:x})]})}const zx=Object.freeze(Object.defineProperty({__proto__:null,NicknameScreen:zd},Symbol.toStringTag,{value:"Module"}));function Ud({onVerified:e,onLogout:t}){const[n,r]=c.useState(!1),[o,s]=c.useState(!1),i=c.useRef(!1),l=c.useMemo(()=>ne.currentUser?.email??"",[]),u=c.useCallback(async()=>{const m=ne.currentUser;if(m){s(!0);try{await m.reload(),m.emailVerified&&e()}finally{i.current||s(!1)}}},[e]),d=c.useCallback(async()=>{const m=ne.currentUser;if(!m){H.error(" .");return}r(!0);try{await ii(m),H.success("   .   .")}catch(f){H.error(Jr(f,"login"))}finally{i.current||r(!1)}},[]);return c.useEffect(()=>(i.current=!1,()=>{i.current=!0}),[]),c.useEffect(()=>{if(!ne.currentUser)return;const m=window.setInterval(()=>{u()},5e3);return()=>window.clearInterval(m)},[u]),c.useEffect(()=>{let m=null;return(async()=>{try{m=await eo.addListener("appStateChange",({isActive:f})=>{f&&u()})}catch{}})(),()=>{m?.remove()}},[u]),ne.currentUser?a.jsx("div",{className:"w-full h-full flex items-center justify-center p-6 pt-safe pb-safe bg-background text-foreground",children:a.jsx(et,{className:"w-full max-w-sm border-border/60 shadow-xl bg-background/95",children:a.jsxs(tt,{className:"pt-6 pb-7 px-4 sm:px-6 space-y-5",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("h1",{className:"text-xl font-semibold",children:"  "}),a.jsx("p",{className:"text-sm text-muted-foreground",children:l?a.jsxs(a.Fragment,{children:[" ",a.jsx("span",{className:"font-medium text-foreground",children:l}),"    ."]}):a.jsx(a.Fragment,{children:"    ."})}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"        ."})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(oe,{className:"w-full",onClick:()=>void u(),disabled:o||n,children:o?" ...":" "}),a.jsx(oe,{className:"w-full",variant:"secondary",onClick:()=>void d(),disabled:o||n,children:n?" ...":"   "}),a.jsx(oe,{className:"w-full",variant:"ghost",onClick:t,disabled:o||n,children:""})]})]})})}):a.jsx("div",{className:"w-full h-full flex items-center justify-center p-6 bg-background text-foreground",children:a.jsx(et,{className:"w-full max-w-sm border-border/60 shadow-xl bg-background/95",children:a.jsxs(tt,{className:"pt-6 pb-7 px-4 sm:px-6 space-y-4",children:[a.jsx("h1",{className:"text-xl font-semibold",children:" "}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"  .   ."}),a.jsx(oe,{className:"w-full",onClick:t,children:""})]})})})}const Ux=Object.freeze(Object.defineProperty({__proto__:null,VerifyEmailScreen:Ud},Symbol.toStringTag,{value:"Module"})),Bt=new Map,En=new Map,Un=new Map,ro=new Map,oc=50,Bd=300*1e3,Bx=6e4;let Oa=!1;const za=new Set;typeof window<"u"&&ai(ne,e=>{Oa=!0,za.forEach(t=>t()),e||(En.forEach(t=>t()),En.clear(),Bt.clear(),ro.clear(),Un.forEach(t=>{t.forEach(n=>n())}))});function Fd(e){ro.set(e,Date.now());const t=Bt.get(e);t&&(Bt.delete(e),Bt.set(e,t))}function Fx(){if(!(Bt.size<=oc))for(const e of Bt.keys()){if(Bt.size<=oc)break;if(Un.get(e)?.size??!1)continue;Bt.delete(e),ro.delete(e);const t=En.get(e);t&&(t(),En.delete(e))}}function $x(){const e=Date.now();for(const[t,n]of ro.entries())if(!((Un.get(t)?.size??0)>0)&&e-n>Bd){Bt.delete(t),ro.delete(t);const r=En.get(t);r&&(r(),En.delete(t))}}let sc=null;function Hx(){!sc&&typeof window<"u"&&(sc=setInterval($x,Bd))}async function ac(e){if(ne.currentUser)try{const t=ke(se,"users",e),n=await Ot(t);if(Fd(e),!n.exists())Bt.delete(e);else{const o=n.data();let s=null;if(typeof o.profileImage=="string"&&o.profileImage)s=o.profileImage;else if(typeof o.photoURL=="string"&&o.photoURL){const l=o.photoURL;l.includes("googleusercontent.com")||l.includes("googleapis.com")||l.includes("lh3.googleusercontent.com")||l.includes("lh4.googleusercontent.com")||l.includes("lh5.googleusercontent.com")||l.includes("lh6.googleusercontent.com")||(s=l)}const i={nickname:typeof o.nickname=="string"?o.nickname:"  ",profileImage:s,currentTitleId:typeof o.currentTitle=="string"?o.currentTitle:null,profileDescription:typeof o.profileDescription=="string"?o.profileDescription:null,role:o.role==="admin"||o.role==="user"?o.role:"user"};Bt.set(e,i)}Fx();const r=Un.get(e);r&&r.forEach(o=>o())}catch(t){if(t?.code==="permission-denied"){En.delete(e);return}}}function Wx(e){if(En.has(e)||!ne.currentUser)return;ac(e);const t=setInterval(()=>{ac(e)},Bx);En.set(e,()=>{clearInterval(t)})}function Rs(e){Hx();const t=(e||[]).filter(m=>typeof m=="string"&&m.length>0),n=Array.from(new Set(t)).sort().join("|"),r=c.useMemo(()=>n?n.split("|"):[],[n]),[o,s]=c.useState(Oa),i=ne.currentUser?.uid;c.useEffect(()=>{if(Oa){s(!0);return}const m=()=>s(!0);return za.add(m),()=>{za.delete(m)}},[]);const l=c.useCallback(()=>{const m={};return r.forEach(f=>{const h=Bt.get(f);h&&(m[f]=h)}),m},[n]),[u,d]=c.useState(l);return c.useEffect(()=>{if(!o)return;let m=!0;const f=()=>{m&&d(h=>{const y=l();let b=!1;const v=Object.keys(h),w=Object.keys(y);if(v.length!==w.length)b=!0;else for(const p of v)if(h[p]!==y[p]){b=!0;break}return b?y:h})};return r.forEach(h=>{Un.has(h)||Un.set(h,new Set),Un.get(h).add(f),Wx(h),Fd(h)}),f(),()=>{m=!1,r.forEach(h=>{const y=Un.get(h);y&&y.delete(f)})}},[n,o,i,l]),u}function Vx(){const[e,t]=c.useState(ne.currentUser?.uid??null);c.useEffect(()=>{const r=ai(ne,o=>{t(o?.uid??null)});return()=>r()},[]);const n=Rs(e?[e]:[]);return e?n[e]??null:null}function As(e,t){if(!e)return"";const r=(t??new Date).getTime()-e.getTime(),o=Math.floor(r/1e3),s=Math.floor(o/60),i=Math.floor(s/60);if(Math.floor(i/24)<1)return o<60?" ":s<60?`${s} `:`${i} `;const u=e.getFullYear(),d=String(e.getMonth()+1).padStart(2,"0"),m=String(e.getDate()).padStart(2,"0");return`${u}.${d}.${m}`}var Gx=c.createContext(void 0);function qx(e){const t=c.useContext(Gx);return e||t||"ltr"}function Yx(e,[t,n]){return Math.min(n,Math.max(t,e))}function Xx(e,t){return c.useReducer((n,r)=>t[n][r]??n,e)}var Li="ScrollArea",[$d]=go(Li),[Kx,Gt]=$d(Li),Hd=c.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:o,scrollHideDelay:s=600,...i}=e,[l,u]=c.useState(null),[d,m]=c.useState(null),[f,h]=c.useState(null),[y,b]=c.useState(null),[v,w]=c.useState(null),[p,g]=c.useState(0),[x,S]=c.useState(0),[C,R]=c.useState(!1),[k,T]=c.useState(!1),N=ot(t,L=>u(L)),A=qx(o);return a.jsx(Kx,{scope:n,type:r,dir:A,scrollHideDelay:s,scrollArea:l,viewport:d,onViewportChange:m,content:f,onContentChange:h,scrollbarX:y,onScrollbarXChange:b,scrollbarXEnabled:C,onScrollbarXEnabledChange:R,scrollbarY:v,onScrollbarYChange:w,scrollbarYEnabled:k,onScrollbarYEnabledChange:T,onCornerWidthChange:g,onCornerHeightChange:S,children:a.jsx(rt.div,{dir:A,...i,ref:N,style:{position:"relative","--radix-scroll-area-corner-width":p+"px","--radix-scroll-area-corner-height":x+"px",...e.style}})})});Hd.displayName=Li;var Wd="ScrollAreaViewport",Vd=c.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,nonce:o,...s}=e,i=Gt(Wd,n),l=c.useRef(null),u=ot(t,l,i.onViewportChange);return a.jsxs(a.Fragment,{children:[a.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:o}),a.jsx(rt.div,{"data-radix-scroll-area-viewport":"",...s,ref:u,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...e.style},children:a.jsx("div",{ref:i.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});Vd.displayName=Wd;var xn="ScrollAreaScrollbar",Gd=c.forwardRef((e,t)=>{const{forceMount:n,...r}=e,o=Gt(xn,e.__scopeScrollArea),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:i}=o,l=e.orientation==="horizontal";return c.useEffect(()=>(l?s(!0):i(!0),()=>{l?s(!1):i(!1)}),[l,s,i]),o.type==="hover"?a.jsx(Jx,{...r,ref:t,forceMount:n}):o.type==="scroll"?a.jsx(Zx,{...r,ref:t,forceMount:n}):o.type==="auto"?a.jsx(qd,{...r,ref:t,forceMount:n}):o.type==="always"?a.jsx(Di,{...r,ref:t}):null});Gd.displayName=xn;var Jx=c.forwardRef((e,t)=>{const{forceMount:n,...r}=e,o=Gt(xn,e.__scopeScrollArea),[s,i]=c.useState(!1);return c.useEffect(()=>{const l=o.scrollArea;let u=0;if(l){const d=()=>{window.clearTimeout(u),i(!0)},m=()=>{u=window.setTimeout(()=>i(!1),o.scrollHideDelay)};return l.addEventListener("pointerenter",d),l.addEventListener("pointerleave",m),()=>{window.clearTimeout(u),l.removeEventListener("pointerenter",d),l.removeEventListener("pointerleave",m)}}},[o.scrollArea,o.scrollHideDelay]),a.jsx(yn,{present:n||s,children:a.jsx(qd,{"data-state":s?"visible":"hidden",...r,ref:t})})}),Zx=c.forwardRef((e,t)=>{const{forceMount:n,...r}=e,o=Gt(xn,e.__scopeScrollArea),s=e.orientation==="horizontal",i=js(()=>u("SCROLL_END"),100),[l,u]=Xx("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return c.useEffect(()=>{if(l==="idle"){const d=window.setTimeout(()=>u("HIDE"),o.scrollHideDelay);return()=>window.clearTimeout(d)}},[l,o.scrollHideDelay,u]),c.useEffect(()=>{const d=o.viewport,m=s?"scrollLeft":"scrollTop";if(d){let f=d[m];const h=()=>{const y=d[m];f!==y&&(u("SCROLL"),i()),f=y};return d.addEventListener("scroll",h),()=>d.removeEventListener("scroll",h)}},[o.viewport,s,u,i]),a.jsx(yn,{present:n||l!=="hidden",children:a.jsx(Di,{"data-state":l==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:Fe(e.onPointerEnter,()=>u("POINTER_ENTER")),onPointerLeave:Fe(e.onPointerLeave,()=>u("POINTER_LEAVE"))})})}),qd=c.forwardRef((e,t)=>{const n=Gt(xn,e.__scopeScrollArea),{forceMount:r,...o}=e,[s,i]=c.useState(!1),l=e.orientation==="horizontal",u=js(()=>{if(n.viewport){const d=n.viewport.offsetWidth<n.viewport.scrollWidth,m=n.viewport.offsetHeight<n.viewport.scrollHeight;i(l?d:m)}},10);return Ir(n.viewport,u),Ir(n.content,u),a.jsx(yn,{present:r||s,children:a.jsx(Di,{"data-state":s?"visible":"hidden",...o,ref:t})})}),Di=c.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,o=Gt(xn,e.__scopeScrollArea),s=c.useRef(null),i=c.useRef(0),[l,u]=c.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=Zd(l.viewport,l.content),m={...r,sizes:l,onSizesChange:u,hasThumb:d>0&&d<1,onThumbChange:h=>s.current=h,onThumbPointerUp:()=>i.current=0,onThumbPointerDown:h=>i.current=h};function f(h,y){return ov(h,i.current,l,y)}return n==="horizontal"?a.jsx(Qx,{...m,ref:t,onThumbPositionChange:()=>{if(o.viewport&&s.current){const h=o.viewport.scrollLeft,y=ic(h,l,o.dir);s.current.style.transform=`translate3d(${y}px, 0, 0)`}},onWheelScroll:h=>{o.viewport&&(o.viewport.scrollLeft=h)},onDragScroll:h=>{o.viewport&&(o.viewport.scrollLeft=f(h,o.dir))}}):n==="vertical"?a.jsx(ev,{...m,ref:t,onThumbPositionChange:()=>{if(o.viewport&&s.current){const h=o.viewport.scrollTop,y=ic(h,l);s.current.style.transform=`translate3d(0, ${y}px, 0)`}},onWheelScroll:h=>{o.viewport&&(o.viewport.scrollTop=h)},onDragScroll:h=>{o.viewport&&(o.viewport.scrollTop=f(h))}}):null}),Qx=c.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...o}=e,s=Gt(xn,e.__scopeScrollArea),[i,l]=c.useState(),u=c.useRef(null),d=ot(t,u,s.onScrollbarXChange);return c.useEffect(()=>{u.current&&l(getComputedStyle(u.current))},[u]),a.jsx(Xd,{"data-orientation":"horizontal",...o,ref:d,sizes:n,style:{bottom:0,left:s.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:s.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Es(n)+"px",...e.style},onThumbPointerDown:m=>e.onThumbPointerDown(m.x),onDragScroll:m=>e.onDragScroll(m.x),onWheelScroll:(m,f)=>{if(s.viewport){const h=s.viewport.scrollLeft+m.deltaX;e.onWheelScroll(h),ef(h,f)&&m.preventDefault()}},onResize:()=>{u.current&&s.viewport&&i&&r({content:s.viewport.scrollWidth,viewport:s.viewport.offsetWidth,scrollbar:{size:u.current.clientWidth,paddingStart:ds(i.paddingLeft),paddingEnd:ds(i.paddingRight)}})}})}),ev=c.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...o}=e,s=Gt(xn,e.__scopeScrollArea),[i,l]=c.useState(),u=c.useRef(null),d=ot(t,u,s.onScrollbarYChange);return c.useEffect(()=>{u.current&&l(getComputedStyle(u.current))},[u]),a.jsx(Xd,{"data-orientation":"vertical",...o,ref:d,sizes:n,style:{top:0,right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Es(n)+"px",...e.style},onThumbPointerDown:m=>e.onThumbPointerDown(m.y),onDragScroll:m=>e.onDragScroll(m.y),onWheelScroll:(m,f)=>{if(s.viewport){const h=s.viewport.scrollTop+m.deltaY;e.onWheelScroll(h),ef(h,f)&&m.preventDefault()}},onResize:()=>{u.current&&s.viewport&&i&&r({content:s.viewport.scrollHeight,viewport:s.viewport.offsetHeight,scrollbar:{size:u.current.clientHeight,paddingStart:ds(i.paddingTop),paddingEnd:ds(i.paddingBottom)}})}})}),[tv,Yd]=$d(xn),Xd=c.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:o,onThumbChange:s,onThumbPointerUp:i,onThumbPointerDown:l,onThumbPositionChange:u,onDragScroll:d,onWheelScroll:m,onResize:f,...h}=e,y=Gt(xn,n),[b,v]=c.useState(null),w=ot(t,N=>v(N)),p=c.useRef(null),g=c.useRef(""),x=y.viewport,S=r.content-r.viewport,C=St(m),R=St(u),k=js(f,10);function T(N){if(p.current){const A=N.clientX-p.current.left,L=N.clientY-p.current.top;d({x:A,y:L})}}return c.useEffect(()=>{const N=A=>{const L=A.target;b?.contains(L)&&C(A,S)};return document.addEventListener("wheel",N,{passive:!1}),()=>document.removeEventListener("wheel",N,{passive:!1})},[x,b,S,C]),c.useEffect(R,[r,R]),Ir(b,k),Ir(y.content,k),a.jsx(tv,{scope:n,scrollbar:b,hasThumb:o,onThumbChange:St(s),onThumbPointerUp:St(i),onThumbPositionChange:R,onThumbPointerDown:St(l),children:a.jsx(rt.div,{...h,ref:w,style:{position:"absolute",...h.style},onPointerDown:Fe(e.onPointerDown,N=>{N.button===0&&(N.target.setPointerCapture(N.pointerId),p.current=b.getBoundingClientRect(),g.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",y.viewport&&(y.viewport.style.scrollBehavior="auto"),T(N))}),onPointerMove:Fe(e.onPointerMove,T),onPointerUp:Fe(e.onPointerUp,N=>{const A=N.target;A.hasPointerCapture(N.pointerId)&&A.releasePointerCapture(N.pointerId),document.body.style.webkitUserSelect=g.current,y.viewport&&(y.viewport.style.scrollBehavior=""),p.current=null})})})}),us="ScrollAreaThumb",Kd=c.forwardRef((e,t)=>{const{forceMount:n,...r}=e,o=Yd(us,e.__scopeScrollArea);return a.jsx(yn,{present:n||o.hasThumb,children:a.jsx(nv,{ref:t,...r})})}),nv=c.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...o}=e,s=Gt(us,n),i=Yd(us,n),{onThumbPositionChange:l}=i,u=ot(t,f=>i.onThumbChange(f)),d=c.useRef(void 0),m=js(()=>{d.current&&(d.current(),d.current=void 0)},100);return c.useEffect(()=>{const f=s.viewport;if(f){const h=()=>{if(m(),!d.current){const y=sv(f,l);d.current=y,l()}};return l(),f.addEventListener("scroll",h),()=>f.removeEventListener("scroll",h)}},[s.viewport,m,l]),a.jsx(rt.div,{"data-state":i.hasThumb?"visible":"hidden",...o,ref:u,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Fe(e.onPointerDownCapture,f=>{const y=f.target.getBoundingClientRect(),b=f.clientX-y.left,v=f.clientY-y.top;i.onThumbPointerDown({x:b,y:v})}),onPointerUp:Fe(e.onPointerUp,i.onThumbPointerUp)})});Kd.displayName=us;var Mi="ScrollAreaCorner",Jd=c.forwardRef((e,t)=>{const n=Gt(Mi,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?a.jsx(rv,{...e,ref:t}):null});Jd.displayName=Mi;var rv=c.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,o=Gt(Mi,n),[s,i]=c.useState(0),[l,u]=c.useState(0),d=!!(s&&l);return Ir(o.scrollbarX,()=>{const m=o.scrollbarX?.offsetHeight||0;o.onCornerHeightChange(m),u(m)}),Ir(o.scrollbarY,()=>{const m=o.scrollbarY?.offsetWidth||0;o.onCornerWidthChange(m),i(m)}),d?a.jsx(rt.div,{...r,ref:t,style:{width:s,height:l,position:"absolute",right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function ds(e){return e?parseInt(e,10):0}function Zd(e,t){const n=e/t;return isNaN(n)?0:n}function Es(e){const t=Zd(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function ov(e,t,n,r="ltr"){const o=Es(n),s=o/2,i=t||s,l=o-i,u=n.scrollbar.paddingStart+i,d=n.scrollbar.size-n.scrollbar.paddingEnd-l,m=n.content-n.viewport,f=r==="ltr"?[0,m]:[m*-1,0];return Qd([u,d],f)(e)}function ic(e,t,n="ltr"){const r=Es(t),o=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-o,i=t.content-t.viewport,l=s-r,u=n==="ltr"?[0,i]:[i*-1,0],d=Yx(e,u);return Qd([0,i],[0,l])(d)}function Qd(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function ef(e,t){return e>0&&e<t}var sv=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return(function o(){const s={left:e.scrollLeft,top:e.scrollTop},i=n.left!==s.left,l=n.top!==s.top;(i||l)&&t(),n=s,r=window.requestAnimationFrame(o)})(),()=>window.cancelAnimationFrame(r)};function js(e,t){const n=St(e),r=c.useRef(0);return c.useEffect(()=>()=>window.clearTimeout(r.current),[]),c.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function Ir(e,t){const n=St(t);Vt(()=>{let r=0;if(e){const o=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return o.observe(e),()=>{window.cancelAnimationFrame(r),o.unobserve(e)}}},[e,n])}var av=Hd,iv=Vd,lv=Jd;function cv({className:e,children:t,...n}){return a.jsxs(av,{"data-slot":"scroll-area",className:nt("relative",e),...n,children:[a.jsx(iv,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:t}),a.jsx(uv,{}),a.jsx(lv,{})]})}function uv({className:e,orientation:t="vertical",...n}){return a.jsx(Gd,{"data-slot":"scroll-area-scrollbar",orientation:t,className:nt("flex touch-none p-px transition-colors select-none",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",e),...n,children:a.jsx(Kd,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}function dv({open:e,onOpenChange:t,blockedUserIds:n,onUnblocked:r}){const[o,s]=c.useState(null);if(!e)return null;const i=async l=>{try{s(l);const u=bu();await Fn(u,"unblockUser")({targetUserId:l}),H.success(" ."),r()}catch{H.error("  ")}finally{s(null)}};return a.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4 animate-in fade-in duration-200",children:a.jsxs(et,{className:"w-full max-w-md h-[50vh] flex flex-col shadow-lg scale-100",children:[a.jsxs(Ni,{className:"flex flex-row items-center justify-between space-y-0 pb-2 border-b",children:[a.jsxs(hd,{className:"flex items-center text-lg",children:[a.jsx(Gy,{className:"w-5 h-5 mr-2"}),"  "]}),a.jsx(oe,{variant:"ghost",size:"icon",onClick:()=>t(!1),children:a.jsx(as,{className:"w-4 h-4"})})]}),a.jsxs(tt,{className:"flex-1 overflow-hidden p-0 flex flex-col",children:[a.jsx("div",{className:"flex-1 p-4 overflow-hidden",children:n.length===0?a.jsx("div",{className:"h-full flex flex-col items-center justify-center text-muted-foreground text-sm",children:a.jsx("p",{children:"  ."})}):a.jsx(cv,{className:"h-full pr-3",children:a.jsx("div",{className:"space-y-2",children:n.map(l=>a.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-secondary/50 border border-border/50",children:[a.jsxs("div",{className:"flex flex-col overflow-hidden mr-2",children:[a.jsx("span",{className:"text-[10px] text-muted-foreground uppercase",children:"User ID"}),a.jsx("span",{className:"text-sm font-mono truncate w-full",title:l,children:l})]}),a.jsx(oe,{variant:"outline",size:"sm",disabled:o===l,onClick:()=>i(l),className:"shrink-0 h-8 text-xs border-red-200 hover:bg-red-50 text-red-600 dark:hover:bg-red-900/20 dark:border-red-900/50",children:o===l?" ":""})]},l))})})}),a.jsx("div",{className:"p-3 border-t bg-secondary/10 flex justify-end",children:a.jsx(oe,{onClick:()=>t(!1),children:""})})]})]})})}const fs=" ";function Is(e,t){return t===!0||e===fs}function Oi(e,t){return Is(e,t)||!e?fs:e}const tf=bu(mu,"asia-northeast3"),fv=Fn(tf,"awardLumens"),mv=Fn(tf,"purchaseTitle"),lc={balance:0,totalEarned:0,totalSpent:0,transactions:[]};function cc(){const[e,t]=c.useState(lc),[n,r]=c.useState(!0);c.useEffect(()=>{const l=ne.currentUser?.uid;if(!l){r(!1);return}const u=ke(se,"users",l);let d=!1;return(async()=>{try{const f=await Ot(u);if(d)return;if(f.exists()){const h=f.data(),y={balance:h.lumenBalance||0,totalEarned:h.lumenTotalEarned||0,totalSpent:h.lumenTotalSpent||0,transactions:(h.lumenTransactions||[]).sort((b,v)=>v.timestamp-b.timestamp)};t(y)}else await hn(u,{lumenBalance:0,lumenTotalEarned:0,lumenTotalSpent:0,lumenTransactions:[]},{merge:!0}),t(lc)}catch{H.error("    .")}finally{d||r(!1)}})(),()=>{d=!0}},[]);const o=c.useCallback(async(l,u,d)=>{if(l<=0)return;const m={...e},f={id:`${Date.now()}-${Math.random().toString(36).substr(2,5)}`,amount:l,reason:u,achievementId:d,timestamp:Date.now()};t(h=>({balance:h.balance+l,totalEarned:h.totalEarned+l,totalSpent:h.totalSpent,transactions:[f,...h.transactions]}));try{if(!(await fv({amount:l,reason:u,achievementId:d})).data.success)throw new Error("   .")}catch{H.error(`"${u}"   .  .`),t(m)}},[e]),s=c.useCallback(async(l,u,d)=>{if(l<=0)return!1;if(e.balance<l)return H.error(" !"),!1;const m={...e},f={id:`${Date.now()}-${Math.random().toString(36).substr(2,5)}`,amount:-l,reason:u,titleId:d,timestamp:Date.now()};t(h=>({balance:h.balance-l,totalEarned:h.totalEarned,totalSpent:h.totalSpent+l,transactions:[f,...h.transactions]}));try{if(d){if(!(await mv({titleId:d})).data.success)throw new Error("   .");H.success("  !")}return!0}catch(h){const y=h.details?.message||"  .    .";return H.error(y),t(m),!1}},[e]),i=c.useCallback(l=>e.transactions.some(u=>u.achievementId===l&&u.amount>0),[e.transactions]);return{isLoading:n,balance:e.balance,totalEarned:e.totalEarned,totalSpent:e.totalSpent,transactions:e.transactions,addLumens:o,spendLumens:s,hasReceivedRewardForAchievement:i}}const Ua=[{id:"first_explore",name:" ",description:"    ",category:"explore",hidden:!1,condition:{type:"explore_post_count",target:1},reward:{lumens:0}},{id:"first_share",name:" ",description:"     ",category:"share",hidden:!1,condition:{type:"share_post_count",target:1},reward:{lumens:0}},{id:"first_reply",name:" ",description:"   ",category:"reply",hidden:!1,condition:{type:"reply_count",target:1},reward:{lumens:0}},{id:"first_guide",name:" ",description:"   -     ",category:"guide",hidden:!1,condition:{type:"guide_count",target:1},reward:{lumens:0}},{id:"first_lantern_received",name:" ",description:"  ",category:"lantern",hidden:!1,condition:{type:"lanterns_received",target:1},reward:{lumens:0}},{id:"first_login_streak",name:" ",description:" 3 ",category:"streak",hidden:!1,condition:{type:"login_streak",target:3},reward:{lumens:0}},{id:"explore_seeker",name:"",description:"  10 ",category:"explore",hidden:!1,condition:{type:"explore_post_count",target:10},reward:{lumens:0,specialTitle:""}},{id:"explore_inquirer",name:"",description:"  30 ",category:"explore",hidden:!1,condition:{type:"explore_post_count",target:30},reward:{lumens:1,specialTitle:""}},{id:"explore_investigator",name:"",description:"  100 ",category:"explore",hidden:!1,condition:{type:"explore_post_count",target:100},reward:{lumens:3,specialTitle:""}},{id:"explore_philosopher",name:"",description:"  300 ",category:"explore",hidden:!1,condition:{type:"explore_post_count",target:300},reward:{lumens:5,specialTitle:""}},{id:"reply_helper",name:"",description:" 10    10  -     ",category:"reply",hidden:!1,condition:{type:"quality_reply_count",target:10,minLanterns:10},reward:{lumens:0,specialTitle:""}},{id:"reply_advisor",name:"",description:" 10    30  -     ",category:"reply",hidden:!1,condition:{type:"quality_reply_count",target:30,minLanterns:10},reward:{lumens:1,specialTitle:""}},{id:"reply_mentor",name:"",description:" 10    100  -    ",category:"reply",hidden:!1,condition:{type:"quality_reply_count",target:100,minLanterns:10},reward:{lumens:3,specialTitle:""}},{id:"reply_scholar",name:"",description:" 10    300  -     ",category:"reply",hidden:!1,condition:{type:"quality_reply_count",target:300,minLanterns:10},reward:{lumens:5,specialTitle:""}},{id:"guide_guide",name:"",description:" 5  -    ",category:"guide",hidden:!1,condition:{type:"guide_count",target:5},reward:{lumens:0,specialTitle:""}},{id:"guide_navigator",name:"",description:" 20  -    ",category:"guide",hidden:!1,condition:{type:"guide_count",target:20},reward:{lumens:1,specialTitle:""}},{id:"guide_pathfinder",name:"",description:" 50  -    ",category:"guide",hidden:!1,condition:{type:"guide_count",target:50},reward:{lumens:3,specialTitle:""}},{id:"guide_luminary",name:"",description:" 100  -   ",category:"guide",hidden:!1,condition:{type:"guide_count",target:100},reward:{lumens:5,specialTitle:""}},{id:"lantern_candle",name:"",description:" 50  -      ",category:"lantern",hidden:!1,condition:{type:"lanterns_received",target:50},reward:{lumens:0,specialTitle:""}},{id:"lantern_campfire",name:"",description:" 200  -      ",category:"lantern",hidden:!1,condition:{type:"lanterns_received",target:200},reward:{lumens:1,specialTitle:""}},{id:"lantern_lantern",name:"",description:" 500  -     ",category:"lantern",hidden:!1,condition:{type:"lanterns_received",target:500},reward:{lumens:3,specialTitle:""}},{id:"lantern_furnace",name:"",description:" 1500  -    ",category:"lantern",hidden:!1,condition:{type:"lanterns_received",target:1500},reward:{lumens:5,specialTitle:""}},{id:"share_sharer",name:"",description:" 3      10 ",category:"share",hidden:!1,condition:{type:"share_post_count",target:10,minLanterns:3},reward:{lumens:0,specialTitle:""}},{id:"share_curator",name:"",description:" 3      30 ",category:"share",hidden:!1,condition:{type:"share_post_count",target:30,minLanterns:3},reward:{lumens:1,specialTitle:""}},{id:"share_publisher",name:"",description:" 3      100 ",category:"share",hidden:!1,condition:{type:"share_post_count",target:100,minLanterns:3},reward:{lumens:3,specialTitle:""}},{id:"share_archivist",name:" ",description:" 3      300 ",category:"share",hidden:!1,condition:{type:"share_post_count",target:300,minLanterns:3},reward:{lumens:5,specialTitle:" "}},{id:"streak_visitor",name:"",description:" 7 ",category:"streak",hidden:!1,condition:{type:"login_streak",target:7},reward:{lumens:0,specialTitle:""}},{id:"streak_regular",name:"",description:" 30 ",category:"streak",hidden:!1,condition:{type:"login_streak",target:30},reward:{lumens:0,specialTitle:""}},{id:"streak_resident",name:"",description:" 100 ",category:"streak",hidden:!1,condition:{type:"login_streak",target:100},reward:{lumens:0,specialTitle:""}},{id:"streak_pillar",name:"",description:" 365 ",category:"streak",hidden:!1,condition:{type:"login_streak",target:365},reward:{lumens:0,specialTitle:""}},{id:"captain_captain",name:"",description:" 100 ",category:"captain",hidden:!1,condition:{type:"follower_count",target:100},reward:{lumens:0,specialTitle:""}},{id:"economy_analyst",name:" ",description:"   5    40 ",category:"economy",hidden:!1,condition:{type:"category_quality_reply",target:40,minAverageLanterns:5},reward:{lumens:2,specialTitle:" "}},{id:"economy_expert",name:" ",description:"   10    150 ",category:"economy",hidden:!1,condition:{type:"category_quality_reply",target:150,minAverageLanterns:10},reward:{lumens:5,specialTitle:" "}},{id:"it_consultant",name:" ",description:"IT   5    40 ",category:"it",hidden:!1,condition:{type:"category_quality_reply",target:40,minAverageLanterns:5},reward:{lumens:2,specialTitle:" "}},{id:"it_expert",name:" ",description:"IT   10    150 ",category:"it",hidden:!1,condition:{type:"category_quality_reply",target:150,minAverageLanterns:10},reward:{lumens:5,specialTitle:" "}},{id:"language_tutor",name:" ",description:"   5    40 ",category:"language",hidden:!1,condition:{type:"category_quality_reply",target:40,minAverageLanterns:5},reward:{lumens:2,specialTitle:" "}},{id:"language_expert",name:" ",description:"   10    150 ",category:"language",hidden:!1,condition:{type:"category_quality_reply",target:150,minAverageLanterns:10},reward:{lumens:5,specialTitle:" "}},{id:"engineering_curious",name:" ",description:"    10 ",category:"explore",hidden:!1,condition:{type:"category_explore_count",target:10},reward:{lumens:1,specialTitle:" "}},{id:"engineering_focused",name:" ",description:"    40 ",category:"reply",hidden:!0,condition:{type:"single_category_posts",target:40},reward:{lumens:2,specialTitle:" "}},{id:"engineering_first_light",name:"  ",description:"    ",category:"lantern",hidden:!1,condition:{type:"category_first_lantern",target:1},reward:{lumens:1,specialTitle:"  "}},{id:"engineering_destroyer",name:" ",description:"   50 ",category:"reply",hidden:!1,condition:{type:"category_reply_count",target:50},reward:{lumens:3,specialTitle:" "}},{id:"explore_brave_questioner",name:"  ",description:"    5  -      ",category:"explore",hidden:!1,condition:{type:"explore_post_count",target:5},reward:{lumens:1,specialTitle:"  "}},{id:"explore_steady_questioner",name:" ",description:"    20  -   ",category:"explore",hidden:!1,condition:{type:"explore_post_count",target:20},reward:{lumens:2,specialTitle:" "}},{id:"reply_challenger",name:" ",description:" ,      10  -    ",category:"reply",hidden:!1,condition:{type:"reply_count",target:10},reward:{lumens:1,specialTitle:" "}},{id:"reply_persistent_helper",name:"  ",description:"    50  -     ",category:"reply",hidden:!1,condition:{type:"reply_count",target:50},reward:{lumens:3,specialTitle:"  "}},{id:"lantern_giver_small",name:" ",description:"    50  -     ",category:"lantern",hidden:!1,condition:{type:"lanterns_given",target:50},reward:{lumens:1,specialTitle:" "}},{id:"lantern_giver_captain",name:"",description:"    200  -    ",category:"lantern",hidden:!1,condition:{type:"lanterns_given",target:200},reward:{lumens:3,specialTitle:""}}],Ba=[{id:"multi_specialist",name:" ",description:"3    ",category:"reply",hidden:!0,condition:{type:"multi_field_expert",target:3},reward:{lumens:10,specialTitle:" "}},{id:"discussion_expert",name:" ",description:"   15  ",category:"reply",hidden:!0,condition:{type:"discussion_exchanges",target:15},reward:{lumens:5,specialTitle:" "}},{id:"best_contributor",name:" ",description:"   100  ",category:"lantern",hidden:!0,condition:{type:"max_post_lanterns",target:100},reward:{lumens:10,specialTitle:" "}},{id:"community_fellow",name:" ",description:"   3  ",category:"guide",hidden:!0,condition:{type:"all_categories_tier3",target:1},reward:{lumens:15,specialTitle:" "}},{id:"honorary_scholar",name:" ",description:"   4() ",category:"guide",hidden:!0,condition:{type:"all_categories_tier4",target:1},reward:{lumens:50,specialTitle:" "}},{id:"lantern_giver",name:" ",description:"   500 ",category:"lantern",hidden:!0,condition:{type:"lanterns_given",target:500},reward:{lumens:3,specialTitle:" "}},{id:"diligent_visitor",name:" ",description:" 30  27  ",category:"streak",hidden:!0,condition:{type:"monthly_login_rate",target:27},reward:{lumens:0,specialTitle:" "}},{id:"popular_questioner",name:" ",description:"      30  ,     ",category:"explore",hidden:!0,condition:{type:"max_post_lanterns",target:30},reward:{lumens:2,specialTitle:" "}},{id:"specialized_replier",name:" ",description:"   300 ",category:"reply",hidden:!0,condition:{type:"single_category_replies",target:300},reward:{lumens:3,specialTitle:" "}}],hv=[...Ua,...Ba];function eT(e){return{guide:"",explore:"",share:" ",reply:"",lantern:"",streak:"",captain:"",economy:"",it:"IT",language:""}[e]}const Tr={explorePosts:0,sharePosts:0,replies:0,qualityReplies:0,lanternsReceived:0,lanternsGiven:0,guideCount:0,bookmarks:0,loginStreak:0,maxPostReplies:0,maxPostLanterns:0,maxDiscussionExchanges:0,followerCount:0},ms={ACHIEVED_ACHIEVEMENTS:"app_achieved_achievements",USER_ACTIVITY:"app_user_activity"};function pv(){if(typeof window>"u")return null;try{const e=window.localStorage.getItem(ms.ACHIEVED_ACHIEVEMENTS),t=window.localStorage.getItem(ms.USER_ACTIVITY);if(!e&&!t)return null;let n=[],r={...Tr};if(e)try{const o=JSON.parse(e);Array.isArray(o)&&(n=o.map(s=>!s||typeof s!="object"||typeof s.achievementId!="string"||typeof s.achievedAt!="string"?null:{achievementId:s.achievementId,achievedAt:s.achievedAt,rewardClaimed:typeof s.rewardClaimed=="boolean"?s.rewardClaimed:!0}).filter(s=>s!==null))}catch{}if(t)try{const o=JSON.parse(t);o&&typeof o=="object"&&(r={...Tr,...o})}catch{}return{achieved:n,activity:r}}catch{return null}}function gv(e,t){const[n,r]=c.useState([]),[o,s]=c.useState(Tr),[i,l]=c.useState(!1),u=c.useRef(!1),d=c.useCallback(x=>n.find(S=>S.achievementId===x),[n]);c.useEffect(()=>{const x=ne.currentUser?.uid;if(!x)return;let S=!1;return(async()=>{try{const R=ke(se,"users",x),k=await Ot(R);if(k.exists()){const L=k.data(),O=L.userActivity&&typeof L.userActivity=="object"?{...Tr,...L.userActivity}:{...Tr};let E=[];Array.isArray(L.achievedAchievements)&&(E=L.achievedAchievements.filter(j=>j&&typeof j.achievementId=="string"&&typeof j.achievedAt=="string").map(j=>({achievementId:j.achievementId,achievedAt:j.achievedAt,rewardClaimed:typeof j.rewardClaimed=="boolean"?j.rewardClaimed:!0}))),S||(s(O),r(E));return}const T=pv(),N=T?.activity??{...Tr},A=T?.achieved??[];if(S||(s(N),r(A)),await hn(R,{userActivity:N,achievedAchievements:A},{merge:!0}),T)try{window.localStorage.removeItem(ms.USER_ACTIVITY),window.localStorage.removeItem(ms.ACHIEVED_ACHIEVEMENTS)}catch{}}catch{}finally{S||l(!0)}})(),()=>{S=!0}},[]),c.useEffect(()=>{const x=ne.currentUser?.uid;if(!x||!i)return;if(!u.current){u.current=!0;return}const S=ke(se,"users",x);Rn(S,{userActivity:o,achievedAchievements:n}).catch(C=>{})},[o,n,i]);const m=c.useCallback(x=>n.some(S=>S.achievementId===x),[n]),f=c.useCallback((x,S)=>{const{condition:C}=x;switch(C.type){case"explore_post_count":return S.explorePosts>=C.target;case"share_post_count":return S.sharePosts>=C.target;case"quality_reply_count":return S.qualityReplies>=C.target;case"reply_count":return S.replies>=C.target;case"lanterns_received":return S.lanternsReceived>=C.target;case"lanterns_given":return S.lanternsGiven>=C.target;case"guide_count":return S.guideCount>=C.target;case"bookmark_count":return S.bookmarks>=C.target;case"login_streak":return S.loginStreak>=C.target;case"follower_count":return S.followerCount>=C.target;case"discussion_exchanges":return S.maxDiscussionExchanges>=C.target;case"max_post_lanterns":return S.maxPostLanterns>=C.target;case"category_quality_reply":return x.category==="economy"?(S.economyReplies||0)>=C.target&&(S.economyAverageLanterns||0)>=(C.minAverageLanterns||0):x.category==="it"?(S.itReplies||0)>=C.target&&(S.itAverageLanterns||0)>=(C.minAverageLanterns||0):x.category==="language"?(S.languageReplies||0)>=C.target&&(S.languageAverageLanterns||0)>=(C.minAverageLanterns||0):!1;case"multi_field_expert":return(S.unlockedFieldExpertCount||0)>=C.target;case"all_categories_tier3":return(S.tier3AchievementsCount||0)>=6;case"all_categories_tier4":return(S.tier4AchievementsCount||0)>=6;case"category_explore_count":return(S.engineeringExplorePosts||0)>=C.target;case"single_category_posts":return(S.engineeringOnlyPosts||0)>=C.target;case"category_first_lantern":return S.engineeringFirstLanternReceived===!0;case"category_reply_count":return(S.engineeringTotalReplies||0)>=C.target;case"monthly_login_rate":return(S.monthlyLoginDays||0)>=C.target;case"own_post_guide_selected":return(S.ownPostGuideSelected||0)>=C.target;case"single_category_replies":return(S.singleCategoryMaxReplies||0)>=C.target;default:return!1}},[]),h=c.useCallback(x=>{const S=n.find(A=>A.achievementId===x.id);if(S&&S.rewardClaimed)return;const{reward:C}=x,R=!S||!S.rewardClaimed;R&&(C.lumens>0&&e&&e(C.lumens,` : ${x.name}`,x.id),C.specialTitle&&t&&t(x.id,C.specialTitle));const k=new Date().toISOString(),T=S?{...S,achievedAt:S.achievedAt||k,rewardClaimed:!0}:{achievementId:x.id,achievedAt:k,rewardClaimed:!0};r(A=>{const L=A.findIndex(E=>E.achievementId===x.id);if(L===-1)return[...A,T];const O=[...A];return O[L]=T,O});let N=`${x.name}  !`;R&&(C.lumens>0&&C.specialTitle?N+=` ( ${C.lumens} +  "${C.specialTitle}" )`:C.lumens>0?N+=` ( ${C.lumens} )`:C.specialTitle&&(N+=` (  "${C.specialTitle}" )`)),x.hidden?H.success(`   ! 
${N}`,{duration:5e3}):H.success(` ${N}`,{duration:4e3})},[n,e,t]),y=c.useCallback(x=>{hv.forEach(S=>{m(S.id)||f(S,x)&&h(S)})},[f,h,m]),b=c.useCallback(x=>{s(S=>{const C={...S,...x};return setTimeout(()=>{y(C)},100),C})},[y]),v=n.filter(x=>Ua.some(S=>S.id===x.achievementId)).length,w=n.filter(x=>Ba.some(S=>S.id===x.achievementId)).length,p=Ua.length,g=Ba.length;return{achievedAchievements:n,userActivity:o,isAchievementUnlocked:m,getAchievementInfo:d,updateActivity:b,checkAchievements:y,achievedNormalCount:v,achievedHiddenCount:w,normalCount:p,hiddenCount:g}}const yv=12;function xv(e){const{includeHidden:t=!1}={},[n,r]=c.useState([]),[o,s]=c.useState(!1),i=c.useCallback(async()=>{s(!0);try{const l=Ye(se,"posts"),u=zt(l,wu("createdAt","desc"),po(yv)),d=await mt(u),m=ne.currentUser?.uid??null,h=d.docs.map(y=>{const b=y.data(),v=b.hidden===!0;if(v&&!t)return null;const w=b.createdAt&&typeof b.createdAt.toDate=="function"?b.createdAt.toDate():b.createdAt instanceof Date?b.createdAt:new Date;let p=[];return Array.isArray(b.replies)&&(p=b.replies.filter(x=>!(!x||typeof x!="object"||x.hidden===!0&&!t)).map(x=>({id:x.id??Date.now(),content:x.content??"",author:x.author??"  ",authorUid:x.authorUid??null,authorAvatar:x.authorAvatar??null,timeAgo:x.timeAgo??"",lanterns:x.lanterns??0,isGuide:!!x.isGuide,createdAt:typeof x.createdAt?.toDate=="function"?x.createdAt.toDate():x.createdAt instanceof Date?x.createdAt:new Date,authorTitleId:x.authorTitleId??null,isAi:x.isAi===!0||typeof x.aiLabel=="string",aiLabel:x.aiLabel,aiSummary:x.aiSummary,aiSource:x.aiSource}))),{id:y.id,title:b.title??"",content:b.content??"",category:b.category??"",subCategory:b.subCategory??"",type:b.type??"question",tags:Array.isArray(b.tags)?b.tags:[],author:b.author??"  ",authorUid:b.authorUid??null,authorAvatar:b.authorAvatar??"",createdAt:w,lanterns:b.lanterns??0,replies:p,replyCount:b.replyCount??p.length,comments:b.comments??p.length,views:b.views??0,isBookmarked:!1,isOwner:!!m&&!!b.authorUid&&m===b.authorUid,authorTitleId:null,authorTitleName:null,hidden:v,reportCount:b.reportCount}}).filter(y=>y!==null);r(h)}catch{}finally{s(!1)}},[t]);return c.useEffect(()=>{i()},[i]),{posts:n,setPosts:r,loading:o,refresh:i}}function fa({icon:e,title:t,description:n,onClick:r,variant:o="default"}){const[s,i]=c.useState(()=>document.documentElement.classList.contains("dark"));return c.useEffect(()=>{const l=new MutationObserver(()=>{i(document.documentElement.classList.contains("dark"))});return l.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),()=>l.disconnect()},[]),a.jsxs("button",{type:"button",onClick:r,style:o==="default"&&s?{backgroundColor:"#2D2F31",borderColor:"#c9a532"}:void 0,className:`
                w-full text-left
                rounded-xl
                border
                transition-all
                px-4 py-3.5
                flex items-center gap-3
                hover:scale-[1.02] active:scale-[0.98]
                ${o==="default"?"bg-primary/20 border-primary/30 hover:bg-primary/30 text-foreground dark:text-[#D4D4D4]":"border-border/30 bg-transparent hover:bg-accent/20 text-foreground"}
            `,onMouseEnter:l=>{o==="default"&&s&&(l.currentTarget.style.backgroundColor="#353739")},onMouseLeave:l=>{o==="default"&&s&&(l.currentTarget.style.backgroundColor="#2D2F31")},children:[a.jsx("div",{className:`
                    shrink-0 w-10 h-10 rounded-xl
                    flex items-center justify-center
                    ${o==="default"&&s?"bg-[#D4D4D4]/10 text-[#D4D4D4]":"bg-primary/10 text-primary"}
                `,children:e}),a.jsxs("div",{className:"min-w-0 flex-1 flex flex-col gap-1",children:[a.jsx("div",{className:`text-[15px] font-semibold ${o==="default"&&s?"text-[#D4D4D4]":"text-foreground"}`,children:t}),n?a.jsx("div",{className:`text-[13px] leading-snug ${o==="default"&&s?"text-[#D4D4D4]/80":"text-muted-foreground"}`,children:n}):null]})]})}function vv({open:e,onClose:t,onSelectStructured:n,onSelectWrite:r,onSelectNotes:o}){c.useEffect(()=>{if(!e)return;const u=d=>{d.key==="Escape"&&t()};return window.addEventListener("keydown",u),()=>window.removeEventListener("keydown",u)},[e,t]);const s=c.useCallback(()=>{t(),n()},[t,n]),i=c.useCallback(()=>{t(),r()},[t,r]),l=c.useCallback(()=>{t(),o()},[t,o]);return e?a.jsxs("div",{className:"fixed inset-0 z-[9999]",children:[a.jsx("div",{className:`
          absolute inset-0
          bg-black/35
          backdrop-blur-[3px]
        `,onClick:t,"aria-hidden":"true"}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4",onClick:t,children:a.jsx("div",{role:"dialog","aria-modal":"true",onClick:u=>u.stopPropagation(),className:`
                        w-full max-w-[400px]
                        rounded-2xl
                        border border-border/30
                        bg-card
                        shadow-[0_24px_90px_rgba(0,0,0,0.55)]
                        overflow-hidden
                    `,children:a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{className:"flex flex-col items-center text-center space-y-3",children:[a.jsx("div",{className:"w-12 h-12 rounded-full bg-accent/50 flex items-center justify-center shrink-0",children:a.jsx(La,{className:"w-6 h-6 text-muted-foreground"})}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("div",{className:"text-lg font-semibold text-foreground",children:"  ?"}),a.jsx("div",{className:"text-sm text-muted-foreground leading-relaxed",children:"    / ."})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx(fa,{icon:a.jsx(La,{size:18}),title:"  ",onClick:s,variant:"default"}),a.jsx(fa,{icon:a.jsx(Ey,{size:18}),title:"   ",onClick:i,variant:"default"}),a.jsx(fa,{icon:a.jsx(Ry,{size:18}),title:"   ",onClick:l,variant:"default"})]})]})})})]}):null}const uc=(e,t)=>Ye(se,"user_lanterns",e,t);function bv({posts:e,setPosts:t,selectedPost:n,setSelectedPost:r,userNickname:o,userActivity:s,updateActivity:i,userPostLanterns:l,setUserPostLanterns:u,userReplyLanterns:d,setUserReplyLanterns:m,addLumensWithTrust:f,updateTrust:h}){const[y,b]=c.useState(new Set),[v,w]=c.useState(new Set);c.useEffect(()=>{const C=ne.currentUser?.uid??null;if(!C)return;(async()=>{try{const T=(await mt(uc(C,"posts"))).docs.map(L=>L.id);b(new Set(T));const A=(await mt(uc(C,"replies"))).docs.map(L=>Number(L.id)).filter(L=>!Number.isNaN(L));w(new Set(A))}catch{}})()},[]);const p=c.useCallback(async C=>{const R=String(C),k=new Set;y.forEach(j=>k.add(String(j)));const T=k.has(R),N=new Set(k);T?N.delete(R):N.add(R),b(N);const A=T?-1:1,O=e.find(j=>String(j.id)===R)?.lanterns??0;t(j=>j.map(M=>String(M.id)===R?{...M,lanterns:Math.max(0,O+A)}:M)),n&&String(n.id)===R&&r({...n,lanterns:Math.max(0,O+A)});const E=Fn(to,"toggleLantern");try{await E({postId:R})}catch{b(k),t(M=>M.map(I=>String(I.id)===R?{...I,lanterns:O}:I)),n&&String(n.id)===R&&r({...n,lanterns:O}),H.error("  .    .");return}T||H.success(" ! ")},[y,e,t,n,r]),g=c.useCallback(async(C,R)=>{const k=String(R),T=v.has(C),N=new Set(v);T?N.delete(C):N.add(C),w(N);const A=T?-1:1,E=e.find(M=>String(M.id)===k)?.replies?.find(M=>M.id===C)?.lanterns??0;t(M=>M.map(I=>String(I.id)===k&&Array.isArray(I.replies)?{...I,replies:I.replies.map(_=>_.id===C?{..._,lanterns:Math.max(0,E+A)}:_)}:I)),n&&String(n.id)===k&&Array.isArray(n.replies)&&r({...n,replies:n.replies.map(M=>M.id===C?{...M,lanterns:Math.max(0,E+A)}:M)});const j=Fn(to,"toggleReplyLantern");try{await j({postId:k,replyId:C})}catch{w(v),t(I=>I.map(_=>String(_.id)===k&&Array.isArray(_.replies)?{..._,replies:_.replies.map(P=>P.id===C?{...P,lanterns:E}:P)}:_)),n&&String(n.id)===k&&Array.isArray(n.replies)&&r({...n,replies:n.replies.map(I=>I.id===C?{...I,lanterns:E}:I)}),H.error("  .    .");return}T||H.success(" ! ")},[v,e,t,n,r]),x=c.useCallback(C=>y.has(String(C)),[y]),S=c.useCallback(C=>v.has(C),[v]);return{lanternedPosts:y,lanternedReplies:v,handleLanternToggle:p,handleReplyLanternToggle:g,isPostLanterned:x,isReplyLanterned:S}}const dc=e=>Ye(se,"user_bookmarks",e,"posts"),fc=(e,t)=>ke(se,"user_bookmarks",e,"posts",String(t));function wv({userNickname:e}){const[t,n]=c.useState(new Set);c.useEffect(()=>{const s=ne.currentUser?.uid??null;if(!s)return;(async()=>{try{const u=(await mt(dc(s))).docs.map(d=>d.id);n(new Set(u))}catch{}})()},[]),c.useEffect(()=>{const s=ne.currentUser?.uid??null;if(!s){n(new Set);return}(async()=>{try{const l=await mt(dc(s)),u=new Set;l.forEach(d=>{const m=d.data(),f=(m&&m.postId)??d.id;u.add(String(f))}),n(u)}catch{}})()},[e]);const r=c.useCallback(async s=>{const i=String(s),l=t.has(i),u=ne.currentUser?.uid??null;if(n(d=>{const m=new Set(d);return l?m.delete(i):m.add(i),m}),u)try{if(l)await li(fc(u,i)),H.success(" ");else{let d=null,m=null;try{const f=await Ot(ke(se,"posts",i));if(f.exists()){const h=f.data();d=h?.category??null,m=h?.subCategory??null}}catch{}await hn(fc(u,i),{postId:i,category:d,subCategory:m,createdAt:Pt()},{merge:!0}),H.success(" ")}}catch{n(m=>{const f=new Set(m);return l?f.add(i):f.delete(i),f}),H.error("  ")}else H.error(" "),n(d=>{const m=new Set(d);return l?m.add(i):m.delete(i),m})},[t]),o=c.useCallback(s=>t.has(String(s)),[t]);return{bookmarkedPosts:t,handleBookmarkToggle:r,isBookmarked:o}}const Ut={setItem:(e,t)=>{try{localStorage.setItem(e,t)}catch{}},getItem:e=>{try{return localStorage.getItem(e)}catch{return null}},setJSON:(e,t)=>{try{localStorage.setItem(e,JSON.stringify(t))}catch{}},getJSON:(e,t)=>{try{const n=localStorage.getItem(e);return n===null?t:JSON.parse(n)}catch{return t}},getNumber:(e,t)=>{try{const n=localStorage.getItem(e);if(n===null)return t;const r=parseInt(n);return isNaN(r)?t:r}catch{return t}}};async function Fa(e){const{toUserUid:t,fromUserUid:n,type:r,categoryId:o,data:s}=e;if(t&&t!==n)try{const i=Ye(se,"user_notifications",t,"items");await Kr(i,{fromUserUid:n,type:r,categoryId:o??null,data:s,read:!1,timestamp:Date.now()})}catch(i){throw i}}function kv({posts:e,setPosts:t,selectedPost:n,setSelectedPost:r,userNickname:o}){const[s,i]=c.useState(new Set),[l,u]=c.useState(new Map);c.useEffect(()=>{const h=Ut.getJSON("guideReplies",[]);Array.isArray(h)&&i(new Set(h));const y=Ut.getJSON("postGuides",{});if(typeof y=="object"&&y!==null){const b=Object.entries(y).filter(([,v])=>typeof v=="number");u(new Map(b))}},[]);const d=c.useCallback(async(h,y,b)=>{const v=String(b),w=e.find(S=>String(S.id)===v);if(!w){H.error("    .");return}if(l.get(v)!==void 0||w.guideReplyId){H.error("   .");return}if(y===o){H.error("    .");return}if(w.author!==o){H.error("     .");return}const p=new Set(s);p.add(h),i(p);const g=new Map(l);g.set(v,h),u(g),Ut.setJSON("guideReplies",Array.from(p)),Ut.setJSON("postGuides",Object.fromEntries(g));const x=e.map(S=>{if(String(S.id)===v){const C=(S.replies||[]).map(R=>({...R,isGuide:R.id===h}));return{...S,replies:C,guideReplyId:h}}return S});if(t(x),n&&String(n.id)===v){const S=x.find(C=>String(C.id)===v);S&&r(S)}H.success(`${y}  ! `);try{await Fn(to,"selectGuide")({postId:v,replyId:h});const R=(w.replies||[]).find(T=>T.id===h)?.authorUid??null,k=ne.currentUser?.uid;R&&k&&await Fa({toUserUid:R,fromUserUid:k,type:"guide",categoryId:w.categoryId??w.category??null,data:{postId:w.id,replyId:h,userId:k,userName:o}})}catch{H.error("      .")}},[e,n,o,s,l,t,r]),m=c.useCallback(h=>{const y=String(h);if(l.has(y))return!0;const b=e.find(v=>String(v.id)===y);return!!(b&&(b.guideReplyId!==void 0||b.guideReplyId))},[l,e]),f=c.useCallback(h=>s.has(h),[s]);return{handleGuideSelect:d,hasGuide:m,isGuideReply:f}}async function Sv(e){if(!e)return null;const t=Ye(se,"users"),n=zt(t,Ht("nickname","==",e)),r=await mt(n);if(r.empty)return null;const o=r.docs[0],s=o.data();return{uid:o.id,nickname:s?.nickname??e,photoURL:s?.photoURL??""}}async function Cv(e){if(!e)return{followerCount:0,followingCount:0,followingNicknames:[]};const t=ke(se,"users",e),n=await Ot(t),r=(n.exists()?n.data():{})??{},o=typeof r.followerCount=="number"?r.followerCount:0,s=typeof r.followingCount=="number"?r.followingCount:0,i=Ye(se,"follows"),l=zt(i,Ht("followerUid","==",e)),u=await mt(l),d=new Set;return u.forEach(m=>{const h=m.data()?.followingNickname;h&&d.add(h)}),{followerCount:o,followingCount:s,followingNicknames:Array.from(d)}}async function Tv(e){const{currentUid:t,currentNickname:n,targetNickname:r}=e;if(!t)throw new Error("CURRENT_USER_REQUIRED");if(!r)throw new Error("TARGET_NICKNAME_REQUIRED");if(n===r)return{isFollowing:!1,followerCount:0,followingCount:0};const o=await Sv(r);if(!o)throw new Error("TARGET_USER_NOT_FOUND");const s=`${t}_${o.uid}`,i=ke(se,"follows",s);return await ku(se,async u=>(await u.get(i)).exists()?(u.delete(i),{isFollowing:!1,followerCount:0,followingCount:0}):(u.set(i,{followerUid:t,followerNickname:n,followingUid:o.uid,followingNickname:o.nickname,createdAt:Pt()}),{isFollowing:!0,followerCount:0,followingCount:0}))}async function nf(e){if(!e)return[];const t=Ye(se,"follows"),n=zt(t,Ht("followingUid","==",e)),r=await mt(n),o=new Set;return r.forEach(s=>{const l=s.data()?.followerNickname;l&&o.add(l)}),Array.from(o)}async function mc(e){if(!e.length)return[];const t=e.slice(0,10),n=Ye(se,"users"),r=zt(n,Ht("nickname","in",t)),o=await mt(r),s=new Map;return o.forEach(i=>{const l=i.data(),u=l.nickname;let d="";if(typeof l.profileImageUrl=="string"&&l.profileImageUrl)d=l.profileImageUrl;else if(typeof l.photoURL=="string"&&l.photoURL){const m=l.photoURL;m.includes("googleusercontent.com")||m.includes("googleapis.com")||m.includes("lh3.googleusercontent.com")||m.includes("lh4.googleusercontent.com")||m.includes("lh5.googleusercontent.com")||m.includes("lh6.googleusercontent.com")||(d=m)}s.set(u,{nickname:u,avatarUrl:d,bio:l.profileDescription||"",title:l.currentTitle||""})}),e.map(i=>s.get(i)||{nickname:i})}function Nv({userNickname:e}){const[t,n]=c.useState([]),[r,o]=c.useState(0),[s,i]=c.useState([]),[l,u]=c.useState([]),[d,m]=c.useState([]),f=c.useRef(new Set),h=c.useCallback(async p=>{const g=Ye(se,"users"),x=zt(g,Ht("nickname","==",p)),S=await mt(x);if(S.empty)return{exists:!1,isDeleted:!1};const C=S.docs[0].data();return{exists:!0,isDeleted:C?.isDeleted===!0||C?.status==="deleted"||C?.nickname===" "||C?.nickname==="  "||typeof C?.nickname=="string"&&C.nickname.includes(" ")}},[]);c.useEffect(()=>{const p=ne.currentUser?.uid??null;if(!p)return;const g=Ye(se,"follows"),x=zt(g,Ht("followerUid","==",p)),S=no(x,k=>{const T=new Set;k.forEach(N=>{const L=N.data()?.followingNickname;L&&T.add(L)}),n(Array.from(T))},k=>{}),C=ke(se,"users",p),R=no(C,k=>{const T=(k.exists()?k.data():{})??{},N=typeof T.followerCount=="number"?T.followerCount:0;o(N)},k=>{});return()=>{S(),R()}},[]);const y=c.useCallback(async()=>{const p=ne.currentUser?.uid??null;if(p)try{const g=await nf(p);i(g??[]),o(Array.isArray(g)?g.length:0)}catch{}},[]);c.useEffect(()=>{let p=!1;const g=async()=>{try{const x=await mc(s);p||u(x)}catch{}};return s.length?g():u([]),()=>{p=!0}},[s]),c.useEffect(()=>{let p=!1;const g=async()=>{try{const x=await mc(t);p||m(x)}catch{}};return t.length?g():m([]),()=>{p=!0}},[t]);const b=c.useCallback(async p=>{const g=p?.trim();if(!g||g===e)return!1;if(g===" ")return H.error("    ."),!1;if(f.current.has(g))return!1;f.current.add(g);const x=ne.currentUser?.uid??null;if(!x)return H.error("  ."),f.current.delete(g),!1;try{const{exists:S,isDeleted:C}=await h(g);return S?C?(H.error("    ."),n(R=>R.filter(k=>k!==g)),!1):(await Tv({currentUid:x,currentNickname:e,targetNickname:g}),!0):(H.error("     ."),n(R=>R.filter(k=>k!==g)),!1)}catch(S){return(typeof S?.message=="string"?S.message:"").includes("TARGET_USER_NOT_FOUND")?(H.error("     ."),n(R=>R.filter(k=>k!==g))):H.error("   .    ."),!1}finally{f.current.delete(g)}},[e,h]),v=c.useCallback(p=>t.includes(p),[t]),w=t.length;return{followingUsers:t,followerUsers:s,followerCount:r,followingCount:w,handleToggleFollowUser:b,isFollowing:v,fetchFollowerUsers:y,setFollowerCount:o,followerUsersDetailed:l,followingUsersDetailed:d}}const Yr=e=>{const t=ne.currentUser?.uid;return t?`${e}_${t}`:e};function Rv({lumenBalance:e,spendLumens:t}){const[n,r]=c.useState([]),[o,s]=c.useState(""),[i,l]=c.useState(!1);c.useEffect(()=>{const y=Yr("ownedTitles"),b=Yr("currentTitle"),v=Ut.getJSON(y,[]);Array.isArray(v)&&r(v);const w=Ut.getItem(b);w&&s(w)},[]),c.useEffect(()=>{const y=ne.currentUser?.uid;if(!y)return;(async()=>{try{const v=ke(se,"users",y),w=await Ot(v);if(!w.exists()){l(!0);return}const p=w.data();if(Array.isArray(p.ownedTitles)){const g=p.ownedTitles.filter(x=>typeof x=="string");g.length>0&&r(x=>{const S=Array.from(new Set([...x,...g])),C=Yr("ownedTitles");return Ut.setJSON(C,S),S})}if(typeof p.currentTitle=="string"){const g=Yr("currentTitle");p.currentTitle?(s(p.currentTitle),Ut.setItem(g,p.currentTitle)):(s(""),Ut.setItem(g,""))}}catch{}finally{l(!0)}})()},[]),c.useEffect(()=>{if(!i)return;const y=ne.currentUser?.uid;if(!y)return;(async()=>{try{const v=ke(se,"users",y);await Rn(v,{ownedTitles:n,currentTitle:o||null})}catch{}})()},[n,o,i]);const u=c.useCallback(async(y,b)=>i?b<0?(H.error("  ."),!1):n.includes(y)?(H.error("  ."),!1):b>0&&e<b?(H.error(" ."),!1):b>0&&!await t(b," ",y)?!1:(r(v=>{if(v.includes(y))return v;const w=[...v,y];return Ut.setJSON(Yr("ownedTitles"),w),w}),H.success(" ! "),!0):(H.error("!    ."),!1),[n,e,t,i]),d=c.useCallback(y=>!0,[n,o]),m=c.useCallback(()=>!0,[o]),f=c.useCallback((y,b)=>{},[]),h=c.useCallback(y=>n.includes(y),[n]);return{ownedTitles:n,currentTitle:o,titlesSyncReady:i,handleTitlePurchase:u,handleTitleEquip:d,handleTitleUnequip:m,addSpecialTitle:f,hasTitle:h,setOwnedTitles:r,setCurrentTitle:s}}function hc(e){let t;if(e.createdAt instanceof Date)t=e.createdAt;else if(e.createdAt&&typeof e.createdAt.toDate=="function")t=e.createdAt.toDate();else if(typeof e.createdAt=="string"||typeof e.createdAt=="number"){const n=new Date(e.createdAt);t=Number.isNaN(n.getTime())?new Date:n}else t=new Date;return{id:e.id??Date.now(),content:e.content??"",author:e.author??"  ",authorUid:e.authorUid??null,authorAvatar:e.authorAvatar||null,timeAgo:e.timeAgo??"",lanterns:typeof e.lanterns=="number"?e.lanterns:0,isGuide:!!e.isGuide,createdAt:t,authorTitleId:e.authorTitleId??null}}async function Av(e){if(!e)return null;try{const t=Ye(se,"users"),n=zt(t,Ht("nickname","==",e),po(1)),r=await mt(n);return r.empty?null:r.docs[0].id}catch{return null}}function Ev({posts:e,setPosts:t,selectedPost:n,setSelectedPost:r,userNickname:o,clampedTrust:s,updateActivity:i,userProfileImage:l,onRequestLogin:u}){const[d,m]=c.useState(""),f=c.useRef(null),h=c.useCallback(g=>{m(g.target.value)},[]),y=c.useCallback(g=>{g&&(m(x=>{if(!x)return`@${g} `;const S=!x.endsWith(" ");return`${x}${S?" ":""}@${g} `}),f.current&&f.current.focus())},[]),b=c.useCallback(async()=>{if(!n||!d.trim())return;const g=ne.currentUser?.uid;if(!g){u?.();return}if(s<=0){H.error(" 0    .");return}if(cs(d)){H.error("   .");return}let x=null;try{const A=ke(se,"users",g),L=await Ot(A);L.exists()&&(x=L.data().currentTitle??null)}catch{}const S=Date.now(),C={id:S,content:d.trim(),author:o,authorUid:g,authorAvatar:l??null,timeAgo:"",lanterns:0,isGuide:!1,createdAt:new Date,authorTitleId:x},R=[...n.replies||[],C],k=R.map(hc),T={replies:R,replyCount:R.length},N=e.map(A=>String(A.id)===String(n.id)?{...A,...T}:A);t(N),r({...n,...T}),m(""),H.success(" !"),i({replies:1});try{const A=typeof n.id=="string"?n.id:String(n.id);await Rn(ke(se,"posts",A),{replies:k,replyCount:ns(1),lastReplyAt:new Date,lastReplyAuthor:o,lastReplyAuthorUid:g,lastReplyProfileImage:l??null}),await Rn(ke(se,"users",g),{replyCount:ns(1)})}catch{}try{const A=n.authorUid??null;A&&A!==g&&await Fa({toUserUid:A,fromUserUid:g,type:"reply",categoryId:n.categoryId??n.category??null,data:{postId:n.id,replyId:S,userId:g,userName:o,userAvatar:l??null}})}catch{}try{const A=/@([^\s@]+)/g,L=new Set;let O;for(;(O=A.exec(C.content))!==null;){const E=O[1].trim();E&&E!==o&&L.add(E)}if(L.size>0)for(const E of L){if(E===n.author)continue;const j=await Av(E);j&&j!==g&&await Fa({toUserUid:j,fromUserUid:g,type:"mention",categoryId:n.categoryId??n.category??null,data:{postId:n.id,replyId:S,userId:g,userName:o,userAvatar:l??null}})}}catch{}},[n,d,o,e,s,t,r,i,l]),v=c.useCallback(async g=>{if(!n)return;const x=n.replies?.find(k=>k.id===g);if(!x||x.authorUid!==ne.currentUser?.uid){H.error("    .");return}const S=n.replies.filter(k=>k.id!==g),C=S.map(hc),R={replies:S,replyCount:S.length};t(e.map(k=>String(k.id)===String(n.id)?{...k,...R}:k)),r({...n,...R}),H.success(" .");try{const k=typeof n.id=="string"?n.id:String(n.id);await Rn(ke(se,"posts",k),{replies:C,replyCount:C.length})}catch{}},[n,e,t,r]),w=c.useCallback((g,x)=>g?g.replace(/\n{3,}/g,`

`).split(/\n\n/).map((R,k)=>{const T=[],N=/@([^\s@]+)/g;let A=0,L;for(;(L=N.exec(R))!==null;){const O=L[0],E=L[1],j=L.index;j>A&&T.push(R.slice(A,j)),T.push(a.jsx("span",{"data-nickname":E,className:"text-primary font-semibold hover:underline cursor-pointer",onClick:()=>x(E),children:O},`mention-${k}-${j}-${E}`)),A=j+O.length}return A<R.length&&T.push(R.slice(A)),a.jsx("div",{className:"whitespace-pre-wrap",children:T},`paragraph-${k}`)}):null,[]),p=s>0;return{newReplyContent:d,replyInputRef:f,handleReplyContentChange:h,handleInsertMention:y,handleReplySubmit:b,handleDeleteReply:v,renderContentWithMentions:w,canSubmitReply:p,setNewReplyContent:m}}const $a={reply:{label:" ",defaultPriority:"normal",icon:""},lantern:{label:"",defaultPriority:"normal",icon:""},guide:{label:" ",defaultPriority:"high",icon:""},popular:{label:" ",defaultPriority:"normal",icon:""},follow:{label:" ",defaultPriority:"normal",icon:""},mention:{label:"",defaultPriority:"normal",icon:"@"},achievement:{label:"",defaultPriority:"normal",icon:""},system:{label:"",defaultPriority:"high",icon:""}},hs={low:0,normal:1,high:2,urgent:3};function jv(e,t){const n=$a[e]?.label??"",r=u=>{const d=(u??"").trim();return d?d===" "||d===" "||d==="  "?"  ":d:""},o=r(t?.userName),s=t?.lanternCount??1,i=r(t?.titleName),l=t?.lumenReward;switch(e){case"reply":return{title:n,message:`${o}    .`};case"lantern":return{title:n,message:s>1?`${o}  ${s-1}  .`:`${o}  .`};case"guide":return{title:n,message:l&&i?`${i}   . (+${l} )`:`${o}   .`};case"popular":return{title:n,message:"    ."};case"follow":return{title:n,message:`${o}  .`};case"mention":return{title:n,message:`${o}  .`};case"achievement":return{title:n,message:"  ."};case"system":return{title:n,message:"  ."};default:return{title:"",message:"  ."}}}function Oo(e){if(!e)return null;const t=/^(\d{1,2}):(\d{2})$/.exec(e.trim());if(!t)return null;const n=Number(t[1]),r=Number(t[2]);return Number.isNaN(n)||Number.isNaN(r)?null:n*60+r}function Iv(e,t=new Date){if(!e)return!1;let n=!1,r=null,o=null;if(e.doNotDisturb){const i=e.doNotDisturb;n=!!i.enabled,typeof i.start=="string"&&typeof i.end=="string"&&(r=Oo(i.start),o=Oo(i.end)),(r==null||o==null)&&typeof i.startHour=="number"&&typeof i.endHour=="number"&&(r=i.startHour*60,o=i.endHour*60)}if((!n||r==null||o==null)&&e.dndEnabled&&typeof e.dndStart=="string"&&typeof e.dndEnd=="string"&&(n=!0,r=Oo(e.dndStart),o=Oo(e.dndEnd)),!n||r==null||o==null)return!1;const s=t.getHours()*60+t.getMinutes();return r===o?!1:r<o?s>=r&&s<o:s>=r||s<o}function pc(e,t){return t?e.filter(n=>{if(t.type&&t.type!=="all"&&n.type!==t.type||t.types&&t.types.length>0&&!t.types.includes(n.type)||t.onlyUnread&&n.read||typeof t.read=="boolean"&&n.read!==t.read)return!1;if(t.minPriority){const r=hs[t.minPriority]??0;if((hs[n.priority]??0)<r)return!1}return!0}):e}function _v(e){return e.reduce((t,n)=>n.read?t:t+1,0)}function Pv(e){const t={};for(const n of e){const r=n.groupId??(n.data&&n.data.postId?`${n.type}:${String(n.data.postId)}`:n.id);t[r]||(t[r]=[]),t[r].push(n)}return t}function Lv(e){return[...e].sort((t,n)=>{const r=hs[t.priority]??0,o=hs[n.priority]??0;return r!==o?o-r:n.timestamp-t.timestamp})}const gc="notifications",yc="notificationSettings_v2",Xr={enabled:!0,sound:!0,vibration:!0,types:{lantern:!0,reply:!0,guide:!0,mention:!0,follow:!0,system:!0,achievement:!0},pushEnabled:!1,inAppEnabled:!0,doNotDisturb:{enabled:!1,start:"22:00",end:"08:00"}},Et=()=>ne.currentUser?.uid??null,Dv=e=>Ye(se,"user_notifications",e,"items"),ma=(e,t)=>ke(se,"user_notifications",e,"items",t),ha=e=>ke(se,"user_notification_settings",e);function Mv(e={}){const{maxNotifications:t=100,autoDeleteAfterDays:n=30}=e,[r,o]=c.useState([]),[s,i]=c.useState(Xr),[l,u]=c.useState(!0),d=n*24*60*60*1e3,m=c.useCallback(E=>{try{localStorage.setItem(gc,JSON.stringify(E))}catch{}},[]),f=c.useCallback(E=>{try{localStorage.setItem(yc,JSON.stringify(E))}catch{}},[]);c.useEffect(()=>{const E=Et();if(!E){try{const _=localStorage.getItem(gc);if(_){const W=JSON.parse(_),K=Date.now()-d,q=W.filter(G=>G.timestamp>K);o(q.slice(0,t))}const P=localStorage.getItem(yc);P&&i(JSON.parse(P))}catch{}finally{u(!1)}return}u(!0);const j=zt(Dv(E),wu("timestamp","desc"),po(t)),M=no(j,_=>{const P=Date.now(),W=P-d,K=_.docs.map(q=>{const G=q.data(),F=typeof G.timestamp=="number"?G.timestamp:P,X=G.type,J=$a[X];return{id:q.id,type:X,priority:G.priority??J.defaultPriority,title:G.title??"",message:G.message??"",timestamp:F,read:!!G.read,data:G.data,action:G.action,groupId:G.groupId}}).filter(q=>q.timestamp>W);o(K),u(!1)},_=>{u(!1)}),I=no(ha(E),_=>{if(_.exists()){const P=_.data();i({...Xr,...P,types:{...Xr.types,...P.types??{}},doNotDisturb:{...Xr.doNotDisturb,...P.doNotDisturb??{}}})}else i(Xr)},_=>{});return()=>{M(),I()}},[t,d]);const h=c.useCallback(async E=>{const j=Et();if(!j){H.error("     .");return}try{await hn(ha(j),E,{merge:!0})}catch{}},[]),y=c.useCallback(async E=>{const j=Et();if(j)try{await hn(ma(j,E.id),E,{merge:!0})}catch{}},[]),b=c.useCallback(async E=>{const j=Et();if(j)try{await Rn(ma(j,E),{read:!0})}catch{}},[]),v=c.useCallback(async E=>{const j=Et();if(j)try{await li(ma(j,E))}catch{}},[]),w=c.useCallback(async()=>{const E=Et();if(E)try{await Ot(ha(E))}catch{}},[]),p=c.useCallback((E,j,M)=>{if(!s.enabled||!s.types[E]||Iv(s))return null;const{title:I,message:_}=jv(E,j),P=$a[E],W=Date.now(),K={id:W.toString()+Math.random().toString(36).substr(2,9),type:E,priority:M?.priority||P.defaultPriority,title:I,message:_,timestamp:W,read:!1,data:j,action:M?.action,groupId:M?.groupId};return o(q=>{const G=[K,...q].slice(0,t);return Et()?y(K):m(G),G}),s.inAppEnabled&&typeof window<"u"&&window.dispatchEvent(new CustomEvent("showInAppNotification",{detail:K})),s.pushEnabled&&typeof window<"u"&&"Notification"in window&&Notification.permission==="granted"&&Ov(K,s),K},[s,t,m,y]),g=c.useCallback(E=>{o(j=>{const M=j.map(_=>_.id===E?{..._,read:!0}:_);return Et()?b(E):m(M),M})},[m,b]),x=c.useCallback(()=>{o(E=>{const j=E.filter(_=>!_.read),M=E.map(_=>({..._,read:!0}));return Et()?j.forEach(_=>{b(_.id)}):m(M),M})},[m,b]),S=c.useCallback(E=>{o(j=>{const M=j.filter(_=>_.id!==E);return Et()?v(E):m(M),M})},[m,v]),C=c.useCallback(()=>{o([]),Et()?w():m([])},[m,w]),R=c.useCallback(E=>{o(j=>{const M=j.filter(_=>_.type!==E);return Et()||m(M),M})},[m]),k=c.useCallback(E=>{i(j=>{const M={...j,...E,types:{...j.types,...E.types??{}},doNotDisturb:{...j.doNotDisturb,...E.doNotDisturb??{}}};return Et()?h(M):f(M),M})},[f,h]),T=c.useMemo(()=>_v(r),[r]),N=c.useMemo(()=>Pv(r),[r]),A=c.useCallback(E=>pc(r,{type:E}),[r]),L=c.useMemo(()=>pc(r,{read:!1}),[r]);return{notifications:c.useMemo(()=>Lv(r),[r]),groupedNotifications:N,unreadNotifications:L,unreadCount:T,settings:s,isLoading:l,addNotification:p,markAsRead:g,markAllAsRead:x,removeNotification:S,clearAll:C,clearByType:R,updateSettings:k,getNotificationsByType:A}}function Ov(e,t){if(typeof window>"u"||!("Notification"in window))return;const n={body:e.message,icon:"/icon-192.png",badge:"/badge-72.png",tag:e.groupId||e.id,requireInteraction:e.priority==="urgent",silent:!t.sound,data:{notificationId:e.id,type:e.type,...e.data}};e.data?.userAvatar&&(n.icon=e.data.userAvatar);const r=new Notification(e.title,n);r.onclick=()=>{window.focus(),e.action?.url?window.location.href=e.action.url:e.action?.onClick&&e.action.onClick(),r.close()},e.priority!=="urgent"&&setTimeout(()=>{r.close()},5e3)}function zv({posts:e,onPostSelect:t}){const[n,r]=c.useState(!1),{notifications:o,markAsRead:s,markAllAsRead:i,removeNotification:l,clearAll:u}=Mv({maxNotifications:50,autoDeleteAfterDays:30}),d=D.useMemo(()=>o.filter(w=>!w.read).slice(0,30).map(w=>{const p=w.data?.postId,g=typeof p=="string"||typeof p=="number"?p:void 0;let x;if(g!==void 0){const S=e.find(C=>String(C.id)===String(g));S&&(x=S.title)}return{id:w.id,type:w.type,message:w.message,postId:g,postTitle:x,time:new Date(w.timestamp).toLocaleString("ko-KR"),isRead:w.read}}),[o,e]),m=d.length>0,f=c.useCallback(w=>{if(s(w.id),r(!1),w.postId!=null){const p=e.find(g=>String(g.id)===String(w.postId));if(p){t(p);return}}},[s,e,t]),h=c.useCallback(()=>{d.length&&(i(),H.success("   "))},[i,d.length]),y=c.useCallback(w=>{l(w)},[l]),b=c.useCallback(()=>{d.length&&(u(),H.success("  "))},[u,d.length]),v=c.useCallback(w=>{r(p=>w!==void 0?w:!p)},[]);return{notifications:d,hasNotifications:m,showNotifications:n,handleNotificationClick:f,handleMarkAllNotificationsRead:h,removeNotification:y,clearAllNotifications:b,toggleNotifications:v,setShowNotifications:r}}function Uv({posts:e,setPosts:t,userNickname:n,userProfileImage:r,clampedTrust:o,updateActivity:s}){const[i,l]=c.useState(!1),[u,d]=c.useState(!1),m=c.useCallback(p=>o<=0?(H.error(" 0    ."),!1):u||localStorage.getItem("hidePostWarning")==="true"?(p(),!0):(l(!0),!0),[o,u]),f=c.useCallback(p=>{if(u&&localStorage.setItem("hidePostWarning","true"),l(!1),o<=0){H.error(" 0    .");return}p()},[u,o]),h=c.useCallback(async p=>{if(o<=0)return H.error(" 0    ."),null;if(cs(p.title)||cs(p.content))return H.error("   ."),null;const g=ne.currentUser?.uid??null,x={...p,author:n,authorUid:g,authorAvatar:r,createdAt:new Date,hidden:!1,lanterns:0,replies:[],replyCount:0,comments:0,views:0,isBookmarked:!1,isOwner:!0};try{const C={id:(await Kr(Ye(se,"posts"),{...x,createdAt:Pt()})).id,...x,createdAt:new Date};if(t(R=>[C,...R]),g)try{await Rn(ke(se,"users",g),{postCount:ns(1)})}catch{}return p.type==="question"?s({explorePosts:1}):s({sharePosts:1}),H.success(" !"),C}catch{return H.error("  ."),null}},[n,r,o,t,s]),y=c.useCallback(async p=>{const g=String(p),x=e.find(R=>String(R.id)===g);if(!x||x.author!==n)return H.error("    ."),!1;const S=x.createdAt instanceof Date?x.createdAt:new Date(x.createdAt),C=new Date(Date.now()-1800*1e3);if(S<C)return H.error("  30     ."),!1;try{return typeof x.id=="string"&&await li(ke(se,"posts",x.id)),t(R=>R.filter(k=>String(k.id)!==g)),H.success(" ."),!0}catch{return H.error("  ."),!1}},[e,n,t]),b=c.useCallback(async p=>{const g=ne.currentUser?.uid;if(!g)return;const x=String(p),S=e.find(k=>String(k.id)===x);if(!S||typeof S.id!="string")return;const C=ke(se,"posts",S.id),R=ke(se,"postViews",`${S.id}_${g}`);try{await ku(se,async T=>(await T.get(R)).exists()?!1:(T.set(R,{postId:S.id,viewerUid:g,viewedAt:Pt()}),T.update(C,{views:ns(1)}),!0))&&t(T=>T.map(N=>String(N.id)===x?{...N,views:(N.views||0)+1}:N))}catch{}},[e,t]),v=c.useCallback(p=>{const g=String(p),x=e.find(R=>String(R.id)===g);if(!x||x.author!==n)return!1;const S=x.createdAt instanceof Date?x.createdAt:new Date(x.createdAt),C=new Date(Date.now()-1800*1e3);return S>=C},[e,n]);return{showPostWarning:i,setShowPostWarning:l,dontShowWarningAgain:u,setDontShowWarningAgain:d,handleStartWriting:m,handleWarningConfirm:f,createPost:h,deletePost:y,incrementViews:b,canDeletePost:v,checkboxConfig:{checked:u,onCheckedChange:d,label:"  "}}}function Bv({addLumens:e}){const[t,n]=c.useState(30);c.useEffect(()=>{const u=Ut.getNumber("trustScore",30);n(u)},[]),c.useEffect(()=>{const u=ne.currentUser?.uid;if(!u)return;(async()=>{try{const m=ke(se,"users",u),f=await Ot(m);if(f.exists()){const h=f.data();typeof h.trustScore=="number"&&(n(h.trustScore),Ut.setItem("trustScore",String(h.trustScore)))}}catch{}})()},[]);const r=c.useMemo(()=>Math.max(0,Math.min(100,t)),[t]),o=c.useMemo(()=>r<=10?.5:1,[r]),s=r>0,i=c.useCallback(u=>{},[]),l=c.useCallback(async(u,d,m)=>{if(r<=0)return;const f=Math.floor(u*o);f<=0||await e(f,d??"",m)},[e,r,o]);return{trustScore:t,clampedTrust:r,lumenMultiplier:o,updateTrust:i,addLumensWithTrust:l,canWrite:s}}function Fv({posts:e,userNickname:t}){const[n,r]=c.useState(0),[o,s]=c.useState(0),[i,l]=c.useState(0),[u,d]=c.useState(""),[m,f]=c.useState(""),h=6e4,y=c.useRef(0),b=c.useCallback(async()=>{const k=ne.currentUser?.uid;if(k)try{const T=ke(se,"users",k),N=await Ot(T);if(!N.exists())return;const A=N.data();typeof A.guideCount=="number"&&l(A.guideCount),typeof A.postLanternsReceived=="number"&&r(A.postLanternsReceived),typeof A.replyLanternsReceived=="number"&&s(A.replyLanternsReceived),typeof A.profileDescription=="string"&&d(A.profileDescription),typeof A.profileInterests=="string"&&f(A.profileInterests),y.current=Date.now()}catch{}},[]);c.useEffect(()=>{if(!ne.currentUser?.uid)return;b();const T=setInterval(b,h);return()=>clearInterval(T)},[b]);const v=c.useCallback(async k=>{d(k);const T=ne.currentUser?.uid;if(T)try{await Rn(ke(se,"users",T),{profileDescription:k})}catch{}},[]),w=c.useCallback(async k=>{f(k);const T=ne.currentUser?.uid;if(T)try{await Rn(ke(se,"users",T),{profileInterests:k})}catch{}},[]),{weeklyGuideRanking:p,totalGuideRanking:g,weeklyLanternRanking:x}=c.useMemo(()=>{const k={},T={},N={},A=new Date;A.setDate(A.getDate()-7);const L=A.getTime();return e.forEach(O=>{const j=(O.createdAt instanceof Date?O.createdAt:new Date(O.createdAt)).getTime(),M=j>=L;if(M&&O.lanterns>0&&O.author){const I=O.authorUid||O.author;N[I]={author:O.author,authorUid:O.authorUid||null,count:(N[I]?.count??0)+O.lanterns}}Array.isArray(O.replies)&&O.replies.forEach(I=>{if(I.isAi)return;const _=I.author;if(!_)return;const P=typeof I.authorUid=="string"?I.authorUid:null,W=P||_;I.isGuide&&(T[W]={author:_,authorUid:P,count:(T[W]?.count??0)+1},M&&(k[W]={author:_,authorUid:P,count:(k[W]?.count??0)+1}));const K=typeof I.lanterns=="number"?I.lanterns:0;if(K>0){const q=I.createdAt instanceof Date?I.createdAt:null;(q?q.getTime():j)>=L&&(N[W]={author:_,authorUid:P,count:(N[W]?.count??0)+K})}})}),{weeklyGuideRanking:k,totalGuideRanking:T,weeklyLanternRanking:N}},[e]),S=c.useMemo(()=>e.filter(k=>k.author===t),[e,t]),C=c.useMemo(()=>e.flatMap(k=>(k.replies||[]).filter(T=>T.author===t).map(T=>({...T,postTitle:k.title,postAuthor:k.author,postId:k.id}))),[e,t]),R=c.useMemo(()=>Object.values(p).sort((k,T)=>T.count-k.count).slice(0,10).map((k,T)=>({rank:T+1,nickname:k.author,guideCount:k.count,uid:k.authorUid})),[p]);return{userPostLanterns:n,userReplyLanterns:o,userGuideCount:i,profileDescription:u,profileInterests:m,handleProfileDescriptionChange:v,handleProfileInterestsChange:w,weeklyGuideRanking:p,totalGuideRanking:g,weeklyLanternRanking:x,userPosts:S,userReplies:C,topGuideUsers:R}}function rf(){const[e,t]=c.useState(typeof navigator<"u"?navigator.onLine:!0),[n,r]=c.useState(!1),[o,s]=c.useState({});return c.useEffect(()=>{const i=()=>{if("connection"in navigator){const m=navigator.connection;s({downlink:m?.downlink,effectiveType:m?.effectiveType,saveData:m?.saveData})}},l=()=>{t(!0),e||(r(!0),setTimeout(()=>r(!1),5e3)),i()},u=()=>{t(!1),i()},d=()=>{i()};return i(),window.addEventListener("online",l),window.addEventListener("offline",u),"connection"in navigator&&navigator.connection?.addEventListener("change",d),()=>{window.removeEventListener("online",l),window.removeEventListener("offline",u),"connection"in navigator&&navigator.connection?.removeEventListener("change",d)}},[e]),{isOnline:e,wasOffline:n,...o}}function $v({viewedNickname:e,currentUserNickname:t}){const[n,r]=c.useState(null);return c.useEffect(()=>{if(!e||e===t){r(null);return}let o=!1;return(async()=>{try{r(w=>w?{...w,loading:!0}:{followerCount:0,followingCount:0,followerUsers:[],followingUsers:[],loading:!0});const i=Ye(se,"users"),l=zt(i,Ht("nickname","==",e)),u=await mt(l);if(o)return;if(u.empty){r({followerCount:0,followingCount:0,followerUsers:[],followingUsers:[],loading:!1});return}const d=u.docs[0],f=d.data().uid??d.id,h=await Cv(f);if(o)return;const y=h.followerCount??0,b=h.followingNicknames??[],v=await nf(f);if(o)return;r({followerCount:y,followingCount:b.length,followerUsers:Array.isArray(v)?v:[],followingUsers:b,loading:!1})}catch{o||r({followerCount:0,followingCount:0,followerUsers:[],followingUsers:[],loading:!1})}})(),()=>{o=!0}},[e,t]),n}function Hv({threshold:e=.1,rootMargin:t="50px",enabled:n=!0}={}){const r=c.useRef(null),[o,s]=c.useState(!1),[i,l]=c.useState(!1);return c.useEffect(()=>{if(!n)return;const u=r.current;if(!u)return;const d=new IntersectionObserver(m=>{m.forEach(f=>{s(f.isIntersecting),f.isIntersecting&&!i&&l(!0)})},{threshold:e,rootMargin:t});return d.observe(u),()=>{d.unobserve(u),d.disconnect()}},[e,t,n,i]),{targetRef:r,isIntersecting:o,hasIntersected:i}}function Wv(e,t){if(!e||typeof e!="string")return"";try{const n=new URL(e);return t&&n.searchParams.set("v",String(t)),n.toString()}catch{return e}}function Vv(e,t){return t==="eager"?"high":e&&e>=80?"normal":"low"}function Gv(e){return e==="high"?"high":e==="low"?"low":"auto"}function zi({src:e,alt:t,fallbackText:n,nickname:r,className:o="",imageClassName:s="",size:i,loading:l="lazy",decoding:u="async",onClick:d,rootMargin:m="50px",threshold:f=.01,cacheVersion:h}){const y=c.useMemo(()=>(globalThis.__AVATAR_LOADED_CACHE__||(globalThis.__AVATAR_LOADED_CACHE__=new Set),globalThis.__AVATAR_LOADED_CACHE__),[]),[b,v]=c.useState(!1),[w,p]=c.useState(l==="eager"),g=c.useMemo(()=>`https://api.dicebear.com/7.x/notionists/svg?seed=${encodeURIComponent(r||n||"user")}&backgroundColor=transparent`,[r,n]),x=c.useMemo(()=>{if(typeof e=="string"){const O=e.trim();if(O.length>0)return Wv(O,h)}return g},[e,h,g]),{targetRef:S,isIntersecting:C}=Hv({threshold:f,rootMargin:m,enabled:l==="lazy"&&!w}),R=c.useMemo(()=>Vv(i,l),[i,l]),k=c.useMemo(()=>Gv(R),[R]);c.useEffect(()=>{const O=x?y.has(x):!1;v(O),l==="eager"||O?p(!0):x&&p(!1)},[x,l,y]),c.useEffect(()=>{w||l==="eager"||C&&p(!0)},[C,l,w]),c.useEffect(()=>{if(w||l==="eager"||!x)return;const O=setTimeout(()=>p(!0),600);return()=>clearTimeout(O)},[w,l,x]);const T=!!x&&w,N="w-full h-full object-cover",A=b?"lazy-image-loaded":"image-skeleton",L=i?{width:i,height:i,minWidth:i,minHeight:i}:void 0;return a.jsxs(Ii,{ref:l==="lazy"?S:void 0,className:o,style:L,onClick:d,children:[T&&a.jsx(_i,{src:x,alt:t,loading:l,decoding:u,...k&&{fetchpriority:k},onLoad:()=>{x&&y.add(x),v(!0)},onError:()=>v(!0),className:`${N} ${s} ${A}`,sizes:i?`${i}px`:void 0}),a.jsx(Pi,{className:"w-full h-full bg-gradient-to-br from-blue-500 to-purple-600 text-white text-xl flex items-center justify-center rounded-full",children:n||"?"})]})}const qv=md("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}}),An=c.forwardRef(({className:e,variant:t,asChild:n=!1,...r},o)=>{const s=n?Zu:"span";return a.jsx(s,{ref:o,"data-slot":"badge",className:nt(qv({variant:t}),e),...r})});An.displayName="Badge";const of=c.forwardRef(({className:e,...t},n)=>a.jsx("textarea",{ref:n,"data-slot":"textarea",className:nt("resize-none border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-input-background px-3 py-2 text-base transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...t}));of.displayName="Textarea";function Yv(e,t=globalThis?.document){const n=St(e);c.useEffect(()=>{const r=o=>{o.key==="Escape"&&n(o)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var Xv="DismissableLayer",Ha="dismissableLayer.update",Kv="dismissableLayer.pointerDownOutside",Jv="dismissableLayer.focusOutside",xc,sf=c.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Ui=c.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:o,onFocusOutside:s,onInteractOutside:i,onDismiss:l,...u}=e,d=c.useContext(sf),[m,f]=c.useState(null),h=m?.ownerDocument??globalThis?.document,[,y]=c.useState({}),b=ot(t,k=>f(k)),v=Array.from(d.layers),[w]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),p=v.indexOf(w),g=m?v.indexOf(m):-1,x=d.layersWithOutsidePointerEventsDisabled.size>0,S=g>=p,C=eb(k=>{const T=k.target,N=[...d.branches].some(A=>A.contains(T));!S||N||(o?.(k),i?.(k),k.defaultPrevented||l?.())},h),R=tb(k=>{const T=k.target;[...d.branches].some(A=>A.contains(T))||(s?.(k),i?.(k),k.defaultPrevented||l?.())},h);return Yv(k=>{g===d.layers.size-1&&(r?.(k),!k.defaultPrevented&&l&&(k.preventDefault(),l()))},h),c.useEffect(()=>{if(m)return n&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(xc=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(m)),d.layers.add(m),vc(),()=>{n&&d.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=xc)}},[m,h,n,d]),c.useEffect(()=>()=>{m&&(d.layers.delete(m),d.layersWithOutsidePointerEventsDisabled.delete(m),vc())},[m,d]),c.useEffect(()=>{const k=()=>y({});return document.addEventListener(Ha,k),()=>document.removeEventListener(Ha,k)},[]),a.jsx(rt.div,{...u,ref:b,style:{pointerEvents:x?S?"auto":"none":void 0,...e.style},onFocusCapture:Fe(e.onFocusCapture,R.onFocusCapture),onBlurCapture:Fe(e.onBlurCapture,R.onBlurCapture),onPointerDownCapture:Fe(e.onPointerDownCapture,C.onPointerDownCapture)})});Ui.displayName=Xv;var Zv="DismissableLayerBranch",Qv=c.forwardRef((e,t)=>{const n=c.useContext(sf),r=c.useRef(null),o=ot(t,r);return c.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),a.jsx(rt.div,{...e,ref:o})});Qv.displayName=Zv;function eb(e,t=globalThis?.document){const n=St(e),r=c.useRef(!1),o=c.useRef(()=>{});return c.useEffect(()=>{const s=l=>{if(l.target&&!r.current){let u=function(){af(Kv,n,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",o.current),o.current=u,t.addEventListener("click",o.current,{once:!0})):u()}else t.removeEventListener("click",o.current);r.current=!1},i=window.setTimeout(()=>{t.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(i),t.removeEventListener("pointerdown",s),t.removeEventListener("click",o.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function tb(e,t=globalThis?.document){const n=St(e),r=c.useRef(!1);return c.useEffect(()=>{const o=s=>{s.target&&!r.current&&af(Jv,n,{originalEvent:s},{discrete:!1})};return t.addEventListener("focusin",o),()=>t.removeEventListener("focusin",o)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function vc(){const e=new CustomEvent(Ha);document.dispatchEvent(e)}function af(e,t,n,{discrete:r}){const o=n.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&o.addEventListener(e,t,{once:!0}),r?cx(o,s):o.dispatchEvent(s)}var nb=oi[" useId ".trim().toString()]||(()=>{}),rb=0;function lf(e){const[t,n]=c.useState(nb());return Vt(()=>{n(r=>r??String(rb++))},[e]),e||(t?`radix-${t}`:"")}const ob=["top","right","bottom","left"],$n=Math.min,It=Math.max,ps=Math.round,zo=Math.floor,mn=e=>({x:e,y:e}),sb={left:"right",right:"left",bottom:"top",top:"bottom"},ab={start:"end",end:"start"};function Wa(e,t,n){return It(e,$n(t,n))}function jn(e,t){return typeof e=="function"?e(t):e}function In(e){return e.split("-")[0]}function Or(e){return e.split("-")[1]}function Bi(e){return e==="x"?"y":"x"}function Fi(e){return e==="y"?"height":"width"}const ib=new Set(["top","bottom"]);function dn(e){return ib.has(In(e))?"y":"x"}function $i(e){return Bi(dn(e))}function lb(e,t,n){n===void 0&&(n=!1);const r=Or(e),o=$i(e),s=Fi(o);let i=o==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(i=gs(i)),[i,gs(i)]}function cb(e){const t=gs(e);return[Va(e),t,Va(t)]}function Va(e){return e.replace(/start|end/g,t=>ab[t])}const bc=["left","right"],wc=["right","left"],ub=["top","bottom"],db=["bottom","top"];function fb(e,t,n){switch(e){case"top":case"bottom":return n?t?wc:bc:t?bc:wc;case"left":case"right":return t?ub:db;default:return[]}}function mb(e,t,n,r){const o=Or(e);let s=fb(In(e),n==="start",r);return o&&(s=s.map(i=>i+"-"+o),t&&(s=s.concat(s.map(Va)))),s}function gs(e){return e.replace(/left|right|bottom|top/g,t=>sb[t])}function hb(e){return{top:0,right:0,bottom:0,left:0,...e}}function cf(e){return typeof e!="number"?hb(e):{top:e,right:e,bottom:e,left:e}}function ys(e){const{x:t,y:n,width:r,height:o}=e;return{width:r,height:o,top:n,left:t,right:t+r,bottom:n+o,x:t,y:n}}function kc(e,t,n){let{reference:r,floating:o}=e;const s=dn(t),i=$i(t),l=Fi(i),u=In(t),d=s==="y",m=r.x+r.width/2-o.width/2,f=r.y+r.height/2-o.height/2,h=r[l]/2-o[l]/2;let y;switch(u){case"top":y={x:m,y:r.y-o.height};break;case"bottom":y={x:m,y:r.y+r.height};break;case"right":y={x:r.x+r.width,y:f};break;case"left":y={x:r.x-o.width,y:f};break;default:y={x:r.x,y:r.y}}switch(Or(t)){case"start":y[i]-=h*(n&&d?-1:1);break;case"end":y[i]+=h*(n&&d?-1:1);break}return y}const pb=async(e,t,n)=>{const{placement:r="bottom",strategy:o="absolute",middleware:s=[],platform:i}=n,l=s.filter(Boolean),u=await(i.isRTL==null?void 0:i.isRTL(t));let d=await i.getElementRects({reference:e,floating:t,strategy:o}),{x:m,y:f}=kc(d,r,u),h=r,y={},b=0;for(let v=0;v<l.length;v++){const{name:w,fn:p}=l[v],{x:g,y:x,data:S,reset:C}=await p({x:m,y:f,initialPlacement:r,placement:h,strategy:o,middlewareData:y,rects:d,platform:i,elements:{reference:e,floating:t}});m=g??m,f=x??f,y={...y,[w]:{...y[w],...S}},C&&b<=50&&(b++,typeof C=="object"&&(C.placement&&(h=C.placement),C.rects&&(d=C.rects===!0?await i.getElementRects({reference:e,floating:t,strategy:o}):C.rects),{x:m,y:f}=kc(d,h,u)),v=-1)}return{x:m,y:f,placement:h,strategy:o,middlewareData:y}};async function oo(e,t){var n;t===void 0&&(t={});const{x:r,y:o,platform:s,rects:i,elements:l,strategy:u}=e,{boundary:d="clippingAncestors",rootBoundary:m="viewport",elementContext:f="floating",altBoundary:h=!1,padding:y=0}=jn(t,e),b=cf(y),w=l[h?f==="floating"?"reference":"floating":f],p=ys(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(w)))==null||n?w:w.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(l.floating)),boundary:d,rootBoundary:m,strategy:u})),g=f==="floating"?{x:r,y:o,width:i.floating.width,height:i.floating.height}:i.reference,x=await(s.getOffsetParent==null?void 0:s.getOffsetParent(l.floating)),S=await(s.isElement==null?void 0:s.isElement(x))?await(s.getScale==null?void 0:s.getScale(x))||{x:1,y:1}:{x:1,y:1},C=ys(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:g,offsetParent:x,strategy:u}):g);return{top:(p.top-C.top+b.top)/S.y,bottom:(C.bottom-p.bottom+b.bottom)/S.y,left:(p.left-C.left+b.left)/S.x,right:(C.right-p.right+b.right)/S.x}}const gb=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:o,rects:s,platform:i,elements:l,middlewareData:u}=t,{element:d,padding:m=0}=jn(e,t)||{};if(d==null)return{};const f=cf(m),h={x:n,y:r},y=$i(o),b=Fi(y),v=await i.getDimensions(d),w=y==="y",p=w?"top":"left",g=w?"bottom":"right",x=w?"clientHeight":"clientWidth",S=s.reference[b]+s.reference[y]-h[y]-s.floating[b],C=h[y]-s.reference[y],R=await(i.getOffsetParent==null?void 0:i.getOffsetParent(d));let k=R?R[x]:0;(!k||!await(i.isElement==null?void 0:i.isElement(R)))&&(k=l.floating[x]||s.floating[b]);const T=S/2-C/2,N=k/2-v[b]/2-1,A=$n(f[p],N),L=$n(f[g],N),O=A,E=k-v[b]-L,j=k/2-v[b]/2+T,M=Wa(O,j,E),I=!u.arrow&&Or(o)!=null&&j!==M&&s.reference[b]/2-(j<O?A:L)-v[b]/2<0,_=I?j<O?j-O:j-E:0;return{[y]:h[y]+_,data:{[y]:M,centerOffset:j-M-_,...I&&{alignmentOffset:_}},reset:I}}}),yb=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:o,middlewareData:s,rects:i,initialPlacement:l,platform:u,elements:d}=t,{mainAxis:m=!0,crossAxis:f=!0,fallbackPlacements:h,fallbackStrategy:y="bestFit",fallbackAxisSideDirection:b="none",flipAlignment:v=!0,...w}=jn(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const p=In(o),g=dn(l),x=In(l)===l,S=await(u.isRTL==null?void 0:u.isRTL(d.floating)),C=h||(x||!v?[gs(l)]:cb(l)),R=b!=="none";!h&&R&&C.push(...mb(l,v,b,S));const k=[l,...C],T=await oo(t,w),N=[];let A=((r=s.flip)==null?void 0:r.overflows)||[];if(m&&N.push(T[p]),f){const j=lb(o,i,S);N.push(T[j[0]],T[j[1]])}if(A=[...A,{placement:o,overflows:N}],!N.every(j=>j<=0)){var L,O;const j=(((L=s.flip)==null?void 0:L.index)||0)+1,M=k[j];if(M&&(!(f==="alignment"?g!==dn(M):!1)||A.every(P=>dn(P.placement)===g?P.overflows[0]>0:!0)))return{data:{index:j,overflows:A},reset:{placement:M}};let I=(O=A.filter(_=>_.overflows[0]<=0).sort((_,P)=>_.overflows[1]-P.overflows[1])[0])==null?void 0:O.placement;if(!I)switch(y){case"bestFit":{var E;const _=(E=A.filter(P=>{if(R){const W=dn(P.placement);return W===g||W==="y"}return!0}).map(P=>[P.placement,P.overflows.filter(W=>W>0).reduce((W,K)=>W+K,0)]).sort((P,W)=>P[1]-W[1])[0])==null?void 0:E[0];_&&(I=_);break}case"initialPlacement":I=l;break}if(o!==I)return{reset:{placement:I}}}return{}}}};function Sc(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Cc(e){return ob.some(t=>e[t]>=0)}const xb=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...o}=jn(e,t);switch(r){case"referenceHidden":{const s=await oo(t,{...o,elementContext:"reference"}),i=Sc(s,n.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:Cc(i)}}}case"escaped":{const s=await oo(t,{...o,altBoundary:!0}),i=Sc(s,n.floating);return{data:{escapedOffsets:i,escaped:Cc(i)}}}default:return{}}}}},uf=new Set(["left","top"]);async function vb(e,t){const{placement:n,platform:r,elements:o}=e,s=await(r.isRTL==null?void 0:r.isRTL(o.floating)),i=In(n),l=Or(n),u=dn(n)==="y",d=uf.has(i)?-1:1,m=s&&u?-1:1,f=jn(t,e);let{mainAxis:h,crossAxis:y,alignmentAxis:b}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof b=="number"&&(y=l==="end"?b*-1:b),u?{x:y*m,y:h*d}:{x:h*d,y:y*m}}const bb=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:o,y:s,placement:i,middlewareData:l}=t,u=await vb(t,e);return i===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:o+u.x,y:s+u.y,data:{...u,placement:i}}}}},wb=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:o}=t,{mainAxis:s=!0,crossAxis:i=!1,limiter:l={fn:w=>{let{x:p,y:g}=w;return{x:p,y:g}}},...u}=jn(e,t),d={x:n,y:r},m=await oo(t,u),f=dn(In(o)),h=Bi(f);let y=d[h],b=d[f];if(s){const w=h==="y"?"top":"left",p=h==="y"?"bottom":"right",g=y+m[w],x=y-m[p];y=Wa(g,y,x)}if(i){const w=f==="y"?"top":"left",p=f==="y"?"bottom":"right",g=b+m[w],x=b-m[p];b=Wa(g,b,x)}const v=l.fn({...t,[h]:y,[f]:b});return{...v,data:{x:v.x-n,y:v.y-r,enabled:{[h]:s,[f]:i}}}}}},kb=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:o,rects:s,middlewareData:i}=t,{offset:l=0,mainAxis:u=!0,crossAxis:d=!0}=jn(e,t),m={x:n,y:r},f=dn(o),h=Bi(f);let y=m[h],b=m[f];const v=jn(l,t),w=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(u){const x=h==="y"?"height":"width",S=s.reference[h]-s.floating[x]+w.mainAxis,C=s.reference[h]+s.reference[x]-w.mainAxis;y<S?y=S:y>C&&(y=C)}if(d){var p,g;const x=h==="y"?"width":"height",S=uf.has(In(o)),C=s.reference[f]-s.floating[x]+(S&&((p=i.offset)==null?void 0:p[f])||0)+(S?0:w.crossAxis),R=s.reference[f]+s.reference[x]+(S?0:((g=i.offset)==null?void 0:g[f])||0)-(S?w.crossAxis:0);b<C?b=C:b>R&&(b=R)}return{[h]:y,[f]:b}}}},Sb=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:o,rects:s,platform:i,elements:l}=t,{apply:u=()=>{},...d}=jn(e,t),m=await oo(t,d),f=In(o),h=Or(o),y=dn(o)==="y",{width:b,height:v}=s.floating;let w,p;f==="top"||f==="bottom"?(w=f,p=h===(await(i.isRTL==null?void 0:i.isRTL(l.floating))?"start":"end")?"left":"right"):(p=f,w=h==="end"?"top":"bottom");const g=v-m.top-m.bottom,x=b-m.left-m.right,S=$n(v-m[w],g),C=$n(b-m[p],x),R=!t.middlewareData.shift;let k=S,T=C;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(T=x),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(k=g),R&&!h){const A=It(m.left,0),L=It(m.right,0),O=It(m.top,0),E=It(m.bottom,0);y?T=b-2*(A!==0||L!==0?A+L:It(m.left,m.right)):k=v-2*(O!==0||E!==0?O+E:It(m.top,m.bottom))}await u({...t,availableWidth:T,availableHeight:k});const N=await i.getDimensions(l.floating);return b!==N.width||v!==N.height?{reset:{rects:!0}}:{}}}};function _s(){return typeof window<"u"}function zr(e){return df(e)?(e.nodeName||"").toLowerCase():"#document"}function Dt(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function vn(e){var t;return(t=(df(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function df(e){return _s()?e instanceof Node||e instanceof Dt(e).Node:!1}function nn(e){return _s()?e instanceof Element||e instanceof Dt(e).Element:!1}function pn(e){return _s()?e instanceof HTMLElement||e instanceof Dt(e).HTMLElement:!1}function Tc(e){return!_s()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Dt(e).ShadowRoot}const Cb=new Set(["inline","contents"]);function yo(e){const{overflow:t,overflowX:n,overflowY:r,display:o}=rn(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!Cb.has(o)}const Tb=new Set(["table","td","th"]);function Nb(e){return Tb.has(zr(e))}const Rb=[":popover-open",":modal"];function Ps(e){return Rb.some(t=>{try{return e.matches(t)}catch{return!1}})}const Ab=["transform","translate","scale","rotate","perspective"],Eb=["transform","translate","scale","rotate","perspective","filter"],jb=["paint","layout","strict","content"];function Hi(e){const t=Wi(),n=nn(e)?rn(e):e;return Ab.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||Eb.some(r=>(n.willChange||"").includes(r))||jb.some(r=>(n.contain||"").includes(r))}function Ib(e){let t=Hn(e);for(;pn(t)&&!_r(t);){if(Hi(t))return t;if(Ps(t))return null;t=Hn(t)}return null}function Wi(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const _b=new Set(["html","body","#document"]);function _r(e){return _b.has(zr(e))}function rn(e){return Dt(e).getComputedStyle(e)}function Ls(e){return nn(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Hn(e){if(zr(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Tc(e)&&e.host||vn(e);return Tc(t)?t.host:t}function ff(e){const t=Hn(e);return _r(t)?e.ownerDocument?e.ownerDocument.body:e.body:pn(t)&&yo(t)?t:ff(t)}function so(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const o=ff(e),s=o===((r=e.ownerDocument)==null?void 0:r.body),i=Dt(o);if(s){const l=Ga(i);return t.concat(i,i.visualViewport||[],yo(o)?o:[],l&&n?so(l):[])}return t.concat(o,so(o,[],n))}function Ga(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function mf(e){const t=rn(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const o=pn(e),s=o?e.offsetWidth:n,i=o?e.offsetHeight:r,l=ps(n)!==s||ps(r)!==i;return l&&(n=s,r=i),{width:n,height:r,$:l}}function Vi(e){return nn(e)?e:e.contextElement}function Rr(e){const t=Vi(e);if(!pn(t))return mn(1);const n=t.getBoundingClientRect(),{width:r,height:o,$:s}=mf(t);let i=(s?ps(n.width):n.width)/r,l=(s?ps(n.height):n.height)/o;return(!i||!Number.isFinite(i))&&(i=1),(!l||!Number.isFinite(l))&&(l=1),{x:i,y:l}}const Pb=mn(0);function hf(e){const t=Dt(e);return!Wi()||!t.visualViewport?Pb:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Lb(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Dt(e)?!1:t}function ur(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const o=e.getBoundingClientRect(),s=Vi(e);let i=mn(1);t&&(r?nn(r)&&(i=Rr(r)):i=Rr(e));const l=Lb(s,n,r)?hf(s):mn(0);let u=(o.left+l.x)/i.x,d=(o.top+l.y)/i.y,m=o.width/i.x,f=o.height/i.y;if(s){const h=Dt(s),y=r&&nn(r)?Dt(r):r;let b=h,v=Ga(b);for(;v&&r&&y!==b;){const w=Rr(v),p=v.getBoundingClientRect(),g=rn(v),x=p.left+(v.clientLeft+parseFloat(g.paddingLeft))*w.x,S=p.top+(v.clientTop+parseFloat(g.paddingTop))*w.y;u*=w.x,d*=w.y,m*=w.x,f*=w.y,u+=x,d+=S,b=Dt(v),v=Ga(b)}}return ys({width:m,height:f,x:u,y:d})}function Ds(e,t){const n=Ls(e).scrollLeft;return t?t.left+n:ur(vn(e)).left+n}function pf(e,t){const n=e.getBoundingClientRect(),r=n.left+t.scrollLeft-Ds(e,n),o=n.top+t.scrollTop;return{x:r,y:o}}function Db(e){let{elements:t,rect:n,offsetParent:r,strategy:o}=e;const s=o==="fixed",i=vn(r),l=t?Ps(t.floating):!1;if(r===i||l&&s)return n;let u={scrollLeft:0,scrollTop:0},d=mn(1);const m=mn(0),f=pn(r);if((f||!f&&!s)&&((zr(r)!=="body"||yo(i))&&(u=Ls(r)),pn(r))){const y=ur(r);d=Rr(r),m.x=y.x+r.clientLeft,m.y=y.y+r.clientTop}const h=i&&!f&&!s?pf(i,u):mn(0);return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-u.scrollLeft*d.x+m.x+h.x,y:n.y*d.y-u.scrollTop*d.y+m.y+h.y}}function Mb(e){return Array.from(e.getClientRects())}function Ob(e){const t=vn(e),n=Ls(e),r=e.ownerDocument.body,o=It(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=It(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let i=-n.scrollLeft+Ds(e);const l=-n.scrollTop;return rn(r).direction==="rtl"&&(i+=It(t.clientWidth,r.clientWidth)-o),{width:o,height:s,x:i,y:l}}const Nc=25;function zb(e,t){const n=Dt(e),r=vn(e),o=n.visualViewport;let s=r.clientWidth,i=r.clientHeight,l=0,u=0;if(o){s=o.width,i=o.height;const m=Wi();(!m||m&&t==="fixed")&&(l=o.offsetLeft,u=o.offsetTop)}const d=Ds(r);if(d<=0){const m=r.ownerDocument,f=m.body,h=getComputedStyle(f),y=m.compatMode==="CSS1Compat"&&parseFloat(h.marginLeft)+parseFloat(h.marginRight)||0,b=Math.abs(r.clientWidth-f.clientWidth-y);b<=Nc&&(s-=b)}else d<=Nc&&(s+=d);return{width:s,height:i,x:l,y:u}}const Ub=new Set(["absolute","fixed"]);function Bb(e,t){const n=ur(e,!0,t==="fixed"),r=n.top+e.clientTop,o=n.left+e.clientLeft,s=pn(e)?Rr(e):mn(1),i=e.clientWidth*s.x,l=e.clientHeight*s.y,u=o*s.x,d=r*s.y;return{width:i,height:l,x:u,y:d}}function Rc(e,t,n){let r;if(t==="viewport")r=zb(e,n);else if(t==="document")r=Ob(vn(e));else if(nn(t))r=Bb(t,n);else{const o=hf(e);r={x:t.x-o.x,y:t.y-o.y,width:t.width,height:t.height}}return ys(r)}function gf(e,t){const n=Hn(e);return n===t||!nn(n)||_r(n)?!1:rn(n).position==="fixed"||gf(n,t)}function Fb(e,t){const n=t.get(e);if(n)return n;let r=so(e,[],!1).filter(l=>nn(l)&&zr(l)!=="body"),o=null;const s=rn(e).position==="fixed";let i=s?Hn(e):e;for(;nn(i)&&!_r(i);){const l=rn(i),u=Hi(i);!u&&l.position==="fixed"&&(o=null),(s?!u&&!o:!u&&l.position==="static"&&!!o&&Ub.has(o.position)||yo(i)&&!u&&gf(e,i))?r=r.filter(m=>m!==i):o=l,i=Hn(i)}return t.set(e,r),r}function $b(e){let{element:t,boundary:n,rootBoundary:r,strategy:o}=e;const i=[...n==="clippingAncestors"?Ps(t)?[]:Fb(t,this._c):[].concat(n),r],l=i[0],u=i.reduce((d,m)=>{const f=Rc(t,m,o);return d.top=It(f.top,d.top),d.right=$n(f.right,d.right),d.bottom=$n(f.bottom,d.bottom),d.left=It(f.left,d.left),d},Rc(t,l,o));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function Hb(e){const{width:t,height:n}=mf(e);return{width:t,height:n}}function Wb(e,t,n){const r=pn(t),o=vn(t),s=n==="fixed",i=ur(e,!0,s,t);let l={scrollLeft:0,scrollTop:0};const u=mn(0);function d(){u.x=Ds(o)}if(r||!r&&!s)if((zr(t)!=="body"||yo(o))&&(l=Ls(t)),r){const y=ur(t,!0,s,t);u.x=y.x+t.clientLeft,u.y=y.y+t.clientTop}else o&&d();s&&!r&&o&&d();const m=o&&!r&&!s?pf(o,l):mn(0),f=i.left+l.scrollLeft-u.x-m.x,h=i.top+l.scrollTop-u.y-m.y;return{x:f,y:h,width:i.width,height:i.height}}function pa(e){return rn(e).position==="static"}function Ac(e,t){if(!pn(e)||rn(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return vn(e)===n&&(n=n.ownerDocument.body),n}function yf(e,t){const n=Dt(e);if(Ps(e))return n;if(!pn(e)){let o=Hn(e);for(;o&&!_r(o);){if(nn(o)&&!pa(o))return o;o=Hn(o)}return n}let r=Ac(e,t);for(;r&&Nb(r)&&pa(r);)r=Ac(r,t);return r&&_r(r)&&pa(r)&&!Hi(r)?n:r||Ib(e)||n}const Vb=async function(e){const t=this.getOffsetParent||yf,n=this.getDimensions,r=await n(e.floating);return{reference:Wb(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Gb(e){return rn(e).direction==="rtl"}const qb={convertOffsetParentRelativeRectToViewportRelativeRect:Db,getDocumentElement:vn,getClippingRect:$b,getOffsetParent:yf,getElementRects:Vb,getClientRects:Mb,getDimensions:Hb,getScale:Rr,isElement:nn,isRTL:Gb};function xf(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function Yb(e,t){let n=null,r;const o=vn(e);function s(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function i(l,u){l===void 0&&(l=!1),u===void 0&&(u=1),s();const d=e.getBoundingClientRect(),{left:m,top:f,width:h,height:y}=d;if(l||t(),!h||!y)return;const b=zo(f),v=zo(o.clientWidth-(m+h)),w=zo(o.clientHeight-(f+y)),p=zo(m),x={rootMargin:-b+"px "+-v+"px "+-w+"px "+-p+"px",threshold:It(0,$n(1,u))||1};let S=!0;function C(R){const k=R[0].intersectionRatio;if(k!==u){if(!S)return i();k?i(!1,k):r=setTimeout(()=>{i(!1,1e-7)},1e3)}k===1&&!xf(d,e.getBoundingClientRect())&&i(),S=!1}try{n=new IntersectionObserver(C,{...x,root:o.ownerDocument})}catch{n=new IntersectionObserver(C,x)}n.observe(e)}return i(!0),s}function Xb(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:o=!0,ancestorResize:s=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,d=Vi(e),m=o||s?[...d?so(d):[],...so(t)]:[];m.forEach(p=>{o&&p.addEventListener("scroll",n,{passive:!0}),s&&p.addEventListener("resize",n)});const f=d&&l?Yb(d,n):null;let h=-1,y=null;i&&(y=new ResizeObserver(p=>{let[g]=p;g&&g.target===d&&y&&(y.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var x;(x=y)==null||x.observe(t)})),n()}),d&&!u&&y.observe(d),y.observe(t));let b,v=u?ur(e):null;u&&w();function w(){const p=ur(e);v&&!xf(v,p)&&n(),v=p,b=requestAnimationFrame(w)}return n(),()=>{var p;m.forEach(g=>{o&&g.removeEventListener("scroll",n),s&&g.removeEventListener("resize",n)}),f?.(),(p=y)==null||p.disconnect(),y=null,u&&cancelAnimationFrame(b)}}const Kb=bb,Jb=wb,Zb=yb,Qb=Sb,ew=xb,Ec=gb,tw=kb,nw=(e,t,n)=>{const r=new Map,o={platform:qb,...n},s={...o.platform,_c:r};return pb(e,t,{...o,platform:s})};var rw=typeof document<"u",ow=function(){},Yo=rw?c.useLayoutEffect:ow;function xs(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,o;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!xs(e[r],t[r]))return!1;return!0}if(o=Object.keys(e),n=o.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,o[r]))return!1;for(r=n;r--!==0;){const s=o[r];if(!(s==="_owner"&&e.$$typeof)&&!xs(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function vf(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function jc(e,t){const n=vf(e);return Math.round(t*n)/n}function ga(e){const t=c.useRef(e);return Yo(()=>{t.current=e}),t}function sw(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:o,elements:{reference:s,floating:i}={},transform:l=!0,whileElementsMounted:u,open:d}=e,[m,f]=c.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[h,y]=c.useState(r);xs(h,r)||y(r);const[b,v]=c.useState(null),[w,p]=c.useState(null),g=c.useCallback(P=>{P!==R.current&&(R.current=P,v(P))},[]),x=c.useCallback(P=>{P!==k.current&&(k.current=P,p(P))},[]),S=s||b,C=i||w,R=c.useRef(null),k=c.useRef(null),T=c.useRef(m),N=u!=null,A=ga(u),L=ga(o),O=ga(d),E=c.useCallback(()=>{if(!R.current||!k.current)return;const P={placement:t,strategy:n,middleware:h};L.current&&(P.platform=L.current),nw(R.current,k.current,P).then(W=>{const K={...W,isPositioned:O.current!==!1};j.current&&!xs(T.current,K)&&(T.current=K,Cs.flushSync(()=>{f(K)}))})},[h,t,n,L,O]);Yo(()=>{d===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,f(P=>({...P,isPositioned:!1})))},[d]);const j=c.useRef(!1);Yo(()=>(j.current=!0,()=>{j.current=!1}),[]),Yo(()=>{if(S&&(R.current=S),C&&(k.current=C),S&&C){if(A.current)return A.current(S,C,E);E()}},[S,C,E,A,N]);const M=c.useMemo(()=>({reference:R,floating:k,setReference:g,setFloating:x}),[g,x]),I=c.useMemo(()=>({reference:S,floating:C}),[S,C]),_=c.useMemo(()=>{const P={position:n,left:0,top:0};if(!I.floating)return P;const W=jc(I.floating,m.x),K=jc(I.floating,m.y);return l?{...P,transform:"translate("+W+"px, "+K+"px)",...vf(I.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:W,top:K}},[n,l,I.floating,m.x,m.y]);return c.useMemo(()=>({...m,update:E,refs:M,elements:I,floatingStyles:_}),[m,E,M,I,_])}const aw=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:o}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?Ec({element:r.current,padding:o}).fn(n):{}:r?Ec({element:r,padding:o}).fn(n):{}}}},iw=(e,t)=>({...Kb(e),options:[e,t]}),lw=(e,t)=>({...Jb(e),options:[e,t]}),cw=(e,t)=>({...tw(e),options:[e,t]}),uw=(e,t)=>({...Zb(e),options:[e,t]}),dw=(e,t)=>({...Qb(e),options:[e,t]}),fw=(e,t)=>({...ew(e),options:[e,t]}),mw=(e,t)=>({...aw(e),options:[e,t]});var hw="Arrow",bf=c.forwardRef((e,t)=>{const{children:n,width:r=10,height:o=5,...s}=e;return a.jsx(rt.svg,{...s,ref:t,width:r,height:o,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:a.jsx("polygon",{points:"0,0 30,0 15,10"})})});bf.displayName=hw;var pw=bf,Gi="Popper",[wf,Ms]=go(Gi),[gw,kf]=wf(Gi),Sf=e=>{const{__scopePopper:t,children:n}=e,[r,o]=c.useState(null);return a.jsx(gw,{scope:t,anchor:r,onAnchorChange:o,children:n})};Sf.displayName=Gi;var Cf="PopperAnchor",Tf=c.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...o}=e,s=kf(Cf,n),i=c.useRef(null),l=ot(t,i),u=c.useRef(null);return c.useEffect(()=>{const d=u.current;u.current=r?.current||i.current,d!==u.current&&s.onAnchorChange(u.current)}),r?null:a.jsx(rt.div,{...o,ref:l})});Tf.displayName=Cf;var qi="PopperContent",[yw,xw]=wf(qi),Nf=c.forwardRef((e,t)=>{const{__scopePopper:n,side:r="bottom",sideOffset:o=0,align:s="center",alignOffset:i=0,arrowPadding:l=0,avoidCollisions:u=!0,collisionBoundary:d=[],collisionPadding:m=0,sticky:f="partial",hideWhenDetached:h=!1,updatePositionStrategy:y="optimized",onPlaced:b,...v}=e,w=kf(qi,n),[p,g]=c.useState(null),x=ot(t,Q=>g(Q)),[S,C]=c.useState(null),R=pd(S),k=R?.width??0,T=R?.height??0,N=r+(s!=="center"?"-"+s:""),A=typeof m=="number"?m:{top:0,right:0,bottom:0,left:0,...m},L=Array.isArray(d)?d:[d],O=L.length>0,E={padding:A,boundary:L.filter(bw),altBoundary:O},{refs:j,floatingStyles:M,placement:I,isPositioned:_,middlewareData:P}=sw({strategy:"fixed",placement:N,whileElementsMounted:(...Q)=>Xb(...Q,{animationFrame:y==="always"}),elements:{reference:w.anchor},middleware:[iw({mainAxis:o+T,alignmentAxis:i}),u&&lw({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?cw():void 0,...E}),u&&uw({...E}),dw({...E,apply:({elements:Q,rects:U,availableWidth:le,availableHeight:he})=>{const{width:Ce,height:Ee}=U.reference,Re=Q.floating.style;Re.setProperty("--radix-popper-available-width",`${le}px`),Re.setProperty("--radix-popper-available-height",`${he}px`),Re.setProperty("--radix-popper-anchor-width",`${Ce}px`),Re.setProperty("--radix-popper-anchor-height",`${Ee}px`)}}),S&&mw({element:S,padding:l}),ww({arrowWidth:k,arrowHeight:T}),h&&fw({strategy:"referenceHidden",...E})]}),[W,K]=Ef(I),q=St(b);Vt(()=>{_&&q?.()},[_,q]);const G=P.arrow?.x,F=P.arrow?.y,X=P.arrow?.centerOffset!==0,[J,fe]=c.useState();return Vt(()=>{p&&fe(window.getComputedStyle(p).zIndex)},[p]),a.jsx("div",{ref:j.setFloating,"data-radix-popper-content-wrapper":"",style:{...M,transform:_?M.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:J,"--radix-popper-transform-origin":[P.transformOrigin?.x,P.transformOrigin?.y].join(" "),...P.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:a.jsx(yw,{scope:n,placedSide:W,onArrowChange:C,arrowX:G,arrowY:F,shouldHideArrow:X,children:a.jsx(rt.div,{"data-side":W,"data-align":K,...v,ref:x,style:{...v.style,animation:_?void 0:"none"}})})})});Nf.displayName=qi;var Rf="PopperArrow",vw={top:"bottom",right:"left",bottom:"top",left:"right"},Af=c.forwardRef(function(t,n){const{__scopePopper:r,...o}=t,s=xw(Rf,r),i=vw[s.placedSide];return a.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:a.jsx(pw,{...o,ref:n,style:{...o.style,display:"block"}})})});Af.displayName=Rf;function bw(e){return e!==null}var ww=e=>({name:"transformOrigin",options:e,fn(t){const{placement:n,rects:r,middlewareData:o}=t,i=o.arrow?.centerOffset!==0,l=i?0:e.arrowWidth,u=i?0:e.arrowHeight,[d,m]=Ef(n),f={start:"0%",center:"50%",end:"100%"}[m],h=(o.arrow?.x??0)+l/2,y=(o.arrow?.y??0)+u/2;let b="",v="";return d==="bottom"?(b=i?f:`${h}px`,v=`${-u}px`):d==="top"?(b=i?f:`${h}px`,v=`${r.floating.height+u}px`):d==="right"?(b=`${-u}px`,v=i?f:`${y}px`):d==="left"&&(b=`${r.floating.width+u}px`,v=i?f:`${y}px`),{data:{x:b,y:v}}}});function Ef(e){const[t,n="center"]=e.split("-");return[t,n]}var jf=Sf,Yi=Tf,If=Nf,_f=Af,kw="Portal",Xi=c.forwardRef((e,t)=>{const{container:n,...r}=e,[o,s]=c.useState(!1);Vt(()=>s(!0),[]);const i=n||o&&globalThis?.document?.body;return i?pi.createPortal(a.jsx(rt.div,{...r,ref:t}),i):null});Xi.displayName=kw;var Sw=Symbol("radix.slottable");function Cw(e){const t=({children:n})=>a.jsx(a.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=Sw,t}var Tw=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Nw="VisuallyHidden",Pf=c.forwardRef((e,t)=>a.jsx(rt.span,{...e,ref:t,style:{...Tw,...e.style}}));Pf.displayName=Nw;var Rw=Pf,[Os]=go("Tooltip",[Ms]),zs=Ms(),Lf="TooltipProvider",Aw=700,qa="tooltip.open",[Ew,Ki]=Os(Lf),Df=e=>{const{__scopeTooltip:t,delayDuration:n=Aw,skipDelayDuration:r=300,disableHoverableContent:o=!1,children:s}=e,i=c.useRef(!0),l=c.useRef(!1),u=c.useRef(0);return c.useEffect(()=>{const d=u.current;return()=>window.clearTimeout(d)},[]),a.jsx(Ew,{scope:t,isOpenDelayedRef:i,delayDuration:n,onOpen:c.useCallback(()=>{window.clearTimeout(u.current),i.current=!1},[]),onClose:c.useCallback(()=>{window.clearTimeout(u.current),u.current=window.setTimeout(()=>i.current=!0,r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:c.useCallback(d=>{l.current=d},[]),disableHoverableContent:o,children:s})};Df.displayName=Lf;var ao="Tooltip",[jw,xo]=Os(ao),Mf=e=>{const{__scopeTooltip:t,children:n,open:r,defaultOpen:o,onOpenChange:s,disableHoverableContent:i,delayDuration:l}=e,u=Ki(ao,e.__scopeTooltip),d=zs(t),[m,f]=c.useState(null),h=lf(),y=c.useRef(0),b=i??u.disableHoverableContent,v=l??u.delayDuration,w=c.useRef(!1),[p,g]=Ri({prop:r,defaultProp:o??!1,onChange:k=>{k?(u.onOpen(),document.dispatchEvent(new CustomEvent(qa))):u.onClose(),s?.(k)},caller:ao}),x=c.useMemo(()=>p?w.current?"delayed-open":"instant-open":"closed",[p]),S=c.useCallback(()=>{window.clearTimeout(y.current),y.current=0,w.current=!1,g(!0)},[g]),C=c.useCallback(()=>{window.clearTimeout(y.current),y.current=0,g(!1)},[g]),R=c.useCallback(()=>{window.clearTimeout(y.current),y.current=window.setTimeout(()=>{w.current=!0,g(!0),y.current=0},v)},[v,g]);return c.useEffect(()=>()=>{y.current&&(window.clearTimeout(y.current),y.current=0)},[]),a.jsx(jf,{...d,children:a.jsx(jw,{scope:t,contentId:h,open:p,stateAttribute:x,trigger:m,onTriggerChange:f,onTriggerEnter:c.useCallback(()=>{u.isOpenDelayedRef.current?R():S()},[u.isOpenDelayedRef,R,S]),onTriggerLeave:c.useCallback(()=>{b?C():(window.clearTimeout(y.current),y.current=0)},[C,b]),onOpen:S,onClose:C,disableHoverableContent:b,children:n})})};Mf.displayName=ao;var Ya="TooltipTrigger",Of=c.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,o=xo(Ya,n),s=Ki(Ya,n),i=zs(n),l=c.useRef(null),u=ot(t,l,o.onTriggerChange),d=c.useRef(!1),m=c.useRef(!1),f=c.useCallback(()=>d.current=!1,[]);return c.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),a.jsx(Yi,{asChild:!0,...i,children:a.jsx(rt.button,{"aria-describedby":o.open?o.contentId:void 0,"data-state":o.stateAttribute,...r,ref:u,onPointerMove:Fe(e.onPointerMove,h=>{h.pointerType!=="touch"&&!m.current&&!s.isPointerInTransitRef.current&&(o.onTriggerEnter(),m.current=!0)}),onPointerLeave:Fe(e.onPointerLeave,()=>{o.onTriggerLeave(),m.current=!1}),onPointerDown:Fe(e.onPointerDown,()=>{o.open&&o.onClose(),d.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:Fe(e.onFocus,()=>{d.current||o.onOpen()}),onBlur:Fe(e.onBlur,o.onClose),onClick:Fe(e.onClick,o.onClose)})})});Of.displayName=Ya;var Ji="TooltipPortal",[Iw,_w]=Os(Ji,{forceMount:void 0}),zf=e=>{const{__scopeTooltip:t,forceMount:n,children:r,container:o}=e,s=xo(Ji,t);return a.jsx(Iw,{scope:t,forceMount:n,children:a.jsx(yn,{present:n||s.open,children:a.jsx(Xi,{asChild:!0,container:o,children:r})})})};zf.displayName=Ji;var Pr="TooltipContent",Uf=c.forwardRef((e,t)=>{const n=_w(Pr,e.__scopeTooltip),{forceMount:r=n.forceMount,side:o="top",...s}=e,i=xo(Pr,e.__scopeTooltip);return a.jsx(yn,{present:r||i.open,children:i.disableHoverableContent?a.jsx(Bf,{side:o,...s,ref:t}):a.jsx(Pw,{side:o,...s,ref:t})})}),Pw=c.forwardRef((e,t)=>{const n=xo(Pr,e.__scopeTooltip),r=Ki(Pr,e.__scopeTooltip),o=c.useRef(null),s=ot(t,o),[i,l]=c.useState(null),{trigger:u,onClose:d}=n,m=o.current,{onPointerInTransitChange:f}=r,h=c.useCallback(()=>{l(null),f(!1)},[f]),y=c.useCallback((b,v)=>{const w=b.currentTarget,p={x:b.clientX,y:b.clientY},g=Ow(p,w.getBoundingClientRect()),x=zw(p,g),S=Uw(v.getBoundingClientRect()),C=Fw([...x,...S]);l(C),f(!0)},[f]);return c.useEffect(()=>()=>h(),[h]),c.useEffect(()=>{if(u&&m){const b=w=>y(w,m),v=w=>y(w,u);return u.addEventListener("pointerleave",b),m.addEventListener("pointerleave",v),()=>{u.removeEventListener("pointerleave",b),m.removeEventListener("pointerleave",v)}}},[u,m,y,h]),c.useEffect(()=>{if(i){const b=v=>{const w=v.target,p={x:v.clientX,y:v.clientY},g=u?.contains(w)||m?.contains(w),x=!Bw(p,i);g?h():x&&(h(),d())};return document.addEventListener("pointermove",b),()=>document.removeEventListener("pointermove",b)}},[u,m,i,d,h]),a.jsx(Bf,{...e,ref:s})}),[Lw,Dw]=Os(ao,{isInside:!1}),Mw=Cw("TooltipContent"),Bf=c.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":o,onEscapeKeyDown:s,onPointerDownOutside:i,...l}=e,u=xo(Pr,n),d=zs(n),{onClose:m}=u;return c.useEffect(()=>(document.addEventListener(qa,m),()=>document.removeEventListener(qa,m)),[m]),c.useEffect(()=>{if(u.trigger){const f=h=>{h.target?.contains(u.trigger)&&m()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[u.trigger,m]),a.jsx(Ui,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:i,onFocusOutside:f=>f.preventDefault(),onDismiss:m,children:a.jsxs(If,{"data-state":u.stateAttribute,...d,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[a.jsx(Mw,{children:r}),a.jsx(Lw,{scope:n,isInside:!0,children:a.jsx(Rw,{id:u.contentId,role:"tooltip",children:o||r})})]})})});Uf.displayName=Pr;var Ff="TooltipArrow",$f=c.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,o=zs(n);return Dw(Ff,n).isInside?null:a.jsx(_f,{...o,...r,ref:t})});$f.displayName=Ff;function Ow(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),o=Math.abs(t.right-e.x),s=Math.abs(t.left-e.x);switch(Math.min(n,r,o,s)){case s:return"left";case o:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function zw(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function Uw(e){const{top:t,right:n,bottom:r,left:o}=e;return[{x:o,y:t},{x:n,y:t},{x:n,y:r},{x:o,y:r}]}function Bw(e,t){const{x:n,y:r}=e;let o=!1;for(let s=0,i=t.length-1;s<t.length;i=s++){const l=t[s],u=t[i],d=l.x,m=l.y,f=u.x,h=u.y;m>r!=h>r&&n<(f-d)*(r-m)/(h-m)+d&&(o=!o)}return o}function Fw(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),$w(t)}function $w(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const o=e[r];for(;t.length>=2;){const s=t[t.length-1],i=t[t.length-2];if((s.x-i.x)*(o.y-i.y)>=(s.y-i.y)*(o.x-i.x))t.pop();else break}t.push(o)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const o=e[r];for(;n.length>=2;){const s=n[n.length-1],i=n[n.length-2];if((s.x-i.x)*(o.y-i.y)>=(s.y-i.y)*(o.x-i.x))n.pop();else break}n.push(o)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var Hw=Df,Ww=Mf,Vw=Of,Gw=zf,qw=Uf,Yw=$f;function Hf({delayDuration:e=0,...t}){return a.jsx(Hw,{"data-slot":"tooltip-provider",delayDuration:e,...t})}function Xw({...e}){return a.jsx(Hf,{children:a.jsx(Ww,{"data-slot":"tooltip",...e})})}function Kw({...e}){return a.jsx(Vw,{"data-slot":"tooltip-trigger",...e})}function Jw({className:e,sideOffset:t=0,children:n,...r}){return a.jsx(Gw,{children:a.jsxs(qw,{"data-slot":"tooltip-content",sideOffset:t,className:nt("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",e),...r,children:[n,a.jsx(Yw,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}var ya=0;function Zw(){c.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??Ic()),document.body.insertAdjacentElement("beforeend",e[1]??Ic()),ya++,()=>{ya===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),ya--}},[])}function Ic(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var xa="focusScope.autoFocusOnMount",va="focusScope.autoFocusOnUnmount",_c={bubbles:!1,cancelable:!0},Qw="FocusScope",Wf=c.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:o,onUnmountAutoFocus:s,...i}=e,[l,u]=c.useState(null),d=St(o),m=St(s),f=c.useRef(null),h=ot(t,v=>u(v)),y=c.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;c.useEffect(()=>{if(r){let v=function(x){if(y.paused||!l)return;const S=x.target;l.contains(S)?f.current=S:On(f.current,{select:!0})},w=function(x){if(y.paused||!l)return;const S=x.relatedTarget;S!==null&&(l.contains(S)||On(f.current,{select:!0}))},p=function(x){if(document.activeElement===document.body)for(const C of x)C.removedNodes.length>0&&On(l)};document.addEventListener("focusin",v),document.addEventListener("focusout",w);const g=new MutationObserver(p);return l&&g.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",w),g.disconnect()}}},[r,l,y.paused]),c.useEffect(()=>{if(l){Lc.add(y);const v=document.activeElement;if(!l.contains(v)){const p=new CustomEvent(xa,_c);l.addEventListener(xa,d),l.dispatchEvent(p),p.defaultPrevented||(ek(sk(Vf(l)),{select:!0}),document.activeElement===v&&On(l))}return()=>{l.removeEventListener(xa,d),setTimeout(()=>{const p=new CustomEvent(va,_c);l.addEventListener(va,m),l.dispatchEvent(p),p.defaultPrevented||On(v??document.body,{select:!0}),l.removeEventListener(va,m),Lc.remove(y)},0)}}},[l,d,m,y]);const b=c.useCallback(v=>{if(!n&&!r||y.paused)return;const w=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,p=document.activeElement;if(w&&p){const g=v.currentTarget,[x,S]=tk(g);x&&S?!v.shiftKey&&p===S?(v.preventDefault(),n&&On(x,{select:!0})):v.shiftKey&&p===x&&(v.preventDefault(),n&&On(S,{select:!0})):p===g&&v.preventDefault()}},[n,r,y.paused]);return a.jsx(rt.div,{tabIndex:-1,...i,ref:h,onKeyDown:b})});Wf.displayName=Qw;function ek(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(On(r,{select:t}),document.activeElement!==n)return}function tk(e){const t=Vf(e),n=Pc(t,e),r=Pc(t.reverse(),e);return[n,r]}function Vf(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Pc(e,t){for(const n of e)if(!nk(n,{upTo:t}))return n}function nk(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function rk(e){return e instanceof HTMLInputElement&&"select"in e}function On(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&rk(e)&&t&&e.select()}}var Lc=ok();function ok(){let e=[];return{add(t){const n=e[0];t!==n&&n?.pause(),e=Dc(e,t),e.unshift(t)},remove(t){e=Dc(e,t),e[0]?.resume()}}}function Dc(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function sk(e){return e.filter(t=>t.tagName!=="A")}function ak(e){const t=ik(e),n=c.forwardRef((r,o)=>{const{children:s,...i}=r,l=c.Children.toArray(s),u=l.find(ck);if(u){const d=u.props.children,m=l.map(f=>f===u?c.Children.count(d)>1?c.Children.only(null):c.isValidElement(d)?d.props.children:null:f);return a.jsx(t,{...i,ref:o,children:c.isValidElement(d)?c.cloneElement(d,void 0,m):null})}return a.jsx(t,{...i,ref:o,children:s})});return n.displayName=`${e}.Slot`,n}function ik(e){const t=c.forwardRef((n,r)=>{const{children:o,...s}=n;if(c.isValidElement(o)){const i=dk(o),l=uk(s,o.props);return o.type!==c.Fragment&&(l.ref=r?Ts(r,i):i),c.cloneElement(o,l)}return c.Children.count(o)>1?c.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var lk=Symbol("radix.slottable");function ck(e){return c.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===lk}function uk(e,t){const n={...t};for(const r in t){const o=e[r],s=t[r];/^on[A-Z]/.test(r)?o&&s?n[r]=(...l)=>{const u=s(...l);return o(...l),u}:o&&(n[r]=o):r==="style"?n[r]={...o,...s}:r==="className"&&(n[r]=[o,s].filter(Boolean).join(" "))}return{...e,...n}}function dk(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var fk=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},kr=new WeakMap,Uo=new WeakMap,Bo={},ba=0,Gf=function(e){return e&&(e.host||Gf(e.parentNode))},mk=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=Gf(n);return r&&e.contains(r)?r:null}).filter(function(n){return!!n})},hk=function(e,t,n,r){var o=mk(t,Array.isArray(e)?e:[e]);Bo[n]||(Bo[n]=new WeakMap);var s=Bo[n],i=[],l=new Set,u=new Set(o),d=function(f){!f||l.has(f)||(l.add(f),d(f.parentNode))};o.forEach(d);var m=function(f){!f||u.has(f)||Array.prototype.forEach.call(f.children,function(h){if(l.has(h))m(h);else try{var y=h.getAttribute(r),b=y!==null&&y!=="false",v=(kr.get(h)||0)+1,w=(s.get(h)||0)+1;kr.set(h,v),s.set(h,w),i.push(h),v===1&&b&&Uo.set(h,!0),w===1&&h.setAttribute(n,"true"),b||h.setAttribute(r,"true")}catch{}})};return m(t),l.clear(),ba++,function(){i.forEach(function(f){var h=kr.get(f)-1,y=s.get(f)-1;kr.set(f,h),s.set(f,y),h||(Uo.has(f)||f.removeAttribute(r),Uo.delete(f)),y||f.removeAttribute(n)}),ba--,ba||(kr=new WeakMap,kr=new WeakMap,Uo=new WeakMap,Bo={})}},pk=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),o=fk(e);return o?(r.push.apply(r,Array.from(o.querySelectorAll("[aria-live], script"))),hk(r,o,n,"aria-hidden")):function(){return null}},Xo="right-scroll-bar-position",Ko="width-before-scroll-bar",gk="with-scroll-bars-hidden",yk="--removed-body-scroll-bar-size";function wa(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function xk(e,t){var n=c.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var o=n.value;o!==r&&(n.value=r,n.callback(r,o))}}}})[0];return n.callback=t,n.facade}var vk=typeof window<"u"?c.useLayoutEffect:c.useEffect,Mc=new WeakMap;function bk(e,t){var n=xk(null,function(r){return e.forEach(function(o){return wa(o,r)})});return vk(function(){var r=Mc.get(n);if(r){var o=new Set(r),s=new Set(e),i=n.current;o.forEach(function(l){s.has(l)||wa(l,null)}),s.forEach(function(l){o.has(l)||wa(l,i)})}Mc.set(n,e)},[e]),n}function wk(e){return e}function kk(e,t){t===void 0&&(t=wk);var n=[],r=!1,o={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(s){var i=t(s,r);return n.push(i),function(){n=n.filter(function(l){return l!==i})}},assignSyncMedium:function(s){for(r=!0;n.length;){var i=n;n=[],i.forEach(s)}n={push:function(l){return s(l)},filter:function(){return n}}},assignMedium:function(s){r=!0;var i=[];if(n.length){var l=n;n=[],l.forEach(s),i=n}var u=function(){var m=i;i=[],m.forEach(s)},d=function(){return Promise.resolve().then(u)};d(),n={push:function(m){i.push(m),d()},filter:function(m){return i=i.filter(m),n}}}};return o}function Sk(e){e===void 0&&(e={});var t=kk(null);return t.options=zn({async:!0,ssr:!1},e),t}var qf=function(e){var t=e.sideCar,n=Su(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return c.createElement(r,zn({},n))};qf.isSideCarExport=!0;function Ck(e,t){return e.useMedium(t),qf}var Yf=Sk(),ka=function(){},Us=c.forwardRef(function(e,t){var n=c.useRef(null),r=c.useState({onScrollCapture:ka,onWheelCapture:ka,onTouchMoveCapture:ka}),o=r[0],s=r[1],i=e.forwardProps,l=e.children,u=e.className,d=e.removeScrollBar,m=e.enabled,f=e.shards,h=e.sideCar,y=e.noRelative,b=e.noIsolation,v=e.inert,w=e.allowPinchZoom,p=e.as,g=p===void 0?"div":p,x=e.gapMode,S=Su(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),C=h,R=bk([n,t]),k=zn(zn({},S),o);return c.createElement(c.Fragment,null,m&&c.createElement(C,{sideCar:Yf,removeScrollBar:d,shards:f,noRelative:y,noIsolation:b,inert:v,setCallbacks:s,allowPinchZoom:!!w,lockRef:n,gapMode:x}),i?c.cloneElement(c.Children.only(l),zn(zn({},k),{ref:R})):c.createElement(g,zn({},k,{className:u,ref:R}),l))});Us.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Us.classNames={fullWidth:Ko,zeroRight:Xo};var Tk=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Nk(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Tk();return t&&e.setAttribute("nonce",t),e}function Rk(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function Ak(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var Ek=function(){var e=0,t=null;return{add:function(n){e==0&&(t=Nk())&&(Rk(t,n),Ak(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},jk=function(){var e=Ek();return function(t,n){c.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},Xf=function(){var e=jk(),t=function(n){var r=n.styles,o=n.dynamic;return e(r,o),null};return t},Ik={left:0,top:0,right:0,gap:0},Sa=function(e){return parseInt(e||"",10)||0},_k=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],o=t[e==="padding"?"paddingRight":"marginRight"];return[Sa(n),Sa(r),Sa(o)]},Pk=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return Ik;var t=_k(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},Lk=Xf(),Ar="data-scroll-locked",Dk=function(e,t,n,r){var o=e.left,s=e.top,i=e.right,l=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(gk,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(Ar,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(o,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(i,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Xo,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Ko,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Xo," .").concat(Xo,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Ko," .").concat(Ko,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Ar,`] {
    `).concat(yk,": ").concat(l,`px;
  }
`)},Oc=function(){var e=parseInt(document.body.getAttribute(Ar)||"0",10);return isFinite(e)?e:0},Mk=function(){c.useEffect(function(){return document.body.setAttribute(Ar,(Oc()+1).toString()),function(){var e=Oc()-1;e<=0?document.body.removeAttribute(Ar):document.body.setAttribute(Ar,e.toString())}},[])},Ok=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,o=r===void 0?"margin":r;Mk();var s=c.useMemo(function(){return Pk(o)},[o]);return c.createElement(Lk,{styles:Dk(s,!t,o,n?"":"!important")})},Xa=!1;if(typeof window<"u")try{var Fo=Object.defineProperty({},"passive",{get:function(){return Xa=!0,!0}});window.addEventListener("test",Fo,Fo),window.removeEventListener("test",Fo,Fo)}catch{Xa=!1}var Sr=Xa?{passive:!1}:!1,zk=function(e){return e.tagName==="TEXTAREA"},Kf=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!zk(e)&&n[t]==="visible")},Uk=function(e){return Kf(e,"overflowY")},Bk=function(e){return Kf(e,"overflowX")},zc=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var o=Jf(e,r);if(o){var s=Zf(e,r),i=s[1],l=s[2];if(i>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},Fk=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},$k=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},Jf=function(e,t){return e==="v"?Uk(t):Bk(t)},Zf=function(e,t){return e==="v"?Fk(t):$k(t)},Hk=function(e,t){return e==="h"&&t==="rtl"?-1:1},Wk=function(e,t,n,r,o){var s=Hk(e,window.getComputedStyle(t).direction),i=s*r,l=n.target,u=t.contains(l),d=!1,m=i>0,f=0,h=0;do{if(!l)break;var y=Zf(e,l),b=y[0],v=y[1],w=y[2],p=v-w-s*b;(b||p)&&Jf(e,l)&&(f+=p,h+=b);var g=l.parentNode;l=g&&g.nodeType===Node.DOCUMENT_FRAGMENT_NODE?g.host:g}while(!u&&l!==document.body||u&&(t.contains(l)||t===l));return(m&&Math.abs(f)<1||!m&&Math.abs(h)<1)&&(d=!0),d},$o=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Uc=function(e){return[e.deltaX,e.deltaY]},Bc=function(e){return e&&"current"in e?e.current:e},Vk=function(e,t){return e[0]===t[0]&&e[1]===t[1]},Gk=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},qk=0,Cr=[];function Yk(e){var t=c.useRef([]),n=c.useRef([0,0]),r=c.useRef(),o=c.useState(qk++)[0],s=c.useState(Xf)[0],i=c.useRef(e);c.useEffect(function(){i.current=e},[e]),c.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(o));var v=Dh([e.lockRef.current],(e.shards||[]).map(Bc),!0).filter(Boolean);return v.forEach(function(w){return w.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),v.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(o))})}}},[e.inert,e.lockRef.current,e.shards]);var l=c.useCallback(function(v,w){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!i.current.allowPinchZoom;var p=$o(v),g=n.current,x="deltaX"in v?v.deltaX:g[0]-p[0],S="deltaY"in v?v.deltaY:g[1]-p[1],C,R=v.target,k=Math.abs(x)>Math.abs(S)?"h":"v";if("touches"in v&&k==="h"&&R.type==="range")return!1;var T=window.getSelection(),N=T&&T.anchorNode,A=N?N===R||N.contains(R):!1;if(A)return!1;var L=zc(k,R);if(!L)return!0;if(L?C=k:(C=k==="v"?"h":"v",L=zc(k,R)),!L)return!1;if(!r.current&&"changedTouches"in v&&(x||S)&&(r.current=C),!C)return!0;var O=r.current||C;return Wk(O,w,v,O==="h"?x:S)},[]),u=c.useCallback(function(v){var w=v;if(!(!Cr.length||Cr[Cr.length-1]!==s)){var p="deltaY"in w?Uc(w):$o(w),g=t.current.filter(function(C){return C.name===w.type&&(C.target===w.target||w.target===C.shadowParent)&&Vk(C.delta,p)})[0];if(g&&g.should){w.cancelable&&w.preventDefault();return}if(!g){var x=(i.current.shards||[]).map(Bc).filter(Boolean).filter(function(C){return C.contains(w.target)}),S=x.length>0?l(w,x[0]):!i.current.noIsolation;S&&w.cancelable&&w.preventDefault()}}},[]),d=c.useCallback(function(v,w,p,g){var x={name:v,delta:w,target:p,should:g,shadowParent:Xk(p)};t.current.push(x),setTimeout(function(){t.current=t.current.filter(function(S){return S!==x})},1)},[]),m=c.useCallback(function(v){n.current=$o(v),r.current=void 0},[]),f=c.useCallback(function(v){d(v.type,Uc(v),v.target,l(v,e.lockRef.current))},[]),h=c.useCallback(function(v){d(v.type,$o(v),v.target,l(v,e.lockRef.current))},[]);c.useEffect(function(){return Cr.push(s),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:h}),document.addEventListener("wheel",u,Sr),document.addEventListener("touchmove",u,Sr),document.addEventListener("touchstart",m,Sr),function(){Cr=Cr.filter(function(v){return v!==s}),document.removeEventListener("wheel",u,Sr),document.removeEventListener("touchmove",u,Sr),document.removeEventListener("touchstart",m,Sr)}},[]);var y=e.removeScrollBar,b=e.inert;return c.createElement(c.Fragment,null,b?c.createElement(s,{styles:Gk(o)}):null,y?c.createElement(Ok,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function Xk(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const Kk=Ck(Yf,Yk);var Qf=c.forwardRef(function(e,t){return c.createElement(Us,zn({},e,{ref:t,sideCar:Kk}))});Qf.classNames=Us.classNames;var Bs="Popover",[em]=go(Bs,[Ms]),vo=Ms(),[Jk,Vn]=em(Bs),tm=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:o,onOpenChange:s,modal:i=!1}=e,l=vo(t),u=c.useRef(null),[d,m]=c.useState(!1),[f,h]=Ri({prop:r,defaultProp:o??!1,onChange:s,caller:Bs});return a.jsx(jf,{...l,children:a.jsx(Jk,{scope:t,contentId:lf(),triggerRef:u,open:f,onOpenChange:h,onOpenToggle:c.useCallback(()=>h(y=>!y),[h]),hasCustomAnchor:d,onCustomAnchorAdd:c.useCallback(()=>m(!0),[]),onCustomAnchorRemove:c.useCallback(()=>m(!1),[]),modal:i,children:n})})};tm.displayName=Bs;var nm="PopoverAnchor",Zk=c.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,o=Vn(nm,n),s=vo(n),{onCustomAnchorAdd:i,onCustomAnchorRemove:l}=o;return c.useEffect(()=>(i(),()=>l()),[i,l]),a.jsx(Yi,{...s,...r,ref:t})});Zk.displayName=nm;var rm="PopoverTrigger",om=c.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,o=Vn(rm,n),s=vo(n),i=ot(t,o.triggerRef),l=a.jsx(rt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":cm(o.open),...r,ref:i,onClick:Fe(e.onClick,o.onOpenToggle)});return o.hasCustomAnchor?l:a.jsx(Yi,{asChild:!0,...s,children:l})});om.displayName=rm;var Zi="PopoverPortal",[Qk,eS]=em(Zi,{forceMount:void 0}),sm=e=>{const{__scopePopover:t,forceMount:n,children:r,container:o}=e,s=Vn(Zi,t);return a.jsx(Qk,{scope:t,forceMount:n,children:a.jsx(yn,{present:n||s.open,children:a.jsx(Xi,{asChild:!0,container:o,children:r})})})};sm.displayName=Zi;var Lr="PopoverContent",am=c.forwardRef((e,t)=>{const n=eS(Lr,e.__scopePopover),{forceMount:r=n.forceMount,...o}=e,s=Vn(Lr,e.__scopePopover);return a.jsx(yn,{present:r||s.open,children:s.modal?a.jsx(nS,{...o,ref:t}):a.jsx(rS,{...o,ref:t})})});am.displayName=Lr;var tS=ak("PopoverContent.RemoveScroll"),nS=c.forwardRef((e,t)=>{const n=Vn(Lr,e.__scopePopover),r=c.useRef(null),o=ot(t,r),s=c.useRef(!1);return c.useEffect(()=>{const i=r.current;if(i)return pk(i)},[]),a.jsx(Qf,{as:tS,allowPinchZoom:!0,children:a.jsx(im,{...e,ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Fe(e.onCloseAutoFocus,i=>{i.preventDefault(),s.current||n.triggerRef.current?.focus()}),onPointerDownOutside:Fe(e.onPointerDownOutside,i=>{const l=i.detail.originalEvent,u=l.button===0&&l.ctrlKey===!0,d=l.button===2||u;s.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:Fe(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1})})})}),rS=c.forwardRef((e,t)=>{const n=Vn(Lr,e.__scopePopover),r=c.useRef(!1),o=c.useRef(!1);return a.jsx(im,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{e.onCloseAutoFocus?.(s),s.defaultPrevented||(r.current||n.triggerRef.current?.focus(),s.preventDefault()),r.current=!1,o.current=!1},onInteractOutside:s=>{e.onInteractOutside?.(s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const i=s.target;n.triggerRef.current?.contains(i)&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&o.current&&s.preventDefault()}})}),im=c.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:s,disableOutsidePointerEvents:i,onEscapeKeyDown:l,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:m,...f}=e,h=Vn(Lr,n),y=vo(n);return Zw(),a.jsx(Wf,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:o,onUnmountAutoFocus:s,children:a.jsx(Ui,{asChild:!0,disableOutsidePointerEvents:i,onInteractOutside:m,onEscapeKeyDown:l,onPointerDownOutside:u,onFocusOutside:d,onDismiss:()=>h.onOpenChange(!1),children:a.jsx(If,{"data-state":cm(h.open),role:"dialog",id:h.contentId,...y,...f,ref:t,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),lm="PopoverClose",oS=c.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,o=Vn(lm,n);return a.jsx(rt.button,{type:"button",...r,ref:t,onClick:Fe(e.onClick,()=>o.onOpenChange(!1))})});oS.displayName=lm;var sS="PopoverArrow",aS=c.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,o=vo(n);return a.jsx(_f,{...o,...r,ref:t})});aS.displayName=sS;function cm(e){return e?"open":"closed"}var iS=tm,um=om,lS=sm,dm=am;const Qi=iS,Fs=c.forwardRef(({...e},t)=>a.jsx(um,{ref:t,"data-slot":"popover-trigger",...e}));Fs.displayName=um.displayName;const $s=c.forwardRef(({className:e,align:t="center",sideOffset:n=4,...r},o)=>a.jsx(lS,{children:a.jsx(dm,{ref:o,"data-slot":"popover-content",align:t,sideOffset:n,className:nt("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",e),...r})}));$s.displayName=dm.displayName;function fm({key:e,debounceMs:t=100}){const n=c.useRef(null),r=c.useRef(null),o=c.useRef(!1);return c.useEffect(()=>{const s=n.current;if(!s)return;const i=sessionStorage.getItem(`scroll-${e}`);i&&!o.current&&(o.current=!0,requestAnimationFrame(()=>{s.scrollTop=parseInt(i,10),setTimeout(()=>{o.current=!1},100)}));const l=()=>{o.current||(r.current&&clearTimeout(r.current),r.current=setTimeout(()=>{sessionStorage.setItem(`scroll-${e}`,s.scrollTop.toString())},t))};return s.addEventListener("scroll",l,{passive:!0}),()=>{s.removeEventListener("scroll",l),r.current&&clearTimeout(r.current)}},[e,t]),n}const tT=[{id:"guide_sprout",name:" ",requiredGuideCount:1},{id:"little_guide",name:" ",requiredGuideCount:1},{id:"ordinary_guide",name:" ",requiredGuideCount:5},{id:"kind_guide",name:" ",requiredGuideCount:15},{id:"famous_guide",name:" ",requiredGuideCount:30},{id:"master_on_path",name:"  ",requiredGuideCount:50},{id:"sherpa",name:"",requiredGuideCount:100},{id:"immortal_lantern",name:"",requiredGuideCount:200}],mm={best_contributor:" ",captain_captain:"",community_fellow:" ",curiosity_spark:" ",diligent_visitor:" ",discussion_expert:" ",discussion_maestro:" ",economy_analyst:" ",economy_expert:" ",engineering_curious:" ",engineering_destroyer:" ",engineering_first_light:"  ",engineering_focused:" ",explore_brave_questioner:"  ",explore_inquirer:"",explore_investigator:"",explore_philosopher:"",explore_steady_questioner:" ",famous_guide:" ",first_explore:"",guide_guide:"",guide_luminary:"",guide_navigator:"",guide_pathfinder:"",guide_sprout:" ",honorary_scholar:" ",immortal_lantern:"",insight_collector:" ",it_consultant:" ",it_expert:" ",kind_guide:" ",knowledge_sage:" ",language_expert:" ",language_tutor:" ",lantern_campfire:"",lantern_candle:"",lantern_furnace:"",lantern_giver:" ",lantern_giver_captain:"",lantern_giver_small:" ",lantern_lantern:"",little_guide:" ",master_on_path:"  ",multi_specialist:" ",ordinary_guide:" ",philosopher_soul:" ",popular_questioner:" ",reply_advisor:"",reply_challenger:" ",reply_helper:"",reply_mentor:"",reply_persistent_helper:"  ",reply_scholar:"",share_archivist:" ",share_curator:"",share_publisher:"",share_sharer:"",sherpa:"",specialized_replier:" ",streak_pillar:"",streak_regular:"",streak_resident:"",streak_visitor:"",thought_architect:" ",truth_seeker:" ",wisdom_lighthouse:" "},el=(e,t,n)=>{const r=e??"";return!r||r!==t||!n?"":mm[n]??""},tl=e=>e?mm[e]??"":"";function hm(e=6e4){const[t,n]=c.useState(()=>new Date);return c.useEffect(()=>{const r=setInterval(()=>{n(new Date)},e);return()=>clearInterval(r)},[e]),t}function cS(e){if(!e||typeof e!="string")return!1;const t=e.toLowerCase();return t.includes("googleusercontent.com")||t.includes("googleapis.com")||t.includes("lh3.googleusercontent.com")||t.includes("lh4.googleusercontent.com")||t.includes("lh5.googleusercontent.com")||t.includes("lh6.googleusercontent.com")}function Ka(e){return!e||typeof e!="string"||cS(e)?null:e}function pm(e){if(!e)return null;if(e instanceof Date)return e;if(e&&typeof e.toDate=="function")return e.toDate();if(typeof e=="string"||typeof e=="number"){const t=new Date(e);if(!Number.isNaN(t.getTime()))return t}return null}function gm(e){const t=pm(e);return t?t.toLocaleString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):""}function uS({post:e,userNickname:t,currentTitle:n,userProfileImage:r}){const o=c.useMemo(()=>{const x=new Set;return typeof e.authorUid=="string"&&e.authorUid.length>0&&x.add(e.authorUid),e.replies?.forEach(S=>{typeof S.authorUid=="string"&&S.authorUid.length>0&&x.add(S.authorUid)}),Array.from(x)},[e.authorUid,e.replies]),s=Rs(o),i=e.authorUid?s[e.authorUid]:void 0,l=i?.currentTitleId??null,u=tl(l),d=e.authorDeleted===!0||e.author===" ",m=Oi(e.author,d),f=Is(e.author,d),h=e.author===t,y=c.useMemo(()=>h&&r&&r.trim().length>0?r:i?.profileImage??Ka(e.authorAvatar)??null,[h,r,i?.profileImage,e.authorAvatar]),b=el(e.author??"",t,n),v=f?null:u||b,w=pm(e.createdAt),p=gm(e.createdAt),g=c.useMemo(()=>e.replies?.filter(x=>x.hidden!==!0)?.map(x=>({...x,isGuide:x.isGuide||e.guideReplyId===x.id}))??[],[e.guideReplyId,e.replies]);return{userProfiles:s,postAuthorProfileImage:y,postAuthorName:m,isPostAuthorDeleted:f,authorTitle:v,postCreatedAtText:p,postCreatedAtDate:w,visibleReplies:g}}function dr(e){const{className:t,...n}=e;return a.jsxs("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:t,...n,children:[a.jsx("path",{d:"M8 6h8l1 2v8c0 1.1-0.9 2-2 2H9c-1.1 0-2-0.9-2-2V8l1-2z"}),a.jsx("path",{d:"M7 6c0-1.1 0.9-2 2-2h6c1.1 0 2 0.9 2 2v0.5H7V6z"}),a.jsx("rect",{x:"10",y:"2",width:"4",height:"2",rx:"0.5"}),a.jsx("circle",{cx:"12",cy:"12",r:"2.5"}),a.jsx("rect",{x:"11.5",y:"9.5",width:"1",height:"5",rx:"0.5"}),a.jsx("rect",{x:"9.5",y:"11.5",width:"5",height:"1",rx:"0.5"}),a.jsx("rect",{x:"11.5",y:"18",width:"1",height:"2",rx:"0.5"})]})}function Hs(e){return a.jsxs("svg",{viewBox:"0 0 24 24",fill:"currentColor",...e,children:[a.jsx("path",{d:"M8 6h8l1 2v8c0 1-1 2-2 2H9c-1 0-2-1-2-2V8l1-2z",fillOpacity:.8}),a.jsx("path",{d:"M7 6c0-1 1-2 2-2h6c1 0 2 1 2 2z"}),a.jsx("rect",{x:"10",y:"2",width:"4",height:"2"}),a.jsx("circle",{cx:"12",cy:"12",r:"3",fill:"currentColor",fillOpacity:.3}),a.jsx("rect",{x:"11.5",y:"18",width:"1",height:"2"})]})}const dS=D.memo(function({date:t,title:n}){const r=hm(6e4);return t?a.jsx("span",{title:n||void 0,children:As(t,r)}):null});function fS({post:e,userNickname:t,userProfileImage:n,currentTitle:r,isDarkMode:o,blockedUserIds:s,isPostLanterned:i,isReplyLanterned:l,onLanternToggle:u,onReplyLanternToggle:d,isBookmarked:m,onBookmarkToggle:f,isGuideReply:h,hasGuide:y,onGuideSelect:b,newReplyContent:v,onReplyContentChange:w,onReplySubmit:p,replyInputRef:g,onClose:x,onAuthorClick:S,onMentionAuthor:C,onMentionReplyAuthor:R,onReplyAuthorClick:k,onReport:T,onDelete:N,onReportReply:A,renderContentWithMentions:L,canSubmitReply:O}){const E=hm(6e4),j=fm({key:`post-detail-${e.id}`}),M=e.author===t,{userProfiles:I,postAuthorProfileImage:_,postAuthorName:P,isPostAuthorDeleted:W,authorTitle:K,postCreatedAtText:q,postCreatedAtDate:G,visibleReplies:F}=uS({post:e,userNickname:t,currentTitle:r,userProfileImage:M?n:void 0}),X=c.useMemo(()=>M?n&&n.trim().length>0?n:null:_,[M,n,_]),J=c.useCallback(Q=>{Q.key==="Enter"&&!Q.shiftKey&&(Q.preventDefault(),p())},[p]);return c.useMemo(()=>{const Q=e.authorUid||e.userId;return s?.includes(Q)},[e,s])?a.jsxs("div",{className:"h-full flex flex-col items-center justify-center space-y-4 bg-background",children:[a.jsx("div",{className:"p-4 rounded-full bg-muted",children:a.jsx(as,{className:"w-8 h-8 text-muted-foreground"})}),a.jsx("p",{className:"text-muted-foreground font-medium",children:"  ."}),a.jsx(oe,{variant:"outline",onClick:x,children:" "})]}):a.jsxs("div",{className:"h-full flex flex-col",children:[a.jsx("div",{className:"bg-card/95 border-b border-border p-4 pt-[calc(var(--safe-area-inset-top)+1rem)] flex-shrink-0",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(oe,{variant:"ghost",size:"icon",onClick:x,children:a.jsx(gi,{className:"w-5 h-5"})}),a.jsx("h2",{className:"font-medium",children:" "})]})}),a.jsx("div",{ref:j,className:"flex-1 scroll-container",children:a.jsxs("div",{className:"px-4 py-3 pb-24 space-y-4",children:[a.jsx(et,{className:"border-border/60 shadow-sm bg-card/80 backdrop-blur-sm",children:a.jsx(tt,{className:"p-6",children:a.jsxs("div",{className:"space-y-5",children:[a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx(zi,{src:X||void 0,alt:P?`${P} `:" ",nickname:W?void 0:e.author||P,fallbackText:P.charAt(0)?.toUpperCase()||"?",className:"w-12 h-12 ring-2 ring-border/30 cursor-pointer",size:48,loading:"eager",decoding:"async",onClick:W?void 0:S}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("p",{className:"font-semibold text-base "+(W?"text-muted-foreground cursor-default":"cursor-pointer hover:text-primary transition-colors duration-200"),onClick:W?void 0:C,children:P}),K&&a.jsx(An,{variant:"secondary",className:"text-[10px] px-2 py-0.5 h-auto bg-primary/10 text-primary border-primary/20",children:K})]}),a.jsx("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground",children:a.jsx(dS,{date:G,title:q})})]})]}),a.jsx("div",{className:"flex items-center space-x-2",children:a.jsxs(Qi,{children:[a.jsx(Fs,{asChild:!0,children:a.jsx(oe,{variant:"ghost",size:"icon",className:"touch-target",children:a.jsx(Yu,{className:"w-4 h-4"})})}),a.jsx($s,{className:"w-48 p-2",align:"end",children:a.jsxs("div",{className:"space-y-1",children:[e.isOwner&&a.jsxs(oe,{variant:"ghost",size:"sm",className:"w-full justify-start text-red-500",onClick:N,children:[a.jsx(as,{className:"w-4 h-4 mr-2"}),""]}),!e.isOwner&&a.jsxs(oe,{variant:"ghost",size:"sm",className:"w-full justify-start text-red-500",onClick:T,children:[a.jsx(Xu,{className:"w-4 h-4 mr-2"}),""]})]})})]})})]}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl font-medium mb-3",children:e.title}),a.jsx("div",{className:"text-base text-foreground/90 leading-7 break-words [&>div:not(:first-child)]:mt-5 [&>div:not(:last-child)]:mb-0",children:L(e.content)})]}),e.tags&&e.tags.length>0&&a.jsx("div",{className:"flex flex-wrap gap-2",children:e.tags.map(Q=>a.jsxs(An,{variant:"secondary",children:["#",Q]},Q))}),a.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-border",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[e.author!==t?a.jsxs(oe,{variant:"ghost",size:"sm",onClick:u,className:`space-x-2 touch-target ${i?"text-amber-500":""}`,children:[i?a.jsx(Hs,{className:"w-4 h-4 text-amber-500"}):a.jsx(dr,{className:"w-4 h-4"}),a.jsx("span",{children:e.lanterns})]}):a.jsxs("div",{className:"flex items-center space-x-2 text-muted-foreground",children:[a.jsx(dr,{className:"w-4 h-4"}),a.jsx("span",{children:e.lanterns})]}),a.jsxs("div",{className:"flex items-center space-x-1 text-muted-foreground",children:[a.jsx(bi,{className:"w-4 h-4"}),a.jsx("span",{children:e.comments??e.replies?.length??0})]}),a.jsxs("div",{className:"flex items-center space-x-1 text-muted-foreground",children:[a.jsx(hy,{className:"w-4 h-4"}),a.jsx("span",{children:e.views??0})]})]}),a.jsx(oe,{variant:m?"default":"ghost",size:"sm",onClick:f,className:"flex items-center space-x-1 touch-target",children:a.jsx(yi,{className:`w-4 h-4 ${m?"fill-current":""}`})})]})]})})}),a.jsx(mS,{post:e,userNickname:t,userProfileImage:n,currentTitle:r,now:E,hasGuide:y,isReplyLanterned:l,onReplyLanternToggle:d,onGuideSelect:b,onMentionReplyAuthor:R,onReplyAuthorClick:k,onReportReply:A,renderContentWithMentions:L,userProfiles:I,visibleReplies:F,blockedUserIds:s}),a.jsx(et,{className:"border-border/60 shadow-sm bg-card/80 backdrop-blur-sm",children:a.jsx(tt,{className:"p-4",children:a.jsxs("div",{className:"space-y-4",children:[a.jsx(of,{ref:g,placeholder:O?"    .":" 0    ",value:v,onChange:w,onKeyDown:J,disabled:!O,className:"min-h-[100px] resize-none border-border/60 focus:border-primary/50 transition-colors duration-200 bg-background/50"}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("span",{className:"text-xs text-muted-foreground",children:[v.length,"/1000"]}),a.jsxs(oe,{onClick:p,disabled:!v.trim()||!O,size:"sm",className:"touch-target px-6 py-2 rounded-xl transition-all duration-200 disabled:opacity-50",children:[a.jsx(My,{className:"w-4 h-4 mr-2"})," "]})]})]})})})]})})]})}const mS=D.memo(function({post:t,userNickname:n,userProfileImage:r,currentTitle:o,now:s,hasGuide:i,visibleReplies:l,isReplyLanterned:u,onReplyLanternToggle:d,onGuideSelect:m,onMentionReplyAuthor:f,onReplyAuthorClick:h,onReportReply:y,renderContentWithMentions:b,userProfiles:v,blockedUserIds:w}){const p=t.author===n,g=D.useMemo(()=>!w||w.length===0?l:l.filter(x=>{const S=x.authorUid||x.userId;return S?!w.includes(S):!0}),[l,w]);return a.jsx("div",{className:"space-y-3",children:g.map(x=>a.jsx(hS,{reply:x,postId:t.id,userNickname:n,userProfileImage:r,currentTitle:o,now:s,isPostAuthor:p,isLanterned:u(x.id),isGuide:x.isGuide||t.guideReplyId===x.id,hasGuideAlready:i,onReplyLanternToggle:d,onGuideSelect:m,onMentionReplyAuthor:f,onReplyAuthorClick:h,onReportReply:y,renderContentWithMentions:b,userProfiles:v},x.id))})}),hS=D.memo(function({reply:t,postId:n,userNickname:r,userProfileImage:o,currentTitle:s,now:i,isPostAuthor:l,isLanterned:u,isGuide:d,hasGuideAlready:m,onReplyLanternToggle:f,onGuideSelect:h,onMentionReplyAuthor:y,onReplyAuthorClick:b,onReportReply:v,renderContentWithMentions:w,userProfiles:p}){const g=t.author===r,x=t.isAi===!0,S=t.aiLabel??"[AI ]",C=typeof t.aiSummary=="string"&&t.aiSummary.length>0?t.aiSummary:"1       .",R=c.useCallback(()=>{f(t.id,n)},[f,n,t.id]),k=c.useCallback(()=>{h(t.id,t.author,n)},[h,n,t.author,t.id]),T=c.useCallback(()=>{y(t.author)},[y,t.author]),N=c.useCallback(()=>{b(t.author)},[b,t.author]),A=c.useCallback(()=>{v(t)},[v,t]),L=t.authorUid?p[t.authorUid]:void 0,O=L?.currentTitleId??null,E=tl(O),j=g&&o?o:L?.profileImage??t.authorAvatar??null,M=el(t.author??"",r,s),I=E||M,_=t.authorDeleted===!0||t.author===" ",P=Oi(t.author,_),W=Is(t.author,_),K=W?null:j,q=W?null:I;let G=null;if(t.createdAt instanceof Date)G=t.createdAt;else if(t.createdAt&&typeof t.createdAt.toDate=="function")G=t.createdAt.toDate();else if(typeof t.createdAt=="string"||typeof t.createdAt=="number"){const J=new Date(t.createdAt);Number.isNaN(J.getTime())||(G=J)}let F="";G?F=As(G,i):typeof t.timeAgo=="string"&&t.timeAgo.length>0&&(F=t.timeAgo);const X=G?gm(G):"";return a.jsx(et,{className:`border-border/60 shadow-sm bg-card/40 backdrop-blur-sm list-optimized ${d?"ring-2 ring-amber-500/50 bg-amber-500/5":""}`,children:a.jsx(tt,{className:"p-4",children:a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(zi,{src:K||void 0,alt:P?`${P} `:" ",nickname:W?void 0:t.author||P,fallbackText:P.charAt(0)?.toUpperCase()||"?",className:"w-9 h-9 ring-2 ring-border/20 "+(W?"":"cursor-pointer"),size:36,loading:"lazy",decoding:"async",onClick:W?void 0:N}),a.jsx("div",{children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("p",{className:"font-medium text-sm "+(W?"text-muted-foreground cursor-default":"cursor-pointer hover:text-primary transition-colors duration-200"),onClick:W?void 0:T,children:P}),q&&a.jsx(An,{variant:"secondary",className:"text-[10px] px-2 py-0.5 h-auto bg-primary/10 text-primary border-primary/20",children:q}),x&&a.jsx(Hf,{children:a.jsxs(Xw,{children:[a.jsx(Kw,{asChild:!0,children:a.jsx(An,{variant:"outline",className:"text-[10px] px-2 py-0.5 h-auto border-primary/40 text-primary bg-primary/5",children:S})}),a.jsx(Jw,{side:"top",align:"start",children:a.jsx("p",{className:"max-w-xs text-xs leading-snug",children:C})})]})}),d&&a.jsxs(An,{className:"bg-amber-500 text-white text-[10px] px-2 py-0 flex items-center",children:[a.jsx(ss,{className:"w-3 h-3 mr-1"}),""]})]})})]}),!g&&a.jsxs(Qi,{children:[a.jsx(Fs,{asChild:!0,children:a.jsx(oe,{variant:"ghost",size:"icon",className:"w-8 h-8",children:a.jsx(Yu,{className:"w-4 h-4"})})}),a.jsx($s,{className:"w-48 p-2",align:"end",children:a.jsxs("div",{className:"space-y-1",children:[l&&!m&&!d&&!x&&a.jsxs(oe,{variant:"ghost",size:"sm",className:"w-full justify-start text-amber-600",onClick:k,children:[a.jsx(ss,{className:"w-4 h-4 mr-2"})," "]}),a.jsxs(oe,{variant:"ghost",size:"sm",className:"w-full justify-start text-red-500",onClick:A,children:[a.jsx(Xu,{className:"w-4 h-4 mr-2"}),""]})]})})]})]}),a.jsx("div",{className:"text-sm text-foreground/90 leading-6 break-words [&>div:not(:first-child)]:mt-4 [&>div:not(:last-child)]:mb-0",children:w(t.content)}),a.jsxs("div",{className:"flex items-center justify-between pt-2",children:[a.jsx("div",{className:"flex items-center space-x-3",children:g?a.jsxs("div",{className:"flex items-center space-x-1 text-muted-foreground px-2",children:[a.jsx(dr,{className:"w-4 h-4"}),a.jsx("span",{className:"text-xs",children:t.lanterns})]}):a.jsxs(oe,{variant:"ghost",size:"sm",onClick:R,className:`space-x-1 h-8 ${u?"text-amber-500":""}`,children:[u?a.jsx(Hs,{className:"w-4 h-4 text-amber-500"}):a.jsx(dr,{className:"w-4 h-4"}),a.jsx("span",{className:"text-xs",children:t.lanterns})]})}),a.jsx("div",{className:"flex flex-col items-end leading-tight text-xs text-muted-foreground",children:F&&a.jsx("span",{title:X||void 0,children:F})})]})]})})})},(e,t)=>!(e.reply.id!==t.reply.id||e.isLanterned!==t.isLanterned||e.isGuide!==t.isGuide||e.hasGuideAlready!==t.hasGuideAlready||e.reply.lanterns!==t.reply.lanterns||e.reply.content!==t.reply.content||e.reply.author!==t.reply.author||e.reply.authorAvatar!==t.reply.authorAvatar||e.reply.createdAt!==t.reply.createdAt||e.reply.authorUid!==t.reply.authorUid||e.reply.timeAgo!==t.reply.timeAgo||e.reply.isAi!==t.reply.isAi||e.reply.aiLabel!==t.reply.aiLabel||e.reply.aiSummary!==t.reply.aiSummary||e.userNickname!==t.userNickname||e.currentTitle!==t.currentTitle||e.userProfileImage!==t.userProfileImage||e.isPostAuthor!==t.isPostAuthor)),Ws=0,Gn=1,Ur=2,ym=4;function Fc(e){return()=>e}function pS(e){e()}function xm(e,t){return n=>e(t(n))}function $c(e,t){return()=>e(t)}function gS(e,t){return n=>e(t,n)}function nl(e){return e!==void 0}function yS(...e){return()=>{e.map(pS)}}function Br(){}function Vs(e,t){return t(e),e}function xS(e,t){return t(e)}function Oe(...e){return e}function Ae(e,t){return e(Gn,t)}function de(e,t){e(Ws,t)}function rl(e){e(Ur)}function Be(e){return e(ym)}function re(e,t){return Ae(e,gS(t,Ws))}function tn(e,t){const n=e(Gn,r=>{n(),t(r)});return n}function Hc(e){let t,n;return r=>o=>{t=o,n&&clearTimeout(n),n=setTimeout(()=>{r(t)},e)}}function vm(e,t){return e===t}function Me(e=vm){let t;return n=>r=>{e(t,r)||(t=r,n(r))}}function ie(e){return t=>n=>{e(n)&&t(n)}}function Z(e){return t=>xm(t,e)}function un(e){return t=>()=>{t(e)}}function $(e,...t){const n=vS(...t);return((r,o)=>{switch(r){case Ur:rl(e);return;case Gn:return Ae(e,n(o))}})}function fn(e,t){return n=>r=>{n(t=e(t,r))}}function fr(e){return t=>n=>{e>0?e--:t(n)}}function Nn(e){let t=null,n;return r=>o=>{t=o,!n&&(n=setTimeout(()=>{n=void 0,r(t)},e))}}function me(...e){const t=new Array(e.length);let n=0,r=null;const o=Math.pow(2,e.length)-1;return e.forEach((s,i)=>{const l=Math.pow(2,i);Ae(s,u=>{const d=n;n=n|l,t[i]=u,d!==o&&n===o&&r&&(r(),r=null)})}),s=>i=>{const l=()=>{s([i].concat(t))};n===o?l():r=l}}function vS(...e){return t=>e.reduceRight(xS,t)}function bS(e){let t,n;const r=()=>t?.();return function(o,s){switch(o){case Gn:return s?n===s?void 0:(r(),n=s,t=Ae(e,s),t):(r(),Br);case Ur:r(),n=null;return}}}function V(e){let t=e;const n=be();return((r,o)=>{switch(r){case Ws:t=o;break;case Gn:{o(t);break}case ym:return t}return n(r,o)})}function ct(e,t){return Vs(V(t),n=>re(e,n))}function be(){const e=[];return((t,n)=>{switch(t){case Ws:e.slice().forEach(r=>{r(n)});return;case Ur:e.splice(0,e.length);return;case Gn:return e.push(n),()=>{const r=e.indexOf(n);r>-1&&e.splice(r,1)}}})}function Mt(e){return Vs(be(),t=>re(e,t))}function Te(e,t=[],{singleton:n}={singleton:!0}){return{constructor:e,dependencies:t,id:wS(),singleton:n}}const wS=()=>Symbol();function kS(e){const t=new Map,n=({constructor:r,dependencies:o,id:s,singleton:i})=>{if(i&&t.has(s))return t.get(s);const l=r(o.map(u=>n(u)));return i&&t.set(s,l),l};return n(e)}function qe(...e){const t=be(),n=new Array(e.length);let r=0;const o=Math.pow(2,e.length)-1;return e.forEach((s,i)=>{const l=Math.pow(2,i);Ae(s,u=>{n[i]=u,r=r|l,r===o&&de(t,n)})}),function(s,i){switch(s){case Ur:{rl(t);return}case Gn:return r===o&&i(n),Ae(t,i)}}}function ae(e,t=vm){return $(e,Me(t))}function Ja(...e){return function(t,n){switch(t){case Ur:return;case Gn:return yS(...e.map(r=>Ae(r,n)))}}}var Ct=(e=>(e[e.DEBUG=0]="DEBUG",e[e.INFO=1]="INFO",e[e.WARN=2]="WARN",e[e.ERROR=3]="ERROR",e))(Ct||{});const SS={0:"debug",3:"error",1:"log",2:"warn"},CS=()=>typeof globalThis>"u"?window:globalThis,qn=Te(()=>{const e=V(3);return{log:V((t,n,r=1)=>{var o;const s=(o=CS().VIRTUOSO_LOG_LEVEL)!=null?o:Be(e);r>=s}),logLevel:e}},[],{singleton:!0});function mr(e,t,n){return ol(e,t,n).callbackRef}function ol(e,t,n){const r=D.useRef(null);let o=i=>{};const s=D.useMemo(()=>typeof ResizeObserver<"u"?new ResizeObserver(i=>{const l=()=>{const u=i[0].target;u.offsetParent!==null&&e(u)};n?l():requestAnimationFrame(l)}):null,[e,n]);return o=i=>{i&&t?(s?.observe(i),r.current=i):(r.current&&s?.unobserve(r.current),r.current=null)},{callbackRef:o,ref:r}}function TS(e,t,n,r,o,s,i,l,u){const d=D.useCallback(m=>{const f=NS(m.children,t,l?"offsetWidth":"offsetHeight",o);let h=m.parentElement;for(;!h.dataset.virtuosoScroller;)h=h.parentElement;const y=h.lastElementChild.dataset.viewportType==="window";let b;y&&(b=h.ownerDocument.defaultView);const v=i?l?i.scrollLeft:i.scrollTop:y?l?b.scrollX||b.document.documentElement.scrollLeft:b.scrollY||b.document.documentElement.scrollTop:l?h.scrollLeft:h.scrollTop,w=i?l?i.scrollWidth:i.scrollHeight:y?l?b.document.documentElement.scrollWidth:b.document.documentElement.scrollHeight:l?h.scrollWidth:h.scrollHeight,p=i?l?i.offsetWidth:i.offsetHeight:y?l?b.innerWidth:b.innerHeight:l?h.offsetWidth:h.offsetHeight;r({scrollHeight:w,scrollTop:Math.max(v,0),viewportHeight:p}),s?.(l?Wc("column-gap",getComputedStyle(m).columnGap,o):Wc("row-gap",getComputedStyle(m).rowGap,o)),f!==null&&e(f)},[e,t,o,s,i,r,l]);return ol(d,n,u)}function NS(e,t,n,r){const o=e.length;if(o===0)return null;const s=[];for(let i=0;i<o;i++){const l=e.item(i);if(l.dataset.index===void 0)continue;const u=parseInt(l.dataset.index),d=parseFloat(l.dataset.knownSize),m=t(l,n);if(m===0&&r("Zero-sized element, this should not happen",{child:l},Ct.ERROR),m===d)continue;const f=s[s.length-1];s.length===0||f.size!==m||f.endIndex!==u-1?s.push({endIndex:u,size:m,startIndex:u}):s[s.length-1].endIndex++}return s}function Wc(e,t,n){return t!=="normal"&&!(t!=null&&t.endsWith("px"))&&n(`${e} was not resolved to pixel value correctly`,t,Ct.WARN),t==="normal"?0:parseInt(t??"0",10)}function bm(e,t,n){const r=D.useRef(null),o=D.useCallback(u=>{if(!(u!=null&&u.offsetParent))return;const d=u.getBoundingClientRect(),m=d.width;let f,h;if(t){const y=t.getBoundingClientRect(),b=d.top-y.top;h=y.height-Math.max(0,b),f=b+t.scrollTop}else{const y=i.current.ownerDocument.defaultView;h=y.innerHeight-Math.max(0,d.top),f=d.top+y.scrollY}r.current={offsetTop:f,visibleHeight:h,visibleWidth:m},e(r.current)},[e,t]),{callbackRef:s,ref:i}=ol(o,!0,n),l=D.useCallback(()=>{o(i.current)},[o,i]);return D.useEffect(()=>{var u;if(t){t.addEventListener("scroll",l);const d=new ResizeObserver(()=>{requestAnimationFrame(l)});return d.observe(t),()=>{t.removeEventListener("scroll",l),d.unobserve(t)}}else{const d=(u=i.current)==null?void 0:u.ownerDocument.defaultView;return d?.addEventListener("scroll",l),d?.addEventListener("resize",l),()=>{d?.removeEventListener("scroll",l),d?.removeEventListener("resize",l)}}},[l,t,i]),s}const ht=Te(()=>{const e=be(),t=be(),n=V(0),r=be(),o=V(0),s=be(),i=be(),l=V(0),u=V(0),d=V(0),m=V(0),f=be(),h=be(),y=V(!1),b=V(!1),v=V(!1);return re($(e,Z(({scrollTop:w})=>w)),t),re($(e,Z(({scrollHeight:w})=>w)),i),re(t,o),{deviation:n,fixedFooterHeight:d,fixedHeaderHeight:u,footerHeight:m,headerHeight:l,horizontalDirection:b,scrollBy:h,scrollContainerState:e,scrollHeight:i,scrollingInProgress:y,scrollTo:f,scrollTop:t,skipAnimationFrameInResizeObserver:v,smoothScrollTargetReached:r,statefulScrollTop:o,viewportHeight:s}},[],{singleton:!0}),io={lvl:0};function wm(e,t){const n=e.length;if(n===0)return[];let{index:r,value:o}=t(e[0]);const s=[];for(let i=1;i<n;i++){const{index:l,value:u}=t(e[i]);s.push({end:l-1,start:r,value:o}),r=l,o=u}return s.push({end:1/0,start:r,value:o}),s}function Ie(e){return e===io}function lo(e,t){if(!Ie(e))return t===e.k?e.v:t<e.k?lo(e.l,t):lo(e.r,t)}function on(e,t,n="k"){if(Ie(e))return[-1/0,void 0];if(Number(e[n])===t)return[e.k,e.v];if(Number(e[n])<t){const r=on(e.r,t,n);return r[0]===-1/0?[e.k,e.v]:r}return on(e.l,t,n)}function _t(e,t,n){return Ie(e)?Cm(t,n,1):t===e.k?Qe(e,{k:t,v:n}):t<e.k?Vc(Qe(e,{l:_t(e.l,t,n)})):Vc(Qe(e,{r:_t(e.r,t,n)}))}function Er(){return io}function jr(e,t,n){if(Ie(e))return[];const r=on(e,t)[0];return RS(Qa(e,r,n))}function Za(e,t){if(Ie(e))return io;const{k:n,l:r,r:o}=e;if(t===n){if(Ie(r))return o;if(Ie(o))return r;{const[s,i]=Sm(r);return Jo(Qe(e,{k:s,l:km(r),v:i}))}}else return t<n?Jo(Qe(e,{l:Za(r,t)})):Jo(Qe(e,{r:Za(o,t)}))}function sr(e){return Ie(e)?[]:[...sr(e.l),{k:e.k,v:e.v},...sr(e.r)]}function Qa(e,t,n){if(Ie(e))return[];const{k:r,l:o,r:s,v:i}=e;let l=[];return r>t&&(l=l.concat(Qa(o,t,n))),r>=t&&r<=n&&l.push({k:r,v:i}),r<=n&&(l=l.concat(Qa(s,t,n))),l}function Jo(e){const{l:t,lvl:n,r}=e;if(r.lvl>=n-1&&t.lvl>=n-1)return e;if(n>r.lvl+1){if(Ca(t))return Tm(Qe(e,{lvl:n-1}));if(!Ie(t)&&!Ie(t.r))return Qe(t.r,{l:Qe(t,{r:t.r.l}),lvl:n,r:Qe(e,{l:t.r.r,lvl:n-1})});throw new Error("Unexpected empty nodes")}else{if(Ca(e))return ei(Qe(e,{lvl:n-1}));if(!Ie(r)&&!Ie(r.l)){const o=r.l,s=Ca(o)?r.lvl-1:r.lvl;return Qe(o,{l:Qe(e,{lvl:n-1,r:o.l}),lvl:o.lvl+1,r:ei(Qe(r,{l:o.r,lvl:s}))})}else throw new Error("Unexpected empty nodes")}}function Qe(e,t){return Cm(t.k!==void 0?t.k:e.k,t.v!==void 0?t.v:e.v,t.lvl!==void 0?t.lvl:e.lvl,t.l!==void 0?t.l:e.l,t.r!==void 0?t.r:e.r)}function km(e){return Ie(e.r)?e.l:Jo(Qe(e,{r:km(e.r)}))}function Ca(e){return Ie(e)||e.lvl>e.r.lvl}function Sm(e){return Ie(e.r)?[e.k,e.v]:Sm(e.r)}function Cm(e,t,n,r=io,o=io){return{k:e,l:r,lvl:n,r:o,v:t}}function Vc(e){return ei(Tm(e))}function Tm(e){const{l:t}=e;return!Ie(t)&&t.lvl===e.lvl?Qe(t,{r:Qe(e,{l:t.r})}):e}function ei(e){const{lvl:t,r:n}=e;return!Ie(n)&&!Ie(n.r)&&n.lvl===t&&n.r.lvl===t?Qe(n,{l:Qe(e,{r:n.l}),lvl:t+1}):e}function RS(e){return wm(e,({k:t,v:n})=>({index:t,value:n}))}function Nm(e,t){return!!(e&&e.startIndex===t.startIndex&&e.endIndex===t.endIndex)}function co(e,t){return!!(e&&e[0]===t[0]&&e[1]===t[1])}const sl=Te(()=>({recalcInProgress:V(!1)}),[],{singleton:!0});function Rm(e,t,n){return e[vs(e,t,n)]}function vs(e,t,n,r=0){let o=e.length-1;for(;r<=o;){const s=Math.floor((r+o)/2),i=e[s],l=n(i,t);if(l===0)return s;if(l===-1){if(o-r<2)return s-1;o=s-1}else{if(o===r)return s;r=s+1}}throw new Error(`Failed binary finding record in array - ${e.join(",")}, searched for ${t}`)}function AS(e,t,n,r){const o=vs(e,t,r),s=vs(e,n,r,o);return e.slice(o,s+1)}function Wn(e,t){return Math.round(e.getBoundingClientRect()[t])}function Gs(e){return!Ie(e.groupOffsetTree)}function al({index:e},t){return t===e?0:t<e?-1:1}function ES(){return{groupIndices:[],groupOffsetTree:Er(),lastIndex:0,lastOffset:0,lastSize:0,offsetTree:[],sizeTree:Er()}}function jS(e,t){let n=Ie(e)?0:1/0;for(const r of t){const{endIndex:o,size:s,startIndex:i}=r;if(n=Math.min(n,i),Ie(e)){e=_t(e,0,s);continue}const l=jr(e,i-1,o+1);if(l.some(OS(r)))continue;let u=!1,d=!1;for(const{end:m,start:f,value:h}of l)u?(o>=f||s===h)&&(e=Za(e,f)):(d=h!==s,u=!0),m>o&&o>=f&&h!==s&&(e=_t(e,o+1,h));d&&(e=_t(e,i,s))}return[e,n]}function IS(e){return typeof e.groupIndex<"u"}function _S({offset:e},t){return t===e?0:t<e?-1:1}function uo(e,t,n){if(t.length===0)return 0;const{index:r,offset:o,size:s}=Rm(t,e,al),i=e-r,l=s*i+(i-1)*n+o;return l>0?l+n:l}function Am(e,t){if(!Gs(t))return e;let n=0;for(;t.groupIndices[n]<=e+n;)n++;return e+n}function Em(e,t,n){if(IS(e))return t.groupIndices[e.groupIndex]+1;{const r=e.index==="LAST"?n:e.index;let o=Am(r,t);return o=Math.max(0,o,Math.min(n,o)),o}}function PS(e,t,n,r=0){return r>0&&(t=Math.max(t,Rm(e,r,al).offset)),wm(AS(e,t,n,_S),MS)}function LS(e,[t,n,r,o]){t.length>0&&r("received item sizes",t,Ct.DEBUG);const s=e.sizeTree;let i=s,l=0;if(n.length>0&&Ie(s)&&t.length===2){const h=t[0].size,y=t[1].size;i=n.reduce((b,v)=>_t(_t(b,v,h),v+1,y),i)}else[i,l]=jS(i,t);if(i===s)return e;const{lastIndex:u,lastOffset:d,lastSize:m,offsetTree:f}=ti(e.offsetTree,l,i,o);return{groupIndices:n,groupOffsetTree:n.reduce((h,y)=>_t(h,y,uo(y,f,o)),Er()),lastIndex:u,lastOffset:d,lastSize:m,offsetTree:f,sizeTree:i}}function DS(e){return sr(e).map(({k:t,v:n},r,o)=>{const s=o[r+1];return{endIndex:s?s.k-1:1/0,size:n,startIndex:t}})}function Gc(e,t){let n=0,r=0;for(;n<e;)n+=t[r+1]-t[r]-1,r++;return r-(n===e?0:1)}function ti(e,t,n,r){let o=e,s=0,i=0,l=0,u=0;if(t!==0){u=vs(o,t-1,al),l=o[u].offset;const d=on(n,t-1);s=d[0],i=d[1],o.length&&o[u].size===on(n,t)[1]&&(u-=1),o=o.slice(0,u+1)}else o=[];for(const{start:d,value:m}of jr(n,t,1/0)){const f=d-s,h=f*i+l+f*r;o.push({index:d,offset:h,size:m}),s=d,l=h,i=m}return{lastIndex:s,lastOffset:l,lastSize:i,offsetTree:o}}function MS(e){return{index:e.index,value:e}}function OS(e){const{endIndex:t,size:n,startIndex:r}=e;return o=>o.start===r&&(o.end===t||o.end===1/0)&&o.value===n}const zS={offsetHeight:"height",offsetWidth:"width"},bn=Te(([{log:e},{recalcInProgress:t}])=>{const n=be(),r=be(),o=ct(r,0),s=be(),i=be(),l=V(0),u=V([]),d=V(void 0),m=V(void 0),f=V(void 0),h=V(void 0),y=V((k,T)=>Wn(k,zS[T])),b=V(void 0),v=V(0),w=ES(),p=ct($(n,me(u,e,v),fn(LS,w),Me()),w),g=ct($(u,Me(),fn((k,T)=>({current:T,prev:k.current}),{current:[],prev:[]}),Z(({prev:k})=>k)),[]);re($(u,ie(k=>k.length>0),me(p,v),Z(([k,T,N])=>{const A=k.reduce((L,O,E)=>_t(L,O,uo(O,T.offsetTree,N)||E),Er());return{...T,groupIndices:k,groupOffsetTree:A}})),p),re($(r,me(p),ie(([k,{lastIndex:T}])=>k<T),Z(([k,{lastIndex:T,lastSize:N}])=>[{endIndex:T,size:N,startIndex:k}])),n),re(d,m);const x=ct($(d,Z(k=>k===void 0)),!0);re($(m,ie(k=>k!==void 0&&Ie(Be(p).sizeTree)),Z(k=>{const T=Be(f),N=Be(u).length>0;return T?N?[{endIndex:0,size:T,startIndex:0},{endIndex:1,size:k,startIndex:1}]:[]:[{endIndex:0,size:k,startIndex:0}]})),n),re($(h,ie(k=>k!==void 0&&k.length>0&&Ie(Be(p).sizeTree)),Z(k=>{const T=[];let N=k[0],A=0;for(let L=1;L<k.length;L++){const O=k[L];O!==N&&(T.push({endIndex:L-1,size:N,startIndex:A}),N=O,A=L)}return T.push({endIndex:k.length-1,size:N,startIndex:A}),T})),n),re($(u,me(f,m),ie(([,k,T])=>k!==void 0&&T!==void 0),Z(([k,T,N])=>{const A=[];for(let L=0;L<k.length;L++){const O=k[L],E=k[L+1];A.push({startIndex:O,endIndex:O,size:T}),E!==void 0&&A.push({startIndex:O+1,endIndex:E-1,size:N})}return A})),n);const S=Mt($(n,me(p),fn(({sizes:k},[T,N])=>({changed:N!==k,sizes:N}),{changed:!1,sizes:w}),Z(k=>k.changed)));Ae($(l,fn((k,T)=>({diff:k.prev-T,prev:T}),{diff:0,prev:0}),Z(k=>k.diff)),k=>{const{groupIndices:T}=Be(p);if(k>0)de(t,!0),de(s,k+Gc(k,T));else if(k<0){const N=Be(g);N.length>0&&(k-=Gc(-k,N)),de(i,k)}}),Ae($(l,me(e)),([k,T])=>{k<0&&T("`firstItemIndex` prop should not be set to less than zero. If you don't know the total count, just use a very high value",{firstItemIndex:l},Ct.ERROR)});const C=Mt(s);re($(s,me(p),Z(([k,T])=>{const N=T.groupIndices.length>0,A=[],L=T.lastSize;if(N){const O=lo(T.sizeTree,0);let E=0,j=0;for(;E<k;){const I=T.groupIndices[j],_=T.groupIndices.length===j+1?1/0:T.groupIndices[j+1]-I-1;A.push({endIndex:I,size:O,startIndex:I}),A.push({endIndex:I+1+_-1,size:L,startIndex:I+1}),j++,E+=_+1}const M=sr(T.sizeTree);return E!==k&&M.shift(),M.reduce((I,{k:_,v:P})=>{let W=I.ranges;return I.prevSize!==0&&(W=[...I.ranges,{endIndex:_+k-1,size:I.prevSize,startIndex:I.prevIndex}]),{prevIndex:_+k,prevSize:P,ranges:W}},{prevIndex:k,prevSize:0,ranges:A}).ranges}return sr(T.sizeTree).reduce((O,{k:E,v:j})=>({prevIndex:E+k,prevSize:j,ranges:[...O.ranges,{endIndex:E+k-1,size:O.prevSize,startIndex:O.prevIndex}]}),{prevIndex:0,prevSize:L,ranges:[]}).ranges})),n);const R=Mt($(i,me(p,v),Z(([k,{offsetTree:T},N])=>{const A=-k;return uo(A,T,N)})));return re($(i,me(p,v),Z(([k,T,N])=>{if(T.groupIndices.length>0){if(Ie(T.sizeTree))return T;let A=Er();const L=Be(g);let O=0,E=0,j=0;for(;O<-k;){j=L[E];const M=L[E+1]-j-1;E++,O+=M+1}if(A=sr(T.sizeTree).reduce((M,{k:I,v:_})=>_t(M,Math.max(0,I+k),_),A),O!==-k){const M=lo(T.sizeTree,j);A=_t(A,0,M);const I=on(T.sizeTree,-k+1)[1];A=_t(A,1,I)}return{...T,sizeTree:A,...ti(T.offsetTree,0,A,N)}}else{const A=sr(T.sizeTree).reduce((L,{k:O,v:E})=>_t(L,Math.max(0,O+k),E),Er());return{...T,sizeTree:A,...ti(T.offsetTree,0,A,N)}}})),p),{beforeUnshiftWith:C,data:b,defaultItemSize:m,firstItemIndex:l,fixedItemSize:d,fixedGroupSize:f,gap:v,groupIndices:u,heightEstimates:h,itemSize:y,listRefresh:S,shiftWith:i,shiftWithOffset:R,sizeRanges:n,sizes:p,statefulTotalCount:o,totalCount:r,trackItemSizes:x,unshiftWith:s}},Oe(qn,sl),{singleton:!0});function US(e){return e.reduce((t,n)=>(t.groupIndices.push(t.totalCount),t.totalCount+=n+1,t),{groupIndices:[],totalCount:0})}const jm=Te(([{groupIndices:e,sizes:t,totalCount:n},{headerHeight:r,scrollTop:o}])=>{const s=be(),i=be(),l=Mt($(s,Z(US)));return re($(l,Z(u=>u.totalCount)),n),re($(l,Z(u=>u.groupIndices)),e),re($(qe(o,t,r),ie(([u,d])=>Gs(d)),Z(([u,d,m])=>on(d.groupOffsetTree,Math.max(u-m,0),"v")[0]),Me(),Z(u=>[u])),i),{groupCounts:s,topItemsIndexes:i}},Oe(bn,ht)),Yn=Te(([{log:e}])=>{const t=V(!1),n=Mt($(t,ie(r=>r),Me()));return Ae(t,r=>{r&&Be(e)("props updated",{},Ct.DEBUG)}),{didMount:n,propsReady:t}},Oe(qn),{singleton:!0}),BS=typeof document<"u"&&"scrollBehavior"in document.documentElement.style;function Im(e){const t=typeof e=="number"?{index:e}:e;return t.align||(t.align="start"),(!t.behavior||!BS)&&(t.behavior="auto"),t.offset||(t.offset=0),t}const bo=Te(([{gap:e,listRefresh:t,sizes:n,totalCount:r},{fixedFooterHeight:o,fixedHeaderHeight:s,footerHeight:i,headerHeight:l,scrollingInProgress:u,scrollTo:d,smoothScrollTargetReached:m,viewportHeight:f},{log:h}])=>{const y=be(),b=be(),v=V(0);let w=null,p=null,g=null;function x(){w&&(w(),w=null),g&&(g(),g=null),p&&(clearTimeout(p),p=null),de(u,!1)}return re($(y,me(n,f,r,v,l,i,h),me(e,s,o),Z(([[S,C,R,k,T,N,A,L],O,E,j])=>{const M=Im(S),{align:I,behavior:_,offset:P}=M,W=k-1,K=Em(M,C,W);let q=uo(K,C.offsetTree,O)+N;I==="end"?(q+=E+on(C.sizeTree,K)[1]-R+j,K===W&&(q+=A)):I==="center"?q+=(E+on(C.sizeTree,K)[1]-R+j)/2:q-=T,P&&(q+=P);const G=F=>{x(),F?(L("retrying to scroll to",{location:S},Ct.DEBUG),de(y,S)):(de(b,!0),L("list did not change, scroll successful",{},Ct.DEBUG))};if(x(),_==="smooth"){let F=!1;g=Ae(t,X=>{F=F||X}),w=tn(m,()=>{G(F)})}else w=tn($(t,FS(150)),G);return p=setTimeout(()=>{x()},1200),de(u,!0),L("scrolling from index to",{behavior:_,index:K,top:q},Ct.DEBUG),{behavior:_,top:q}})),d),{scrollTargetReached:b,scrollToIndex:y,topListHeight:v}},Oe(bn,ht,qn),{singleton:!0});function FS(e){return t=>{const n=setTimeout(()=>{t(!1)},e);return r=>{r&&(t(!0),clearTimeout(n))}}}function il(e,t){e==0?t():requestAnimationFrame(()=>{il(e-1,t)})}function ll(e,t){const n=t-1;return typeof e=="number"?e:e.index==="LAST"?n:e.index}const wo=Te(([{defaultItemSize:e,listRefresh:t,sizes:n},{scrollTop:r},{scrollTargetReached:o,scrollToIndex:s},{didMount:i}])=>{const l=V(!0),u=V(0),d=V(!0);return re($(i,me(u),ie(([m,f])=>!!f),un(!1)),l),re($(i,me(u),ie(([m,f])=>!!f),un(!1)),d),Ae($(qe(t,i),me(l,n,e,d),ie(([[,m],f,{sizeTree:h},y,b])=>m&&(!Ie(h)||nl(y))&&!f&&!b),me(u)),([,m])=>{tn(o,()=>{de(d,!0)}),il(4,()=>{tn(r,()=>{de(l,!0)}),de(s,m)})}),{initialItemFinalLocationReached:d,initialTopMostItemIndex:u,scrolledToInitialItem:l}},Oe(bn,ht,bo,Yn),{singleton:!0});function _m(e,t){return Math.abs(e-t)<1.01}const fo="up",Zr="down",$S="none",HS={atBottom:!1,notAtBottomBecause:"NOT_SHOWING_LAST_ITEM",state:{offsetBottom:0,scrollHeight:0,scrollTop:0,viewportHeight:0}},WS=0,ko=Te(([{footerHeight:e,headerHeight:t,scrollBy:n,scrollContainerState:r,scrollTop:o,viewportHeight:s}])=>{const i=V(!1),l=V(!0),u=be(),d=be(),m=V(4),f=V(WS),h=ct($(Ja($(ae(o),fr(1),un(!0)),$(ae(o),fr(1),un(!1),Hc(100))),Me()),!1),y=ct($(Ja($(n,un(!0)),$(n,un(!1),Hc(200))),Me()),!1);re($(qe(ae(o),ae(f)),Z(([g,x])=>g<=x),Me()),l),re($(l,Nn(50)),d);const b=Mt($(qe(r,ae(s),ae(t),ae(e),ae(m)),fn((g,[{scrollHeight:x,scrollTop:S},C,R,k,T])=>{const N=S+C-x>-T,A={scrollHeight:x,scrollTop:S,viewportHeight:C};if(N){let O,E;return S>g.state.scrollTop?(O="SCROLLED_DOWN",E=g.state.scrollTop-S):(O="SIZE_DECREASED",E=g.state.scrollTop-S||g.scrollTopDelta),{atBottom:!0,atBottomBecause:O,scrollTopDelta:E,state:A}}let L;return A.scrollHeight>g.state.scrollHeight?L="SIZE_INCREASED":C<g.state.viewportHeight?L="VIEWPORT_HEIGHT_DECREASING":S<g.state.scrollTop?L="SCROLLING_UPWARDS":L="NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM",{atBottom:!1,notAtBottomBecause:L,state:A}},HS),Me((g,x)=>g&&g.atBottom===x.atBottom))),v=ct($(r,fn((g,{scrollHeight:x,scrollTop:S,viewportHeight:C})=>{if(_m(g.scrollHeight,x))return{changed:!1,jump:0,scrollHeight:x,scrollTop:S};{const R=x-(S+C)<1;return g.scrollTop!==S&&R?{changed:!0,jump:g.scrollTop-S,scrollHeight:x,scrollTop:S}:{changed:!0,jump:0,scrollHeight:x,scrollTop:S}}},{changed:!1,jump:0,scrollHeight:0,scrollTop:0}),ie(g=>g.changed),Z(g=>g.jump)),0);re($(b,Z(g=>g.atBottom)),i),re($(i,Nn(50)),u);const w=V(Zr);re($(r,Z(({scrollTop:g})=>g),Me(),fn((g,x)=>Be(y)?{direction:g.direction,prevScrollTop:x}:{direction:x<g.prevScrollTop?fo:Zr,prevScrollTop:x},{direction:Zr,prevScrollTop:0}),Z(g=>g.direction)),w),re($(r,Nn(50),un($S)),w);const p=V(0);return re($(h,ie(g=>!g),un(0)),p),re($(o,Nn(100),me(h),ie(([g,x])=>x),fn(([g,x],[S])=>[x,S],[0,0]),Z(([g,x])=>x-g)),p),{atBottomState:b,atBottomStateChange:u,atBottomThreshold:m,atTopStateChange:d,atTopThreshold:f,isAtBottom:i,isAtTop:l,isScrolling:h,lastJumpDueToItemResize:v,scrollDirection:w,scrollVelocity:p}},Oe(ht)),mo="top",ho="bottom",qc="none";function Yc(e,t,n){return typeof e=="number"?n===fo&&t===mo||n===Zr&&t===ho?e:0:n===fo?t===mo?e.main:e.reverse:t===ho?e.main:e.reverse}function Xc(e,t){var n;return typeof e=="number"?e:(n=e[t])!=null?n:0}const cl=Te(([{deviation:e,fixedHeaderHeight:t,headerHeight:n,scrollTop:r,viewportHeight:o}])=>{const s=be(),i=V(0),l=V(0),u=V(0),d=ct($(qe(ae(r),ae(o),ae(n),ae(s,co),ae(u),ae(i),ae(t),ae(e),ae(l)),Z(([m,f,h,[y,b],v,w,p,g,x])=>{const S=m-g,C=w+p,R=Math.max(h-S,0);let k=qc;const T=Xc(x,mo),N=Xc(x,ho);return y-=g,y+=h+p,b+=h+p,b-=g,y>m+C-T&&(k=fo),b<m-R+f+N&&(k=Zr),k!==qc?[Math.max(S-h-Yc(v,mo,k)-T,0),S-R-p+f+Yc(v,ho,k)+N]:null}),ie(m=>m!=null),Me(co)),[0,0]);return{increaseViewportBy:l,listBoundary:s,overscan:u,topListHeight:i,visibleRange:d}},Oe(ht),{singleton:!0});function VS(e,t,n){if(Gs(t)){const r=Am(e,t);return[{index:on(t.groupOffsetTree,r)[0],offset:0,size:0},{data:n?.[0],index:r,offset:0,size:0}]}return[{data:n?.[0],index:e,offset:0,size:0}]}const Ta={bottom:0,firstItemIndex:0,items:[],offsetBottom:0,offsetTop:0,top:0,topItems:[],topListHeight:0,totalCount:0};function Zo(e,t,n,r,o,s){const{lastIndex:i,lastOffset:l,lastSize:u}=o;let d=0,m=0;if(e.length>0){d=e[0].offset;const v=e[e.length-1];m=v.offset+v.size}const f=n-i,h=l+f*u+(f-1)*r,y=d,b=h-m;return{bottom:m,firstItemIndex:s,items:Kc(e,o,s),offsetBottom:b,offsetTop:d,top:y,topItems:Kc(t,o,s),topListHeight:t.reduce((v,w)=>w.size+v,0),totalCount:n}}function Pm(e,t,n,r,o,s){let i=0;if(n.groupIndices.length>0)for(const m of n.groupIndices){if(m-i>=e)break;i++}const l=e+i,u=ll(t,l),d=Array.from({length:l}).map((m,f)=>({data:s[f+u],index:f+u,offset:0,size:0}));return Zo(d,[],l,o,n,r)}function Kc(e,t,n){if(e.length===0)return[];if(!Gs(t))return e.map(d=>({...d,index:d.index+n,originalIndex:d.index}));const r=e[0].index,o=e[e.length-1].index,s=[],i=jr(t.groupOffsetTree,r,o);let l,u=0;for(const d of e){(!l||l.end<d.index)&&(l=i.shift(),u=t.groupIndices.indexOf(l.start));let m;d.index===l.start?m={index:u,type:"group"}:m={groupIndex:u,index:d.index-(u+1)+n},s.push({...m,data:d.data,offset:d.offset,originalIndex:d.index,size:d.size})}return s}function Jc(e,t){var n;return e===void 0?0:typeof e=="number"?e:(n=e[t])!=null?n:0}const hr=Te(([{data:e,firstItemIndex:t,gap:n,sizes:r,totalCount:o},s,{listBoundary:i,topListHeight:l,visibleRange:u},{initialTopMostItemIndex:d,scrolledToInitialItem:m},{topListHeight:f},h,{didMount:y},{recalcInProgress:b}])=>{const v=V([]),w=V(0),p=be(),g=V(0);re(s.topItemsIndexes,v);const x=ct($(qe(y,b,ae(u,co),ae(o),ae(r),ae(d),m,ae(v),ae(t),ae(n),ae(g),e),ie(([k,T,,N,,,,,,,,A])=>{const L=A&&A.length!==N;return k&&!T&&!L}),Z(([,,[k,T],N,A,L,O,E,j,M,I,_])=>{var P,W,K,q;const G=A,{offsetTree:F,sizeTree:X}=G,J=Be(w);if(N===0)return{...Ta,totalCount:N};if(k===0&&T===0)return J===0?{...Ta,totalCount:N}:Pm(J,L,A,j,M,_||[]);if(Ie(X))return J>0?null:Zo(VS(ll(L,N),G,_),[],N,M,G,j);const fe=[];if(E.length>0){const Re=E[0],je=E[E.length-1];let $e=0;for(const Le of jr(X,Re,je)){const pe=Le.value,Se=Math.max(Le.start,Re),_e=Math.min(Le.end,je);for(let We=Se;We<=_e;We++)fe.push({data:_?.[We],index:We,offset:$e,size:pe}),$e+=pe}}if(!O)return Zo([],fe,N,M,G,j);const Q=E.length>0?E[E.length-1]+1:0,U=PS(F,k,T,Q);if(U.length===0)return null;const le=N-1,he=Vs([],Re=>{for(const je of U){const $e=je.value;let Le=$e.offset,pe=je.start;const Se=$e.size;if($e.offset<k){pe+=Math.floor((k-$e.offset+M)/(Se+M));const We=pe-je.start;Le+=We*Se+We*M}pe<Q&&(Le+=(Q-pe)*Se,pe=Q);const _e=Math.min(je.end,le);for(let We=pe;We<=_e&&!(Le>=T);We++)Re.push({data:_?.[We],index:We,offset:Le,size:Se}),Le+=Se+M}}),Ce=Jc(I,mo),Ee=Jc(I,ho);if(he.length>0&&(Ce>0||Ee>0)){const Re=he[0],je=he[he.length-1];if(Ce>0&&Re.index>Q){const $e=Math.min(Ce,Re.index-Q),Le=[];let pe=Re.offset;for(let Se=Re.index-1;Se>=Re.index-$e;Se--){const _e=(W=(P=jr(X,Se,Se)[0])==null?void 0:P.value)!=null?W:Re.size;pe-=_e+M,Le.unshift({data:_?.[Se],index:Se,offset:pe,size:_e})}he.unshift(...Le)}if(Ee>0&&je.index<le){const $e=Math.min(Ee,le-je.index);let Le=je.offset+je.size+M;for(let pe=je.index+1;pe<=je.index+$e;pe++){const Se=(q=(K=jr(X,pe,pe)[0])==null?void 0:K.value)!=null?q:je.size;he.push({data:_?.[pe],index:pe,offset:Le,size:Se}),Le+=Se+M}}}return Zo(he,fe,N,M,G,j)}),ie(k=>k!==null),Me()),Ta);re($(e,ie(nl),Z(k=>k?.length)),o),re($(x,Z(k=>k.topListHeight)),f),re(f,l),re($(x,Z(k=>[k.top,k.bottom])),i),re($(x,Z(k=>k.items)),p);const S=Mt($(x,ie(({items:k})=>k.length>0),me(o,e),ie(([{items:k},T])=>k[k.length-1].originalIndex===T-1),Z(([,k,T])=>[k-1,T]),Me(co),Z(([k])=>k))),C=Mt($(x,Nn(200),ie(({items:k,topItems:T})=>k.length>0&&k[0].originalIndex===T.length),Z(({items:k})=>k[0].index),Me())),R=Mt($(x,ie(({items:k})=>k.length>0),Z(({items:k})=>{let T=0,N=k.length-1;for(;k[T].type==="group"&&T<N;)T++;for(;k[N].type==="group"&&N>T;)N--;return{endIndex:k[N].index,startIndex:k[T].index}}),Me(Nm)));return{endReached:S,initialItemCount:w,itemsRendered:p,listState:x,minOverscanItemCount:g,rangeChanged:R,startReached:C,topItemsIndexes:v,...h}},Oe(bn,jm,cl,wo,bo,ko,Yn,sl),{singleton:!0}),Lm=Te(([{fixedFooterHeight:e,fixedHeaderHeight:t,footerHeight:n,headerHeight:r},{listState:o}])=>{const s=be(),i=ct($(qe(n,e,r,t,o),Z(([l,u,d,m,f])=>l+u+d+m+f.offsetBottom+f.bottom)),0);return re(ae(i),s),{totalListHeight:i,totalListHeightChanged:s}},Oe(ht,hr),{singleton:!0}),GS=Te(([{viewportHeight:e},{totalListHeight:t}])=>{const n=V(!1),r=ct($(qe(n,e,t),ie(([o])=>o),Z(([,o,s])=>Math.max(0,o-s)),Nn(0),Me()),0);return{alignToBottom:n,paddingTopAddition:r}},Oe(ht,Lm),{singleton:!0}),Dm=Te(()=>({context:V(null)})),qS=({itemBottom:e,itemTop:t,locationParams:{align:n,behavior:r,...o},viewportBottom:s,viewportTop:i})=>t<i?{...o,align:n??"start",behavior:r}:e>s?{...o,align:n??"end",behavior:r}:null,Mm=Te(([{gap:e,sizes:t,totalCount:n},{fixedFooterHeight:r,fixedHeaderHeight:o,headerHeight:s,scrollingInProgress:i,scrollTop:l,viewportHeight:u},{scrollToIndex:d}])=>{const m=be();return re($(m,me(t,u,n,s,o,r,l),me(e),Z(([[f,h,y,b,v,w,p,g],x])=>{const{align:S,behavior:C,calculateViewLocation:R=qS,done:k,...T}=f,N=Em(f,h,b-1),A=uo(N,h.offsetTree,x)+v+w,L=A+on(h.sizeTree,N)[1],O=g+w,E=g+y-p,j=R({itemBottom:L,itemTop:A,locationParams:{align:S,behavior:C,...T},viewportBottom:E,viewportTop:O});return j?k&&tn($(i,ie(M=>!M),fr(Be(i)?1:2)),k):k?.(),j}),ie(f=>f!==null)),d),{scrollIntoView:m}},Oe(bn,ht,bo,hr,qn),{singleton:!0});function Zc(e){return e?e==="smooth"?"smooth":"auto":!1}const YS=(e,t)=>typeof e=="function"?Zc(e(t)):t&&Zc(e),XS=Te(([{listRefresh:e,totalCount:t,fixedItemSize:n,data:r},{atBottomState:o,isAtBottom:s},{scrollToIndex:i},{scrolledToInitialItem:l},{didMount:u,propsReady:d},{log:m},{scrollingInProgress:f},{context:h},{scrollIntoView:y}])=>{const b=V(!1),v=be();let w=null;function p(C){de(i,{align:"end",behavior:C,index:"LAST"})}Ae($(qe($(ae(t),fr(1)),u),me(ae(b),s,l,f),Z(([[C,R],k,T,N,A])=>{let L=R&&N,O="auto";return L&&(O=YS(k,T||A),L=L&&!!O),{followOutputBehavior:O,shouldFollow:L,totalCount:C}}),ie(({shouldFollow:C})=>C)),({followOutputBehavior:C,totalCount:R})=>{w&&(w(),w=null),Be(n)?requestAnimationFrame(()=>{Be(m)("following output to ",{totalCount:R},Ct.DEBUG),p(C)}):w=tn(e,()=>{Be(m)("following output to ",{totalCount:R},Ct.DEBUG),p(C),w=null})});function g(C){const R=tn(o,k=>{C&&!k.atBottom&&k.notAtBottomBecause==="SIZE_INCREASED"&&!w&&(Be(m)("scrolling to bottom due to increased size",{},Ct.DEBUG),p("auto"))});setTimeout(R,100)}Ae($(qe(ae(b),t,d),ie(([C,,R])=>C&&R),fn(({value:C},[,R])=>({refreshed:C===R,value:R}),{refreshed:!1,value:0}),ie(({refreshed:C})=>C),me(b,t)),([,C])=>{Be(l)&&g(C!==!1)}),Ae(v,()=>{g(Be(b)!==!1)}),Ae(qe(ae(b),o),([C,R])=>{C&&!R.atBottom&&R.notAtBottomBecause==="VIEWPORT_HEIGHT_DECREASING"&&p("auto")});const x=V(null),S=be();return re(Ja($(ae(r),Z(C=>{var R;return(R=C?.length)!=null?R:0})),$(ae(t))),S),Ae($(qe($(S,fr(1)),u),me(ae(x),l,f,h),Z(([[C,R],k,T,N,A])=>R&&T&&k?.({context:A,totalCount:C,scrollingInProgress:N})),ie(C=>!!C),Nn(0)),C=>{w&&(w(),w=null),Be(n)?requestAnimationFrame(()=>{Be(m)("scrolling into view",{}),de(y,C)}):w=tn(e,()=>{Be(m)("scrolling into view",{}),de(y,C),w=null})}),{autoscrollToBottom:v,followOutput:b,scrollIntoViewOnChange:x}},Oe(bn,ko,bo,wo,Yn,qn,ht,Dm,Mm)),KS=Te(([{data:e,firstItemIndex:t,gap:n,sizes:r},{initialTopMostItemIndex:o},{initialItemCount:s,listState:i},{didMount:l}])=>(re($(l,me(s),ie(([,u])=>u!==0),me(o,r,t,n,e),Z(([[,u],d,m,f,h,y=[]])=>Pm(u,d,m,f,h,y))),i),{}),Oe(bn,wo,hr,Yn),{singleton:!0}),JS=Te(([{didMount:e},{scrollTo:t},{listState:n}])=>{const r=V(0);return Ae($(e,me(r),ie(([,o])=>o!==0),Z(([,o])=>({top:o}))),o=>{tn($(n,fr(1),ie(s=>s.items.length>1)),()=>{requestAnimationFrame(()=>{de(t,o)})})}),{initialScrollTop:r}},Oe(Yn,ht,hr),{singleton:!0}),Om=Te(([{scrollVelocity:e}])=>{const t=V(!1),n=be(),r=V(!1);return re($(e,me(r,t,n),ie(([o,s])=>!!s),Z(([o,s,i,l])=>{const{enter:u,exit:d}=s;if(i){if(d(o,l))return!1}else if(u(o,l))return!0;return i}),Me()),t),Ae($(qe(t,e,n),me(r)),([[o,s,i],l])=>{o&&l&&l.change&&l.change(s,i)}),{isSeeking:t,scrollSeekConfiguration:r,scrollSeekRangeChanged:n,scrollVelocity:e}},Oe(ko),{singleton:!0}),ul=Te(([{scrollContainerState:e,scrollTo:t}])=>{const n=be(),r=be(),o=be(),s=V(!1),i=V(void 0);return re($(qe(n,r),Z(([{scrollHeight:l,scrollTop:u,viewportHeight:d},{offsetTop:m}])=>({scrollHeight:l,scrollTop:Math.max(0,u-m),viewportHeight:d}))),e),re($(t,me(r),Z(([l,{offsetTop:u}])=>({...l,top:l.top+u}))),o),{customScrollParent:i,useWindowScroll:s,windowScrollContainerState:n,windowScrollTo:o,windowViewportRect:r}},Oe(ht)),ZS=Te(([{sizeRanges:e,sizes:t},{headerHeight:n,scrollTop:r},{initialTopMostItemIndex:o},{didMount:s},{useWindowScroll:i,windowScrollContainerState:l,windowViewportRect:u}])=>{const d=be(),m=V(void 0),f=V(null),h=V(null);return re(l,f),re(u,h),Ae($(d,me(t,r,i,f,h,n)),([y,b,v,w,p,g,x])=>{const S=DS(b.sizeTree);w&&p!==null&&g!==null&&(v=p.scrollTop-g.offsetTop),v-=x,y({ranges:S,scrollTop:v})}),re($(m,ie(nl),Z(QS)),o),re($(s,me(m),ie(([,y])=>y!==void 0),Me(),Z(([,y])=>y.ranges)),e),{getState:d,restoreStateFrom:m}},Oe(bn,ht,wo,Yn,ul));function QS(e){return{align:"start",index:0,offset:e.scrollTop}}const eC=Te(([{topItemsIndexes:e}])=>{const t=V(0);return re($(t,ie(n=>n>=0),Z(n=>Array.from({length:n}).map((r,o)=>o))),e),{topItemCount:t}},Oe(hr));function zm(e){let t=!1,n;return(()=>(t||(t=!0,n=e()),n))}const tC=zm(()=>/iP(ad|od|hone)/i.test(navigator.userAgent)&&/WebKit/i.test(navigator.userAgent)),nC=Te(([{deviation:e,scrollBy:t,scrollingInProgress:n,scrollTop:r},{isAtBottom:o,isScrolling:s,lastJumpDueToItemResize:i,scrollDirection:l},{listState:u},{beforeUnshiftWith:d,gap:m,shiftWithOffset:f,sizes:h},{log:y},{recalcInProgress:b}])=>{const v=Mt($(u,me(i),fn(([,p,g,x],[{bottom:S,items:C,offsetBottom:R,totalCount:k},T])=>{const N=S+R;let A=0;return g===k&&p.length>0&&C.length>0&&(C[0].originalIndex===0&&p[0].originalIndex===0||(A=N-x,A!==0&&(A+=T))),[A,C,k,N]},[0,[],0,0]),ie(([p])=>p!==0),me(r,l,n,o,y,b),ie(([,p,g,x,,,S])=>!S&&!x&&p!==0&&g===fo),Z(([[p],,,,,g])=>(g("Upward scrolling compensation",{amount:p},Ct.DEBUG),p))));function w(p){p>0?(de(t,{behavior:"auto",top:-p}),de(e,0)):(de(e,0),de(t,{behavior:"auto",top:-p}))}return Ae($(v,me(e,s)),([p,g,x])=>{x&&tC()?de(e,g-p):w(-p)}),Ae($(qe(ct(s,!1),e,b),ie(([p,g,x])=>!p&&!x&&g!==0),Z(([p,g])=>g),Nn(1)),w),re($(f,Z(p=>({top:-p}))),t),Ae($(d,me(h,m),Z(([p,{groupIndices:g,lastSize:x,sizeTree:S},C])=>{function R(k){return k*(x+C)}if(g.length===0)return R(p);{let k=0;const T=lo(S,0);let N=0,A=0;for(;N<p;){N++,k+=T;let L=g.length===A+1?1/0:g[A+1]-g[A]-1;N+L>p&&(k-=T,L=p-N+1),N+=L,k+=R(L),A++}return k}})),p=>{de(e,p),requestAnimationFrame(()=>{de(t,{top:p}),requestAnimationFrame(()=>{de(e,0),de(b,!1)})})}),{deviation:e}},Oe(ht,ko,hr,bn,qn,sl)),rC=Te(([e,t,n,r,o,s,i,l,u,d,m])=>({...e,...t,...n,...r,...o,...s,...i,...l,...u,...d,...m}),Oe(cl,KS,Yn,Om,Lm,JS,GS,ul,Mm,qn,Dm)),Um=Te(([{data:e,defaultItemSize:t,firstItemIndex:n,fixedItemSize:r,fixedGroupSize:o,gap:s,groupIndices:i,heightEstimates:l,itemSize:u,sizeRanges:d,sizes:m,statefulTotalCount:f,totalCount:h,trackItemSizes:y},{initialItemFinalLocationReached:b,initialTopMostItemIndex:v,scrolledToInitialItem:w},p,g,x,S,{scrollToIndex:C},R,{topItemCount:k},{groupCounts:T},N])=>{const{listState:A,minOverscanItemCount:L,topItemsIndexes:O,rangeChanged:E,...j}=S;return re(E,N.scrollSeekRangeChanged),re($(N.windowViewportRect,Z(M=>M.visibleHeight)),p.viewportHeight),{data:e,defaultItemHeight:t,firstItemIndex:n,fixedItemHeight:r,fixedGroupHeight:o,gap:s,groupCounts:T,heightEstimates:l,initialItemFinalLocationReached:b,initialTopMostItemIndex:v,scrolledToInitialItem:w,sizeRanges:d,topItemCount:k,topItemsIndexes:O,totalCount:h,...x,groupIndices:i,itemSize:u,listState:A,minOverscanItemCount:L,scrollToIndex:C,statefulTotalCount:f,trackItemSizes:y,rangeChanged:E,...j,...N,...p,sizes:m,...g}},Oe(bn,wo,ht,ZS,XS,hr,bo,nC,eC,jm,rC));function oC(e,t){const n={},r={};let o=0;const s=e.length;for(;o<s;)r[e[o]]=1,o+=1;for(const i in t)Object.hasOwn(r,i)||(n[i]=t[i]);return n}const Ho=typeof document<"u"?D.useLayoutEffect:D.useEffect;function Bm(e,t,n){const r=Object.keys(t.required||{}),o=Object.keys(t.optional||{}),s=Object.keys(t.methods||{}),i=Object.keys(t.events||{}),l=D.createContext({});function u(w,p){w.propsReady&&de(w.propsReady,!1);for(const g of r){const x=w[t.required[g]];de(x,p[g])}for(const g of o)if(g in p){const x=w[t.optional[g]];de(x,p[g])}w.propsReady&&de(w.propsReady,!0)}function d(w){return s.reduce((p,g)=>(p[g]=x=>{const S=w[t.methods[g]];de(S,x)},p),{})}function m(w){return i.reduce((p,g)=>(p[g]=bS(w[t.events[g]]),p),{})}const f=D.forwardRef((w,p)=>{const{children:g,...x}=w,[S]=D.useState(()=>Vs(kS(e),k=>{u(k,x)})),[C]=D.useState($c(m,S));Ho(()=>{for(const k of i)k in x&&Ae(C[k],x[k]);return()=>{Object.values(C).map(rl)}},[x,C,S]),Ho(()=>{u(S,x)}),D.useImperativeHandle(p,Fc(d(S)));const R=n;return a.jsx(l.Provider,{value:S,children:n?a.jsx(R,{...oC([...r,...o,...i],x),children:g}):g})}),h=w=>{const p=D.useContext(l);return D.useCallback(g=>{de(p[w],g)},[p,w])},y=w=>{const p=D.useContext(l)[w],g=D.useCallback(x=>Ae(p,x),[p]);return D.useSyncExternalStore(g,()=>Be(p),()=>Be(p))},b=w=>{const p=D.useContext(l)[w],[g,x]=D.useState($c(Be,p));return Ho(()=>Ae(p,S=>{S!==g&&x(Fc(S))}),[p,g]),g},v=D.version.startsWith("18")?y:b;return{Component:f,useEmitter:(w,p)=>{const g=D.useContext(l)[w];Ho(()=>Ae(g,p),[p,g])},useEmitterValue:v,usePublisher:h}}const Fm=D.createContext(void 0),$m=D.createContext(void 0),Hm=typeof document<"u"?D.useLayoutEffect:D.useEffect;function Na(e){return"self"in e}function sC(e){return"body"in e}function Wm(e,t,n,r=Br,o,s){const i=D.useRef(null),l=D.useRef(null),u=D.useRef(null),d=D.useCallback(h=>{let y,b,v;const w=h.target;if(sC(w)||Na(w)){const g=Na(w)?w:w.defaultView;v=s?g.scrollX:g.scrollY,y=s?g.document.documentElement.scrollWidth:g.document.documentElement.scrollHeight,b=s?g.innerWidth:g.innerHeight}else v=s?w.scrollLeft:w.scrollTop,y=s?w.scrollWidth:w.scrollHeight,b=s?w.offsetWidth:w.offsetHeight;const p=()=>{e({scrollHeight:y,scrollTop:Math.max(v,0),viewportHeight:b})};h.suppressFlushSync?p():pi.flushSync(p),l.current!==null&&(v===l.current||v<=0||v===y-b)&&(l.current=null,t(!0),u.current&&(clearTimeout(u.current),u.current=null))},[e,t,s]);D.useEffect(()=>{const h=o||i.current;return r(o||i.current),d({suppressFlushSync:!0,target:h}),h.addEventListener("scroll",d,{passive:!0}),()=>{r(null),h.removeEventListener("scroll",d)}},[i,d,n,r,o]);function m(h){const y=i.current;if(!y||(s?"offsetWidth"in y&&y.offsetWidth===0:"offsetHeight"in y&&y.offsetHeight===0))return;const b=h.behavior==="smooth";let v,w,p;Na(y)?(w=Math.max(Wn(y.document.documentElement,s?"width":"height"),s?y.document.documentElement.scrollWidth:y.document.documentElement.scrollHeight),v=s?y.innerWidth:y.innerHeight,p=s?window.scrollX:window.scrollY):(w=y[s?"scrollWidth":"scrollHeight"],v=Wn(y,s?"width":"height"),p=y[s?"scrollLeft":"scrollTop"]);const g=w-v;if(h.top=Math.ceil(Math.max(Math.min(g,h.top),0)),_m(v,w)||h.top===p){e({scrollHeight:w,scrollTop:p,viewportHeight:v}),b&&t(!0);return}b?(l.current=h.top,u.current&&clearTimeout(u.current),u.current=setTimeout(()=>{u.current=null,l.current=null,t(!0)},1e3)):l.current=null,s&&(h={behavior:h.behavior,left:h.top}),y.scrollTo(h)}function f(h){s&&(h={behavior:h.behavior,left:h.top}),i.current.scrollBy(h)}return{scrollByCallback:f,scrollerRef:i,scrollToCallback:m}}const Ra="-webkit-sticky",Qc="sticky",dl=zm(()=>{if(typeof document>"u")return Qc;const e=document.createElement("div");return e.style.position=Ra,e.style.position===Ra?Ra:Qc});function fl(e){return e}const aC=Te(()=>{const e=V(l=>`Item ${l}`),t=V(l=>`Group ${l}`),n=V({}),r=V(fl),o=V("div"),s=V(Br),i=(l,u=null)=>ct($(n,Z(d=>d[l]),Me()),u);return{components:n,computeItemKey:r,EmptyPlaceholder:i("EmptyPlaceholder"),FooterComponent:i("Footer"),GroupComponent:i("Group","div"),groupContent:t,HeaderComponent:i("Header"),HeaderFooterTag:o,ItemComponent:i("Item","div"),itemContent:e,ListComponent:i("List","div"),ScrollerComponent:i("Scroller","div"),scrollerRef:s,ScrollSeekPlaceholder:i("ScrollSeekPlaceholder"),TopItemListComponent:i("TopItemList")}}),iC=Te(([e,t])=>({...e,...t}),Oe(Um,aC)),lC=({height:e})=>a.jsx("div",{style:{height:e}}),cC={overflowAnchor:"none",position:dl(),zIndex:1},Vm={overflowAnchor:"none"},uC={...Vm,display:"inline-block",height:"100%"},eu=D.memo(function({showTopList:e=!1}){const t=ue("listState"),n=Ft("sizeRanges"),r=ue("useWindowScroll"),o=ue("customScrollParent"),s=Ft("windowScrollContainerState"),i=Ft("scrollContainerState"),l=o||r?s:i,u=ue("itemContent"),d=ue("context"),m=ue("groupContent"),f=ue("trackItemSizes"),h=ue("itemSize"),y=ue("log"),b=Ft("gap"),v=ue("horizontalDirection"),{callbackRef:w}=TS(n,h,f,e?Br:l,y,b,o,v,ue("skipAnimationFrameInResizeObserver")),[p,g]=D.useState(0);ml("deviation",j=>{p!==j&&g(j)});const x=ue("EmptyPlaceholder"),S=ue("ScrollSeekPlaceholder")||lC,C=ue("ListComponent"),R=ue("ItemComponent"),k=ue("GroupComponent"),T=ue("computeItemKey"),N=ue("isSeeking"),A=ue("groupIndices").length>0,L=ue("alignToBottom"),O=ue("initialItemFinalLocationReached"),E=e?{}:{boxSizing:"border-box",...v?{display:"inline-block",height:"100%",marginLeft:p!==0?p:L?"auto":0,paddingLeft:t.offsetTop,paddingRight:t.offsetBottom,whiteSpace:"nowrap"}:{marginTop:p!==0?p:L?"auto":0,paddingBottom:t.offsetBottom,paddingTop:t.offsetTop},...O?{}:{visibility:"hidden"}};return!e&&t.totalCount===0&&x?a.jsx(x,{...lt(x,d)}):a.jsx(C,{...lt(C,d),"data-testid":e?"virtuoso-top-item-list":"virtuoso-item-list",ref:w,style:E,children:(e?t.topItems:t.items).map(j=>{const M=j.originalIndex,I=T(M+t.firstItemIndex,j.data,d);return N?c.createElement(S,{...lt(S,d),height:j.size,index:j.index,key:I,type:j.type||"item",...j.type==="group"?{}:{groupIndex:j.groupIndex}}):j.type==="group"?c.createElement(k,{...lt(k,d),"data-index":M,"data-item-index":j.index,"data-known-size":j.size,key:I,style:cC},m(j.index,d)):c.createElement(R,{...lt(R,d),...hC(R,j.data),"data-index":M,"data-item-group-index":j.groupIndex,"data-item-index":j.index,"data-known-size":j.size,key:I,style:v?uC:Vm},A?u(j.index,j.groupIndex,j.data,d):u(j.index,j.data,d))})})}),dC={height:"100%",outline:"none",overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},fC={outline:"none",overflowX:"auto",position:"relative"},qs=e=>({height:"100%",position:"absolute",top:0,width:"100%",...e?{display:"flex",flexDirection:"column"}:{}}),mC={position:dl(),top:0,width:"100%",zIndex:1};function lt(e,t){if(typeof e!="string")return{context:t}}function hC(e,t){return{item:typeof e=="string"?void 0:t}}const pC=D.memo(function(){const e=ue("HeaderComponent"),t=Ft("headerHeight"),n=ue("HeaderFooterTag"),r=mr(D.useMemo(()=>s=>{t(Wn(s,"height"))},[t]),!0,ue("skipAnimationFrameInResizeObserver")),o=ue("context");return e?a.jsx(n,{ref:r,children:a.jsx(e,{...lt(e,o)})}):null}),gC=D.memo(function(){const e=ue("FooterComponent"),t=Ft("footerHeight"),n=ue("HeaderFooterTag"),r=mr(D.useMemo(()=>s=>{t(Wn(s,"height"))},[t]),!0,ue("skipAnimationFrameInResizeObserver")),o=ue("context");return e?a.jsx(n,{ref:r,children:a.jsx(e,{...lt(e,o)})}):null});function Gm({useEmitter:e,useEmitterValue:t,usePublisher:n}){return D.memo(function({children:r,style:o,context:s,...i}){const l=n("scrollContainerState"),u=t("ScrollerComponent"),d=n("smoothScrollTargetReached"),m=t("scrollerRef"),f=t("horizontalDirection")||!1,{scrollByCallback:h,scrollerRef:y,scrollToCallback:b}=Wm(l,d,u,m,void 0,f);return e("scrollTo",b),e("scrollBy",h),a.jsx(u,{"data-testid":"virtuoso-scroller","data-virtuoso-scroller":!0,ref:y,style:{...f?fC:dC,...o},tabIndex:0,...i,...lt(u,s),children:r})})}function qm({useEmitter:e,useEmitterValue:t,usePublisher:n}){return D.memo(function({children:r,style:o,context:s,...i}){const l=n("windowScrollContainerState"),u=t("ScrollerComponent"),d=n("smoothScrollTargetReached"),m=t("totalListHeight"),f=t("deviation"),h=t("customScrollParent"),y=D.useRef(null),b=t("scrollerRef"),{scrollByCallback:v,scrollerRef:w,scrollToCallback:p}=Wm(l,d,u,b,h);return Hm(()=>{var g;return w.current=h||((g=y.current)==null?void 0:g.ownerDocument.defaultView),()=>{w.current=null}},[w,h]),e("windowScrollTo",p),e("scrollBy",v),a.jsx(u,{ref:y,"data-virtuoso-scroller":!0,style:{position:"relative",...o,...m!==0?{height:m+f}:{}},...i,...lt(u,s),children:r})})}const yC=({children:e})=>{const t=D.useContext(Fm),n=Ft("viewportHeight"),r=Ft("fixedItemHeight"),o=ue("alignToBottom"),s=ue("horizontalDirection"),i=D.useMemo(()=>xm(n,u=>Wn(u,s?"width":"height")),[n,s]),l=mr(i,!0,ue("skipAnimationFrameInResizeObserver"));return D.useEffect(()=>{t&&(n(t.viewportHeight),r(t.itemHeight))},[t,n,r]),a.jsx("div",{"data-viewport-type":"element",ref:l,style:qs(o),children:e})},xC=({children:e})=>{const t=D.useContext(Fm),n=Ft("windowViewportRect"),r=Ft("fixedItemHeight"),o=ue("customScrollParent"),s=bm(n,o,ue("skipAnimationFrameInResizeObserver")),i=ue("alignToBottom");return D.useEffect(()=>{t&&(r(t.itemHeight),n({offsetTop:0,visibleHeight:t.viewportHeight,visibleWidth:100}))},[t,n,r]),a.jsx("div",{"data-viewport-type":"window",ref:s,style:qs(i),children:e})},vC=({children:e})=>{const t=ue("TopItemListComponent")||"div",n=ue("headerHeight"),r={...mC,marginTop:`${n}px`},o=ue("context");return a.jsx(t,{style:r,...lt(t,o),children:e})},bC=D.memo(function(e){const t=ue("useWindowScroll"),n=ue("topItemsIndexes").length>0,r=ue("customScrollParent"),o=ue("context");return a.jsxs(r||t?SC:kC,{...e,context:o,children:[n&&a.jsx(vC,{children:a.jsx(eu,{showTopList:!0})}),a.jsxs(r||t?xC:yC,{children:[a.jsx(pC,{}),a.jsx(eu,{}),a.jsx(gC,{})]})]})}),{Component:wC,useEmitter:ml,useEmitterValue:ue,usePublisher:Ft}=Bm(iC,{required:{},optional:{restoreStateFrom:"restoreStateFrom",context:"context",followOutput:"followOutput",scrollIntoViewOnChange:"scrollIntoViewOnChange",itemContent:"itemContent",groupContent:"groupContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",minOverscanItemCount:"minOverscanItemCount",totalCount:"totalCount",groupCounts:"groupCounts",topItemCount:"topItemCount",firstItemIndex:"firstItemIndex",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedGroupHeight:"fixedGroupHeight",fixedItemHeight:"fixedItemHeight",heightEstimates:"heightEstimates",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"HeaderFooterTag",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",horizontalDirection:"horizontalDirection",skipAnimationFrameInResizeObserver:"skipAnimationFrameInResizeObserver"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy",autoscrollToBottom:"autoscrollToBottom",getState:"getState"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},bC),kC=Gm({useEmitter:ml,useEmitterValue:ue,usePublisher:Ft}),SC=qm({useEmitter:ml,useEmitterValue:ue,usePublisher:Ft}),CC=wC,TC=Te(()=>{const e=V(d=>a.jsxs("td",{children:["Item $",d]})),t=V(null),n=V(d=>a.jsxs("td",{colSpan:1e3,children:["Group ",d]})),r=V(null),o=V(null),s=V({}),i=V(fl),l=V(Br),u=(d,m=null)=>ct($(s,Z(f=>f[d]),Me()),m);return{components:s,computeItemKey:i,context:t,EmptyPlaceholder:u("EmptyPlaceholder"),FillerRow:u("FillerRow"),fixedFooterContent:o,fixedHeaderContent:r,itemContent:e,groupContent:n,ScrollerComponent:u("Scroller","div"),scrollerRef:l,ScrollSeekPlaceholder:u("ScrollSeekPlaceholder"),TableBodyComponent:u("TableBody","tbody"),TableComponent:u("Table","table"),TableFooterComponent:u("TableFoot","tfoot"),TableHeadComponent:u("TableHead","thead"),TableRowComponent:u("TableRow","tr"),GroupComponent:u("Group","tr")}});Oe(Um,TC);dl();const tu={bottom:0,itemHeight:0,items:[],itemWidth:0,offsetBottom:0,offsetTop:0,top:0},NC={bottom:0,itemHeight:0,items:[{index:0}],itemWidth:0,offsetBottom:0,offsetTop:0,top:0},{ceil:nu,floor:bs,max:Qr,min:Aa,round:ru}=Math;function ou(e,t,n){return Array.from({length:t-e+1}).map((r,o)=>({data:n===null?null:n[o+e],index:o+e}))}function RC(e){return{...NC,items:e}}function Wo(e,t){return e&&e.width===t.width&&e.height===t.height}function AC(e,t){return e&&e.column===t.column&&e.row===t.row}const EC=Te(([{increaseViewportBy:e,listBoundary:t,overscan:n,visibleRange:r},{footerHeight:o,headerHeight:s,scrollBy:i,scrollContainerState:l,scrollTo:u,scrollTop:d,smoothScrollTargetReached:m,viewportHeight:f},h,y,{didMount:b,propsReady:v},{customScrollParent:w,useWindowScroll:p,windowScrollContainerState:g,windowScrollTo:x,windowViewportRect:S},C])=>{const R=V(0),k=V(0),T=V(tu),N=V({height:0,width:0}),A=V({height:0,width:0}),L=be(),O=be(),E=V(0),j=V(null),M=V({column:0,row:0}),I=be(),_=be(),P=V(!1),W=V(0),K=V(!0),q=V(!1),G=V(!1);Ae($(b,me(W),ie(([U,le])=>!!le)),()=>{de(K,!1)}),Ae($(qe(b,K,A,N,W,q),ie(([U,le,he,Ce,,Ee])=>U&&!le&&he.height!==0&&Ce.height!==0&&!Ee)),([,,,,U])=>{de(q,!0),il(1,()=>{de(L,U)}),tn($(d),()=>{de(t,[0,0]),de(K,!0)})}),re($(_,ie(U=>U!=null&&U.scrollTop>0),un(0)),k),Ae($(b,me(_),ie(([,U])=>U!=null)),([,U])=>{U&&(de(N,U.viewport),de(A,U.item),de(M,U.gap),U.scrollTop>0&&(de(P,!0),tn($(d,fr(1)),le=>{de(P,!1)}),de(u,{top:U.scrollTop})))}),re($(N,Z(({height:U})=>U)),f),re($(qe(ae(N,Wo),ae(A,Wo),ae(M,(U,le)=>U&&U.column===le.column&&U.row===le.row),ae(d)),Z(([U,le,he,Ce])=>({gap:he,item:le,scrollTop:Ce,viewport:U}))),I),re($(qe(ae(R),r,ae(M,AC),ae(A,Wo),ae(N,Wo),ae(j),ae(k),ae(P),ae(K),ae(W)),ie(([,,,,,,,U])=>!U),Z(([U,[le,he],Ce,Ee,Re,je,$e,,Le,pe])=>{const{column:Se,row:_e}=Ce,{height:We,width:Xn}=Ee,{width:Xe}=Re;if($e===0&&(U===0||Xe===0))return tu;if(Xn===0){const Kt=ll(pe,U),sn=Kt+Math.max($e-1,0);return RC(ou(Kt,sn,je))}const pt=Ym(Xe,Xn,Se);let qt,Yt;Le?le===0&&he===0&&$e>0?(qt=0,Yt=$e-1):(qt=pt*bs((le+_e)/(We+_e)),Yt=pt*nu((he+_e)/(We+_e))-1,Yt=Aa(U-1,Qr(Yt,pt-1)),qt=Aa(Yt,Qr(0,qt))):(qt=0,Yt=-1);const Tt=ou(qt,Yt,je),{bottom:Kn,top:wn}=su(Re,Ce,Ee,Tt),_n=nu(U/pt),Xt=_n*We+(_n-1)*_e-Kn;return{bottom:Kn,itemHeight:We,items:Tt,itemWidth:Xn,offsetBottom:Xt,offsetTop:wn,top:wn}})),T),re($(j,ie(U=>U!==null),Z(U=>U.length)),R),re($(qe(N,A,T,M),ie(([U,le,{items:he}])=>he.length>0&&le.height!==0&&U.height!==0),Z(([U,le,{items:he},Ce])=>{const{bottom:Ee,top:Re}=su(U,Ce,le,he);return[Re,Ee]}),Me(co)),t);const F=V(!1);re($(d,me(F),Z(([U,le])=>le||U!==0)),F);const X=Mt($(qe(T,R),ie(([{items:U}])=>U.length>0),me(F),ie(([[U,le],he])=>{const Ce=U.items[U.items.length-1].index===le-1;return(he||U.bottom>0&&U.itemHeight>0&&U.offsetBottom===0&&U.items.length===le)&&Ce}),Z(([[,U]])=>U-1),Me())),J=Mt($(ae(T),ie(({items:U})=>U.length>0&&U[0].index===0),un(0),Me())),fe=Mt($(ae(T),me(P),ie(([{items:U},le])=>U.length>0&&!le),Z(([{items:U}])=>({endIndex:U[U.length-1].index,startIndex:U[0].index})),Me(Nm),Nn(0)));re(fe,y.scrollSeekRangeChanged),re($(L,me(N,A,R,M),Z(([U,le,he,Ce,Ee])=>{const Re=Im(U),{align:je,behavior:$e,offset:Le}=Re;let pe=Re.index;pe==="LAST"&&(pe=Ce-1),pe=Qr(0,pe,Aa(Ce-1,pe));let Se=ni(le,Ee,he,pe);return je==="end"?Se=ru(Se-le.height+he.height):je==="center"&&(Se=ru(Se-le.height/2+he.height/2)),Le&&(Se+=Le),{behavior:$e,top:Se}})),u);const Q=ct($(T,Z(U=>U.offsetBottom+U.bottom)),0);return re($(S,Z(U=>({height:U.visibleHeight,width:U.visibleWidth}))),N),{customScrollParent:w,data:j,deviation:E,footerHeight:o,gap:M,headerHeight:s,increaseViewportBy:e,initialItemCount:k,itemDimensions:A,overscan:n,restoreStateFrom:_,scrollBy:i,scrollContainerState:l,scrollHeight:O,scrollTo:u,scrollToIndex:L,scrollTop:d,smoothScrollTargetReached:m,totalCount:R,useWindowScroll:p,viewportDimensions:N,windowScrollContainerState:g,windowScrollTo:x,windowViewportRect:S,...y,gridState:T,horizontalDirection:G,initialTopMostItemIndex:W,totalListHeight:Q,...h,endReached:X,propsReady:v,rangeChanged:fe,startReached:J,stateChanged:I,stateRestoreInProgress:P,...C}},Oe(cl,ht,ko,Om,Yn,ul,qn));function Ym(e,t,n){return Qr(1,bs((e+n)/(bs(t)+n)))}function su(e,t,n,r){const{height:o}=n;if(o===void 0||r.length===0)return{bottom:0,top:0};const s=ni(e,t,n,r[0].index);return{bottom:ni(e,t,n,r[r.length-1].index)+o,top:s}}function ni(e,t,n,r){const o=Ym(e.width,n.width,t.column),s=bs(r/o),i=s*n.height+Qr(0,s-1)*t.row;return i>0?i+t.row:i}const jC=Te(()=>{const e=V(f=>`Item ${f}`),t=V({}),n=V(null),r=V("virtuoso-grid-item"),o=V("virtuoso-grid-list"),s=V(fl),i=V("div"),l=V(Br),u=(f,h=null)=>ct($(t,Z(y=>y[f]),Me()),h),d=V(!1),m=V(!1);return re(ae(m),d),{components:t,computeItemKey:s,context:n,FooterComponent:u("Footer"),HeaderComponent:u("Header"),headerFooterTag:i,itemClassName:r,ItemComponent:u("Item","div"),itemContent:e,listClassName:o,ListComponent:u("List","div"),readyStateChanged:d,reportReadyState:m,ScrollerComponent:u("Scroller","div"),scrollerRef:l,ScrollSeekPlaceholder:u("ScrollSeekPlaceholder","div")}}),IC=Te(([e,t])=>({...e,...t}),Oe(EC,jC)),_C=D.memo(function(){const e=Ue("gridState"),t=Ue("listClassName"),n=Ue("itemClassName"),r=Ue("itemContent"),o=Ue("computeItemKey"),s=Ue("isSeeking"),i=$t("scrollHeight"),l=Ue("ItemComponent"),u=Ue("ListComponent"),d=Ue("ScrollSeekPlaceholder"),m=Ue("context"),f=$t("itemDimensions"),h=$t("gap"),y=Ue("log"),b=Ue("stateRestoreInProgress"),v=$t("reportReadyState"),w=mr(D.useMemo(()=>p=>{const g=p.parentElement.parentElement.scrollHeight;i(g);const x=p.firstChild;if(x){const{height:S,width:C}=x.getBoundingClientRect();f({height:S,width:C})}h({column:au("column-gap",getComputedStyle(p).columnGap,y),row:au("row-gap",getComputedStyle(p).rowGap,y)})},[i,f,h,y]),!0,!1);return Hm(()=>{e.itemHeight>0&&e.itemWidth>0&&v(!0)},[e]),b?null:a.jsx(u,{className:t,ref:w,...lt(u,m),"data-testid":"virtuoso-item-list",style:{paddingBottom:e.offsetBottom,paddingTop:e.offsetTop},children:e.items.map(p=>{const g=o(p.index,p.data,m);return s?a.jsx(d,{...lt(d,m),height:e.itemHeight,index:p.index,width:e.itemWidth},g):c.createElement(l,{...lt(l,m),className:n,"data-index":p.index,key:g},r(p.index,p.data,m))})})}),PC=D.memo(function(){const e=Ue("HeaderComponent"),t=$t("headerHeight"),n=Ue("headerFooterTag"),r=mr(D.useMemo(()=>s=>{t(Wn(s,"height"))},[t]),!0,!1),o=Ue("context");return e?a.jsx(n,{ref:r,children:a.jsx(e,{...lt(e,o)})}):null}),LC=D.memo(function(){const e=Ue("FooterComponent"),t=$t("footerHeight"),n=Ue("headerFooterTag"),r=mr(D.useMemo(()=>s=>{t(Wn(s,"height"))},[t]),!0,!1),o=Ue("context");return e?a.jsx(n,{ref:r,children:a.jsx(e,{...lt(e,o)})}):null}),DC=({children:e})=>{const t=D.useContext($m),n=$t("itemDimensions"),r=$t("viewportDimensions"),o=mr(D.useMemo(()=>s=>{r(s.getBoundingClientRect())},[r]),!0,!1);return D.useEffect(()=>{t&&(r({height:t.viewportHeight,width:t.viewportWidth}),n({height:t.itemHeight,width:t.itemWidth}))},[t,r,n]),a.jsx("div",{ref:o,style:qs(!1),children:e})},MC=({children:e})=>{const t=D.useContext($m),n=$t("windowViewportRect"),r=$t("itemDimensions"),o=Ue("customScrollParent"),s=bm(n,o,!1);return D.useEffect(()=>{t&&(r({height:t.itemHeight,width:t.itemWidth}),n({offsetTop:0,visibleHeight:t.viewportHeight,visibleWidth:t.viewportWidth}))},[t,n,r]),a.jsx("div",{ref:s,style:qs(!1),children:e})},OC=D.memo(function({...e}){const t=Ue("useWindowScroll"),n=Ue("customScrollParent"),r=n||t?UC:zC,o=n||t?MC:DC,s=Ue("context");return a.jsx(r,{...e,...lt(r,s),children:a.jsxs(o,{children:[a.jsx(PC,{}),a.jsx(_C,{}),a.jsx(LC,{})]})})}),{useEmitter:Xm,useEmitterValue:Ue,usePublisher:$t}=Bm(IC,{optional:{context:"context",totalCount:"totalCount",overscan:"overscan",itemContent:"itemContent",components:"components",computeItemKey:"computeItemKey",data:"data",initialItemCount:"initialItemCount",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"headerFooterTag",listClassName:"listClassName",itemClassName:"itemClassName",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",restoreStateFrom:"restoreStateFrom",initialTopMostItemIndex:"initialTopMostItemIndex",increaseViewportBy:"increaseViewportBy"},methods:{scrollTo:"scrollTo",scrollBy:"scrollBy",scrollToIndex:"scrollToIndex"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",stateChanged:"stateChanged",readyStateChanged:"readyStateChanged"}},OC),zC=Gm({useEmitter:Xm,useEmitterValue:Ue,usePublisher:$t}),UC=qm({useEmitter:Xm,useEmitterValue:Ue,usePublisher:$t});function au(e,t,n){return t!=="normal"&&!(t!=null&&t.endsWith("px"))&&n(`${e} was not resolved to pixel value correctly`,t,Ct.WARN),t==="normal"?0:parseInt(t??"0",10)}function BC({value:e,options:t,onChange:n,className:r,triggerClassName:o}){const[s,i]=c.useState(!1),l=c.useRef(null),u=t.find(m=>m.value===e);c.useEffect(()=>{const m=f=>{l.current&&!l.current.contains(f.target)&&i(!1)};return s&&(document.addEventListener("mousedown",m),document.addEventListener("touchstart",m)),()=>{document.removeEventListener("mousedown",m),document.removeEventListener("touchstart",m)}},[s]);const d=m=>{n(m),i(!1)};return a.jsxs("div",{ref:l,className:nt("relative inline-block",r),children:[a.jsxs("button",{type:"button",onClick:()=>i(!s),className:nt("inline-flex items-center justify-between gap-2 rounded-lg border border-border/60 bg-background/50 px-3 py-1.5 text-xs transition-colors hover:bg-accent/50",o),children:[a.jsx("span",{children:u?.label}),a.jsx(ny,{size:14,style:{stroke:"currentColor",fill:"none",display:"block",width:"14px",height:"14px",transform:s?"rotate(180deg)":"rotate(0deg)",transition:"transform 200ms ease"}})]}),s&&a.jsx("div",{className:"absolute right-0 top-full mt-1 z-[9999] min-w-[6rem] rounded-md border border-border bg-popover shadow-lg animate-in fade-in-0 zoom-in-95 slide-in-from-top-2",children:a.jsx("div",{className:"p-1",children:t.map(m=>a.jsxs("button",{type:"button",onClick:()=>d(m.value),className:nt("relative w-full flex items-center justify-between gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors cursor-pointer","hover:bg-accent hover:text-accent-foreground",m.value===e?"bg-accent/50 text-accent-foreground":"text-popover-foreground"),children:[a.jsx("span",{children:m.label}),m.value===e&&a.jsx(xi,{size:16,style:{stroke:"currentColor",fill:"none",display:"block",width:"16px",height:"16px"}})]},m.value))})})]})}function FC({icon:e,title:t,description:n,action:r,glowClassName:o,circleClassName:s,containerClassName:i}){return a.jsxs("div",{className:`flex flex-col items-center justify-center h-96 text-center px-4 ${i??""}`,children:[a.jsxs("div",{className:"relative mb-8",children:[a.jsx("div",{className:`absolute inset-0 ${o??"bg-amber-500/30 dark:bg-amber-400/30"} blur-3xl rounded-full animate-pulse`}),a.jsx("div",{className:`relative w-32 h-32 rounded-full ${s??"bg-amber-100 dark:bg-amber-900/40 border-4 border-amber-400 dark:border-amber-600"} flex items-center justify-center shadow-lg`,children:e})]}),a.jsx("h3",{className:"text-lg font-medium text-foreground mb-2",children:t}),a.jsx("p",{className:"text-sm text-muted-foreground mb-6 max-w-64",children:n}),r]})}function $C({icon:e,title:t,description:n,glowClassName:r,circleClassName:o}){return a.jsx(et,{children:a.jsxs(tt,{className:"p-8 text-center",children:[a.jsxs("div",{className:"relative mb-6",children:[a.jsx("div",{className:`absolute inset-0 ${r??"bg-amber-500/30 dark:bg-amber-400/30"} blur-2xl rounded-full`}),a.jsx("div",{className:`relative w-24 h-24 rounded-full ${o??"bg-amber-100 dark:bg-amber-900/40 border-4 border-amber-400 dark:border-amber-600"} shadow-lg flex items-center justify-center mx-auto`,children:e})]}),a.jsx("h3",{className:"font-medium text-foreground mb-2",children:t}),a.jsx("p",{className:"text-sm text-muted-foreground",children:n})]})})}function HC(e,t=!1){const n=c.useRef([]);return c.useEffect(()=>{e.length>0&&(n.current=e)},[e]),{visible:e.length>0?e:t?n.current:[],lastNonEmpty:n.current}}const WC=[{label:"",value:"latest"},{label:"",value:"oldest"},{label:"",value:"lanterns"}],iu={lanterns:(e,t)=>(t.lanterns??0)-(e.lanterns??0),oldest:(e,t)=>(e.createdAt?.getTime?.()??0)-(t.createdAt?.getTime?.()??0),latest:(e,t)=>(t.createdAt?.getTime?.()??0)-(e.createdAt?.getTime?.()??0)},VC=e=>e.hidden===!0;function GC({posts:e,activeCategory:t,activeSubCategory:n,sortBy:r,categories:o,onSubCategoryChange:s}){const i=fm({key:`main-posts-${t}-${n}`}),l=c.useDeferredValue(e),u=c.useMemo(()=>{const g=new Set;return l.forEach(x=>{typeof x.authorUid=="string"&&x.authorUid.length>0&&g.add(x.authorUid)}),Array.from(g)},[l]),d=Rs(u),m=c.useMemo(()=>o.find(g=>g.id===t),[o,t]),f=c.useMemo(()=>m?.subCategories??[],[m]),h=c.useCallback(g=>{const x=g.currentTarget.getAttribute("data-sub-id");x&&s(x)},[s]),y=c.useMemo(()=>{const g=l.filter(S=>!VC(S)),x=t===""?g:g.filter(S=>S.category===t);return n===""?x:x.filter(S=>S.subCategory===n)},[l,t,n]),b=c.useMemo(()=>{const x=iu[r??"latest"]??iu.latest;return[...y].sort(x)},[y,r]),{visible:v}=HC(b,!0),w=c.useCallback(g=>As(g),[]),p=c.useCallback(g=>g?g.toLocaleString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"",[]);return{scrollRef:i,currentSubCategories:f,visiblePosts:v,filteredCount:b.length,handleSubCategoryClick:h,formatTimeAgo:w,formatCreatedAt:p,userProfiles:d}}const qC=(e,t)=>e===t?!0:e?.profileImage===t?.profileImage&&e?.currentTitleId===t?.currentTitleId;function YC({posts:e,userNickname:t,userProfileImage:n,activeCategory:r,activeSubCategory:o,sortBy:s,blockedUserIds:i,categories:l,onSubCategoryChange:u,onSortChange:d,isPostLanterned:m,isBookmarked:f,onPostClick:h,onLanternToggle:y,onBookmarkToggle:b,onStartWriting:v,currentTitle:w,onRefresh:p,isRefreshing:g=!1}){const x=c.useMemo(()=>!i||i.length===0?e:e.filter(E=>{const j=E.authorUid||E.userId;return!i.includes(j)}),[e,i]),{scrollRef:S,currentSubCategories:C,visiblePosts:R,filteredCount:k,handleSubCategoryClick:T,formatTimeAgo:N,formatCreatedAt:A,userProfiles:L}=GC({posts:x,activeCategory:r,activeSubCategory:o,sortBy:s,categories:l,onSubCategoryChange:u}),O=c.useCallback(E=>{d(E)},[d]);return a.jsxs("div",{className:"h-full flex flex-col",children:[a.jsx(KC,{currentSubCategories:C,activeSubCategory:o,handleSubCategoryClick:T,filteredCount:k,sortBy:s,onSortChange:O,onRefresh:p,isRefreshing:g}),a.jsx("div",{className:"flex-1 overflow-hidden bg-background",children:R.length===0?a.jsx("div",{className:"h-full overflow-y-auto scrollbar-hide p-4",children:a.jsx(JC,{onStartWriting:v})}):a.jsx(ZC,{posts:R,userNickname:t,userProfileImage:n,isPostLanterned:m,isBookmarked:f,currentTitle:w,userProfiles:L,formatTimeAgo:N,formatCreatedAt:A,onPostClick:h,onLanternToggle:y,onBookmarkToggle:b,scrollRef:S})})]})}const XC=D.memo(YC);function KC({currentSubCategories:e,activeSubCategory:t,handleSubCategoryClick:n,filteredCount:r,sortBy:o,onSortChange:s,onRefresh:i,isRefreshing:l}){return a.jsxs("div",{className:"bg-card/98 glass-effect border-b border-border px-4 py-3 flex-shrink-0 shadow-sm relative z-20",children:[e.length>1&&a.jsx("div",{className:"flex space-x-2 overflow-x-auto scrollbar-hide mb-3",children:e.map(u=>{const d=t===u.id;return a.jsx(oe,{variant:d?"default":"ghost",size:"sm","data-sub-id":u.id,onClick:n,className:`whitespace-nowrap flex-shrink-0 rounded-full px-4 transition-all duration-200 ${d?"bg-primary text-primary-foreground shadow-sm":"hover:bg-accent/80"}`,children:u.name},u.id)})}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("span",{className:"text-sm text-muted-foreground",children:[r," "]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[i&&a.jsx(oe,{variant:"ghost",size:"sm",onClick:i,disabled:l,className:"h-8 w-8 p-0 rounded-full hover:bg-accent transition-all",children:a.jsx(Ly,{className:`w-4 h-4 text-muted-foreground ${l?"animate-spin":""}`})}),a.jsx(BC,{value:o,onChange:u=>s(u),options:WC,triggerClassName:"w-24 h-8"})]})]})]})}function JC({onStartWriting:e}){return a.jsx(FC,{icon:a.jsx(dr,{className:"w-20 h-20 text-amber-900 dark:text-amber-200"}),title:"  ",description:"      !",action:a.jsxs(oe,{onClick:e,className:"bg-primary text-primary-foreground px-6 py-2 rounded-xl",children:[a.jsx(Ku,{className:"w-4 h-4 mr-2"}),"  "]}),glowClassName:"bg-amber-500/30 dark:bg-amber-400/30",circleClassName:"bg-amber-100 dark:bg-amber-900/40 border-4 border-amber-400 dark:border-amber-600"})}const ZC=D.memo(function({posts:t,userNickname:n,userProfileImage:r,isPostLanterned:o,isBookmarked:s,currentTitle:i,userProfiles:l,formatTimeAgo:u,formatCreatedAt:d,onPostClick:m,onLanternToggle:f,onBookmarkToggle:h,scrollRef:y}){const b=c.useMemo(()=>t.map(v=>({post:v,isLanterned:o(v.id),isBookmarked:s(v.id),timeAgo:u(v.createdAt),createdAtText:d(v.createdAt),authorProfile:v.authorUid?l[v.authorUid]:void 0})),[t,o,s,u,d,l]);return a.jsx(CC,{style:{height:"100%"},scrollerRef:v=>{y&&v&&(y.current=v)},data:b,className:"scrollbar-hide",itemContent:(v,{post:w,isLanterned:p,isBookmarked:g,timeAgo:x,createdAtText:S,authorProfile:C})=>a.jsx("div",{className:"px-4 py-1.5 first:pt-3 last:pb-24",children:a.jsx(QC,{post:w,userNickname:n,userProfileImage:r,isLanterned:p,isBookmarked:g,timeAgo:x,createdAtText:S,currentTitle:i,authorProfile:C,onPostClick:m,onLanternToggle:f,onBookmarkToggle:h,index:v},w.id)})})}),QC=D.memo(({post:e,userNickname:t,userProfileImage:n,isLanterned:r,isBookmarked:o,timeAgo:s,createdAtText:i,currentTitle:l,authorProfile:u,onPostClick:d,onLanternToggle:m,onBookmarkToggle:f,index:h=999})=>{const y=e.author===t,b=u?.currentTitleId??null,v=tl(b),w=c.useMemo(()=>y?n??"":u?.profileImage??Ka(e.authorAvatar)??"",[y,n,u?.profileImage,e.authorAvatar]),p=el(e.author??"",t,l),g=e.authorDeleted===!0||e.author===" ",x=Oi(e.author,g),S=Is(e.author,g),C=S?null:e.authorTitleName||v||p,R=c.useCallback(()=>{d(e)},[d,e]),k=c.useCallback(N=>{N.preventDefault(),N.stopPropagation(),N.nativeEvent.stopImmediatePropagation();const A=N.currentTarget;A.getAttribute("data-post-id")===String(e.id)&&(A.hasAttribute("data-processing")||(A.setAttribute("data-processing","true"),setTimeout(()=>{A.removeAttribute("data-processing")},1e3),m(e.id)))},[m,e.id]),T=c.useCallback(N=>{N.preventDefault(),N.stopPropagation(),f(e.id)},[f,e.id]);return a.jsx(et,{className:"border-border/60 shadow-sm bg-card/80 backdrop-blur-sm hover:shadow-md transition-shadow cursor-pointer list-optimized",onClick:R,children:a.jsx(tt,{className:"p-4",children:a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(zi,{src:w||void 0,alt:x?`${x} `:" ",nickname:S?void 0:x,fallbackText:x.charAt(0)?.toUpperCase()||"?",className:"w-10 h-10 ring-2 ring-border/20",size:40,loading:h<3?"eager":"lazy",decoding:"async"}),a.jsx("div",{className:"w-full",children:a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("p",{className:"text-sm font-medium "+(S?"text-muted-foreground":""),children:x}),C&&a.jsx(An,{variant:"secondary",className:"text-[10px] px-2 py-0.5 h-auto bg-primary/10 text-primary border-primary/20",children:C})]}),a.jsx("div",{className:"text-xs text-muted-foreground",children:(e.timeAgo??s)&&a.jsx("span",{title:i||void 0,children:e.timeAgo??s})})]}),(()=>{const N=[e.category&&e.category!==""?e.category:null,e.subCategory&&e.subCategory!==""?e.subCategory:null,e.type?e.type==="guide"?" ":"":null].filter(Boolean);return N.length?a.jsx("div",{className:"text-xs text-muted-foreground mt-2",children:N.join("  ")}):null})()]})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("h3",{className:"font-medium text-base mb-1 line-clamp-1",children:e.title}),a.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:e.content})]}),a.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-border/50 relative z-10",onClick:N=>{N.stopPropagation()},onMouseDown:N=>N.stopPropagation(),onTouchStart:N=>N.stopPropagation(),children:[a.jsxs("div",{className:"flex items-center space-x-4 text-xs text-muted-foreground",onClick:N=>N.stopPropagation(),children:[y?a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(dr,{className:"w-4 h-4"}),a.jsx("span",{className:"text-xs",children:e.lanterns??0})]}):a.jsx("div",{onClick:N=>N.stopPropagation(),children:a.jsxs(oe,{type:"button",variant:"ghost",size:"sm",onClick:k,"data-post-id":e.id,className:`h-8 px-2 space-x-1 ${r?"text-amber-500":"text-muted-foreground"}`,children:[r?a.jsx(Hs,{className:"w-4 h-4"}):a.jsx(dr,{className:"w-4 h-4"}),a.jsx("span",{className:"text-xs",children:e.lanterns??0})]})}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(bi,{className:"w-4 h-4"}),a.jsx("span",{className:"text-xs",children:e.comments??e.replies?.length??0})]}),a.jsxs("span",{children:[" ",e.views??0]})]}),a.jsx("div",{onClick:N=>N.stopPropagation(),children:a.jsx(oe,{type:"button",variant:"ghost",size:"sm",onClick:T,className:`h-8 px-2 ${o?"text-primary":"text-muted-foreground"}`,children:a.jsx(yi,{className:`w-4 h-4 ${o?"fill-current":""}`})})})]})]})})})},(e,t)=>{if(e.post.id!==t.post.id||e.isLanterned!==t.isLanterned||e.isBookmarked!==t.isBookmarked||e.post.lanterns!==t.post.lanterns||(e.post.comments??e.post.replies?.length)!==(t.post.comments??t.post.replies?.length)||e.post.views!==t.post.views||e.post.title!==t.post.title||e.post.content!==t.post.content||e.post.type!==t.post.type||e.post.author!==t.post.author||e.post.authorAvatar!==t.post.authorAvatar||(e.post.createdAt?.getTime?.()??0)!==(t.post.createdAt?.getTime?.()??0))return!1;const n=e.post.tags?.join(",")??"",r=t.post.tags?.join(",")??"";return!(n!==r||!qC(e.authorProfile,t.authorProfile)||e.timeAgo!==t.timeAgo||e.createdAtText!==t.createdAtText||e.currentTitle!==t.currentTitle||e.userProfileImage!==t.userProfileImage||e.userNickname!==t.userNickname)});function e1({isDarkMode:e,onToggleDarkMode:t,hasNotifications:n,showNotifications:r,onNotificationsToggle:o,notifications:s,onNotificationClick:i,onMarkAllNotificationsRead:l,onNotificationSettingsClick:u,onNotificationDelete:d,activeCategory:m,activeSubCategory:f,onCategoryClick:h,onQuizClick:y,onTitleShopClick:b,isAdmin:v,onOpenAdminReports:w}){return a.jsx("header",{className:"bg-card/98 glass-effect border-b border-border/60 flex-shrink-0 z-40 safe-top",children:a.jsx("div",{className:"px-4 py-3",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(oe,{variant:"ghost",size:"icon",className:"touch-target rounded-xl hover:bg-accent/80 transition-all duration-200",onClick:h,children:a.jsx(Sy,{className:"w-5 h-5"})}),a.jsx("div",{children:a.jsxs("h1",{className:"text-lg font-semibold",children:[m,f!==""&&`  ${f}`]})})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(oe,{variant:"ghost",size:"icon",className:"touch-target rounded-xl hover:bg-accent/80 transition-all duration-200 text-foreground",onClick:y,"aria-label":" ",children:a.jsx(qu,{className:"w-5 h-5"})}),a.jsx(oe,{variant:"ghost",size:"icon",className:"touch-target rounded-xl hover:bg-accent/80 transition-all duration-200 text-foreground",onClick:b,children:a.jsx(By,{className:"w-5 h-5"})}),v&&w&&a.jsx(oe,{variant:"ghost",size:"icon",className:"touch-target rounded-xl hover:bg-accent/80 transition-all duration-200 text-foreground",onClick:w,"aria-label":" ",children:a.jsx(ss,{className:"w-5 h-5"})}),a.jsx(oe,{variant:"ghost",size:"icon",className:"touch-target rounded-xl hover:bg-accent/80 transition-all duration-200",onClick:t,children:e?a.jsx(ki,{className:"w-4 h-4"}):a.jsx(wi,{className:"w-4 h-4"})}),a.jsxs(Qi,{open:r,onOpenChange:o,children:[a.jsx(Fs,{asChild:!0,children:a.jsxs(oe,{variant:"ghost",size:"icon",className:"relative",children:[a.jsx(Kg,{className:"w-4 h-4"}),n&&a.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full"})]})}),a.jsxs($s,{className:"w-80 p-0",align:"end",side:"bottom",sideOffset:5,children:[a.jsx("div",{className:"p-4 border-b border-border",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"font-medium",children:""}),a.jsxs("div",{className:"flex items-center space-x-2",children:[s.some(p=>!p.isRead)&&a.jsx(oe,{variant:"outline",size:"sm",onClick:l,className:"text-xs h-7 px-2",children:" "}),a.jsx(oe,{variant:"ghost",size:"icon",onClick:u,children:a.jsx(zy,{className:"w-4 h-4"})})]})]})}),a.jsx("div",{className:"max-h-80 scroll-optimized",children:s.length===0?a.jsx("div",{className:"p-8 text-center text-muted-foreground",children:"  "}):a.jsx(a.Fragment,{children:s.map(p=>a.jsx(n1,{notification:p,onNotificationClick:i,onDelete:d?()=>d(p.id):void 0},p.id))})})]})]})]})]})})})}const t1=D.memo(e1),n1=D.memo(function({notification:t,onNotificationClick:n,onDelete:r}){const o=c.useRef(null),s=c.useRef(null),i=c.useRef(0),[l,u]=D.useState(0),d=c.useRef(!1),m=80,f=10,h=c.useCallback(()=>{i.current=0,u(0),o.current=null,s.current=null,d.current=!1},[]),y=c.useCallback((k,T)=>{o.current=k,s.current=T,i.current=0,d.current=!1,u(0)},[]),b=c.useCallback((k,T)=>{if(o.current===null||s.current===null)return;const N=k-o.current,A=Math.abs(T-s.current);Math.abs(N)>f&&Math.abs(N)>A*1.5?(d.current=!0,i.current=N,u(N)):d.current&&Math.abs(N)>0&&(i.current=N,u(N))},[]),v=c.useCallback(()=>{if(o.current===null)return;Math.abs(i.current)>m&&r&&r(),h()},[r,h]),w=c.useCallback(k=>{const T=k.touches[0];y(T.clientX,T.clientY)},[y]),p=c.useCallback(k=>{if(o.current===null||s.current===null)return;const T=k.touches[0],N=T.clientX-o.current,A=Math.abs(T.clientY-s.current);Math.abs(N)>f&&Math.abs(N)>A*1.5?(d.current=!0,i.current=N,u(N),k.preventDefault(),k.stopPropagation()):d.current&&(k.preventDefault(),k.stopPropagation())},[]),g=c.useCallback(k=>{d.current&&(k.preventDefault(),k.stopPropagation()),v()},[v]),x=c.useCallback(k=>{y(k.clientX,k.clientY);const T=A=>{o.current!==null&&b(A.clientX,A.clientY)},N=()=>{v(),document.removeEventListener("mousemove",T),document.removeEventListener("mouseup",N)};document.addEventListener("mousemove",T),document.addEventListener("mouseup",N)},[y,b,v]),S=c.useCallback(k=>{if(d.current||Math.abs(i.current)>f){k.preventDefault(),k.stopPropagation();return}n(t)},[t,n]),C=Math.abs(l)>m?.4:1,R=Math.abs(l)>20;return a.jsxs("div",{className:`p-4 border-b border-border hover:bg-muted/50 transition-all cursor-pointer relative overflow-hidden select-none ${t.isRead?"":"bg-muted/30"}`,onClick:S,onTouchStart:w,onTouchMove:p,onTouchEnd:g,onMouseDown:x,style:{transform:`translateX(${l}px)`,opacity:C,transition:l===0?"transform 0.2s ease-out, opacity 0.2s ease-out":"none",touchAction:Math.abs(l)>0?"pan-x":"pan-y"},children:[R&&a.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center justify-end px-4 bg-destructive text-destructive-foreground pointer-events-none",style:{width:`${Math.min(Math.abs(l)+20,120)}px`},children:a.jsx("span",{className:"text-xs font-medium whitespace-nowrap",children:""})}),a.jsxs("div",{className:"flex items-start space-x-3 relative z-10",children:[a.jsxs("div",{className:"flex-shrink-0 mt-1",children:[t.type==="reply"&&a.jsx(bi,{className:"w-4 h-4 text-blue-500"}),t.type==="lantern"&&a.jsx(Hs,{className:"w-4 h-4 text-amber-500"}),t.type==="popular"&&a.jsx(ss,{className:"w-4 h-4 text-primary"})]}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm",children:t.message}),a.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[t.postTitle,"  ",t.time]})]}),!t.isRead&&a.jsx("div",{className:"w-2 h-2 bg-primary rounded-full flex-shrink-0"})]})]})});function lu({title:e,subtitle:t,onBack:n,rightSlot:r}){return a.jsx("header",{className:"bg-card/95 backdrop-blur-xl border-b border-border flex-shrink-0 safe-top",children:a.jsx("div",{className:"px-4 py-3",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[n&&a.jsx(oe,{variant:"ghost",size:"icon",onClick:n,children:a.jsx(gi,{className:"w-5 h-5"})}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("h1",{className:"font-medium",children:e}),t&&a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:t})]})]}),r&&a.jsx("div",{children:r})]})})})}const r1="weekly_quizzes",o1="user_quiz_answers";function s1(e=new Date){const t=new Date(e.toLocaleString("en-US",{timeZone:"Asia/Seoul"})),n=t.getFullYear(),r=new Date(n,0,1),o=Math.floor((t.getTime()-r.getTime())/(1440*60*1e3)),s=Math.ceil((o+r.getDay()+1)/7);return`${n}-W${s.toString().padStart(2,"0")}`}function a1({onBack:e}){const[t,n]=c.useState("category"),[r,o]=c.useState(null),[s,i]=c.useState(0),[l,u]=c.useState(new Map),[d,m]=c.useState(!1),[f,h]=c.useState(null),[y,b]=c.useState(!1),[v,w]=c.useState([]),[p,g]=c.useState(new Map),x=c.useMemo(()=>s1(),[]);c.useEffect(()=>{(async()=>{b(!0);try{const j=Ye(se,r1),M=zt(j,Ht("weekId","==",x)),I=await mt(M),_=new Map,P=[];I.forEach(W=>{const K=W.data(),q=K.category;q&&Array.isArray(K.questions)&&K.questions.length>0&&(_.set(q,{weekId:K.weekId,category:q,startDate:K.startDate?.toDate?.()??new Date,endDate:K.endDate?.toDate?.()??new Date,questions:K.questions,rewards:K.rewards??{perfect:10,partial:5}}),P.push(q))}),g(_),w(P)}catch{H.error("  .")}finally{b(!1)}})()},[x]);const S=c.useCallback(E=>{const j=p.get(E);if(!j){H.error("     .");return}o(j),i(0),u(new Map),m(!1),h(null),n("quiz")},[p]),C=c.useCallback((E,j)=>{u(M=>{const I=new Map(M);return I.set(E,j),I})},[]),R=c.useCallback(async()=>{if(!r||!ne.currentUser)return;const E=[];let j=0;r.questions.forEach(_=>{const P=l.get(_.id)??-1,W=P===_.correctIndex;W&&j++,E.push({questionId:_.id,selectedIndex:P,isCorrect:W})});const M=Math.round(j/r.questions.length*100),I=r.questions.length;h({score:M,correctCount:j,totalCount:I}),m(!0);try{const _={userId:ne.currentUser.uid,weekId:r.weekId,category:r.category,answers:E,score:M,completedAt:Pt()},P=ke(se,o1,`${ne.currentUser.uid}_${r.weekId}_${r.category}`);await hn(P,_,{merge:!0}),M===100?H.success(`! ${r.rewards.perfect}  .`):M>=60&&H.success(`! ${r.rewards.partial}  .`)}catch{}},[r,l]),k=c.useCallback(()=>{r&&(s<r.questions.length-1?i(E=>E+1):R())},[r,s,R]),T=c.useCallback(()=>{n("category"),o(null),i(0),u(new Map),m(!1),h(null)},[]),N=c.useCallback(()=>{r&&(i(0),u(new Map),m(!1),h(null))},[r]),A=r?.questions[s],L=A&&l.has(A.id),O=s===(r?.questions.length??0)-1;return t==="category"?a.jsxs("div",{className:"w-full h-full bg-background text-foreground flex flex-col",children:[a.jsx(lu,{title:" ",onBack:e}),a.jsx("div",{className:"flex-1 overflow-y-auto flex items-center justify-center",children:a.jsx("div",{className:"max-w-screen-md w-full px-4 py-4",children:y?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx("p",{className:"text-muted-foreground",children:"  ..."})}):v.length===0?a.jsx($C,{icon:a.jsx(qu,{className:"w-12 h-12 text-muted-foreground"}),title:"   ",description:"    ."}):a.jsxs("div",{className:"space-y-3",children:[a.jsx(et,{children:a.jsxs(tt,{className:"p-4",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[a.jsx(Da,{className:"w-5 h-5 text-amber-500"}),a.jsx("p",{className:"font-medium",children:"  "})]}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"    !"})]})}),v.map(E=>{const j=p.get(E),M=j?.questions.length??0;return a.jsx(et,{className:"cursor-pointer hover:bg-accent/50 transition-colors",onClick:()=>S(E),children:a.jsx(tt,{className:"p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:E}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:[M,""]})]}),a.jsxs(An,{variant:"secondary",children:[j?.rewards.perfect??10," "]})]})})},E)})]})})})]}):t==="quiz"&&r&&A?a.jsxs("div",{className:"w-full h-full bg-background text-foreground flex flex-col",children:[a.jsx(lu,{title:`${r.category} `,onBack:d?void 0:T}),a.jsx("div",{className:"flex-1 overflow-y-auto",children:a.jsx("div",{className:"max-w-screen-md mx-auto px-4 py-4",children:d&&f?a.jsxs("div",{className:"space-y-4",children:[a.jsx(et,{className:"bg-gradient-to-r from-amber-500/10 to-orange-500/10 border-amber-500/20",children:a.jsxs(tt,{className:"p-6 text-center",children:[a.jsx("div",{className:"flex justify-center mb-4",children:f.score===100?a.jsx(Da,{className:"w-16 h-16 text-amber-500"}):f.score>=60?a.jsx(Ol,{className:"w-16 h-16 text-green-500"}):a.jsx(zl,{className:"w-16 h-16 text-red-500"})}),a.jsxs("p",{className:"text-2xl font-bold mb-2",children:[f.score,""]}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:[f.correctCount," / ",f.totalCount," "]}),f.score===100&&a.jsxs("p",{className:"text-sm text-amber-500 mt-2",children:["+",r.rewards.perfect,"  !"]}),f.score>=60&&f.score<100&&a.jsxs("p",{className:"text-sm text-green-500 mt-2",children:["+",r.rewards.partial,"  !"]})]})}),a.jsx("div",{className:"space-y-3",children:r.questions.map((E,j)=>{const M=l.get(E.id)??-1,I=M===E.correctIndex;return a.jsx(et,{children:a.jsx(tt,{className:"p-4",children:a.jsxs("div",{className:"flex items-start space-x-2 mb-3",children:[I?a.jsx(Ol,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}):a.jsx(zl,{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5"}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("p",{className:"font-medium mb-2",children:[j+1,". ",E.question]}),a.jsx("div",{className:"space-y-2",children:E.options.map((_,P)=>{const W=M===P,K=P===E.correctIndex;return a.jsx("div",{className:`p-2 rounded border ${K?"bg-green-500/10 border-green-500/50":W&&!K?"bg-red-500/10 border-red-500/50":"bg-muted/30 border-border"}`,children:a.jsxs("p",{className:"text-sm",children:[String.fromCharCode(65+P),". ",_,K&&" "]})},P)})}),a.jsx("div",{className:"mt-3 p-2 bg-muted/30 rounded",children:a.jsxs("p",{className:"text-xs text-muted-foreground",children:[a.jsx("span",{className:"font-medium",children:":"})," ",E.explanation]})})]})]})})},E.id)})}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx(oe,{variant:"outline",className:"flex-1",onClick:T,children:" "}),a.jsx(oe,{className:"flex-1",onClick:N,children:" "})]})]}):a.jsxs("div",{className:"space-y-4",children:[a.jsx(et,{children:a.jsxs(tt,{className:"p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("p",{className:"font-medium",children:[s+1," / ",r.questions.length]}),a.jsxs(An,{variant:"secondary",children:[Math.round((s+1)/r.questions.length*100),"%"]})]}),a.jsx("p",{className:"text-lg mb-4",children:A.question})]})}),a.jsx("div",{className:"space-y-2",children:A.options.map((E,j)=>{const M=l.get(A.id)===j;return a.jsx(et,{className:`cursor-pointer transition-colors ${M?"bg-primary/10 border-primary":"hover:bg-accent/50"}`,onClick:()=>C(A.id,j),children:a.jsx(tt,{className:"p-4",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center ${M?"border-primary bg-primary":"border-muted-foreground"}`,children:M&&a.jsx("div",{className:"w-2 h-2 rounded-full bg-primary-foreground"})}),a.jsxs("p",{className:"flex-1",children:[String.fromCharCode(65+j),". ",E]})]})})},j)})}),a.jsx(oe,{className:"w-full",onClick:k,disabled:!L,children:O?" ":" "})]})})})]}):null}const Vo={stroke:"currentColor",fill:"none",display:"block",width:"20px",height:"20px"},i1={stroke:"#ffffff",fill:"none",display:"block",width:"24px",height:"24px"};function l1({onHomeClick:e,onRankingClick:t,onBookmarksClick:n,onMyPageClick:r,onWriteClick:o,activeTab:s="home"}){const i=c.useCallback((h,y)=>{const b=y.currentTarget;b.blur(),setTimeout(()=>{b.style.backgroundColor="transparent",b.classList.remove("focus:bg-accent","focus-visible:bg-accent")},0),h()},[]),l=c.useCallback(h=>{i(e,h)},[i,e]),u=c.useCallback(h=>{i(t,h)},[i,t]),d=c.useCallback(h=>{o&&i(o,h)},[i,o]),m=c.useCallback(h=>{i(n,h)},[i,n]),f=c.useCallback(h=>{i(r,h)},[i,r]);return a.jsxs("nav",{className:"bg-card/98 glass-effect border-t border-border flex-shrink-0 shadow-[0_-2px_8px_rgba(0,0,0,0.04)] dark:shadow-[0_-2px_8px_rgba(0,0,0,0.2)] safe-nav-bottom relative",children:[o&&a.jsxs(oe,{className:"write-button absolute left-1/2 -translate-x-1/2 -top-5 rounded-full w-14 h-14 bg-primary hover:bg-primary/90 shadow-lg hover:shadow-xl overflow-hidden z-10",onClick:d,children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary/80 to-primary rounded-full"}),a.jsx(Ku,{size:24,strokeWidth:2.5,style:i1,className:"relative z-10"})]}),a.jsx("div",{className:"px-2 py-2",children:a.jsxs("div",{className:"flex items-center justify-between max-w-md mx-auto",children:[a.jsxs("div",{className:"flex items-center justify-around flex-1",children:[a.jsxs(oe,{variant:"ghost",size:"sm",className:`nav-button nav-button-override flex flex-col items-center gap-1 touch-target px-3 py-2 rounded-xl ${s==="home"?"bg-primary/10 text-primary":"text-muted-foreground hover:text-foreground hover:bg-accent/50"}`,onClick:l,children:[a.jsx(by,{size:20,strokeWidth:2,style:Vo,className:`transition-transform duration-200 ${s==="home"?"scale-110":""}`}),a.jsx("span",{className:"text-xs font-medium",children:""})]}),a.jsxs(oe,{variant:"ghost",size:"sm",className:`nav-button nav-button-override flex flex-col items-center gap-1 touch-target px-3 py-2 rounded-xl ${s==="ranking"?"bg-primary/10 text-primary":"text-muted-foreground hover:text-foreground hover:bg-accent/50"}`,onClick:u,children:[a.jsx(Da,{size:20,strokeWidth:2,style:Vo,className:`transition-transform duration-200 ${s==="ranking"?"scale-110":""}`}),a.jsx("span",{className:"text-xs font-medium",children:""})]})]}),a.jsx("div",{className:"w-16"}),a.jsxs("div",{className:"flex items-center justify-around flex-1",children:[a.jsxs(oe,{variant:"ghost",size:"sm",className:`nav-button nav-button-override flex flex-col items-center gap-1 touch-target px-3 py-2 rounded-xl ${s==="bookmarks"?"bg-primary/10 text-primary":"text-muted-foreground hover:text-foreground hover:bg-accent/50"}`,onClick:m,children:[a.jsx(yi,{size:20,strokeWidth:2,style:Vo,className:`transition-transform duration-200 ${s==="bookmarks"?"scale-110":""}`}),a.jsx("span",{className:"text-xs font-medium",children:""})]}),a.jsxs(oe,{variant:"ghost",size:"sm",className:`nav-button nav-button-override flex flex-col items-center gap-1 touch-target px-3 py-2 rounded-xl ${s==="profile"?"bg-primary/10 text-primary":"text-muted-foreground hover:text-foreground hover:bg-accent/50"}`,onClick:f,children:[a.jsx(Yy,{size:20,strokeWidth:2,style:Vo,className:`transition-transform duration-200 ${s==="profile"?"scale-110":""}`}),a.jsx("span",{className:"text-xs font-medium",children:" "})]})]})]})})]})}const jt=D.memo(l1);function Km({open:e,onOpenChange:t,title:n,description:r,confirmText:o="",cancelText:s="",isDestructive:i=!1,onConfirm:l,checkbox:u}){if(!e)return null;const d=()=>{l?.(),t(!1)},m=()=>{u&&u.onCheckedChange(!1),t(!1)};return a.jsx("div",{className:"fixed inset-0 z-50  flex items-center justify-center p-4 animate-in fade-in duration-200",children:a.jsxs(et,{className:"w-full max-w-md shadow-lg scale-100",children:[a.jsxs(Ni,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(hd,{className:"text-lg",children:n}),a.jsx(oe,{variant:"ghost",size:"icon",onClick:m,children:a.jsx(as,{className:"w-4 h-4"})})]}),a.jsxs(tt,{className:"space-y-4",children:[a.jsx("p",{className:"text-muted-foreground whitespace-pre-line leading-relaxed",children:r}),u&&a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Cd,{id:"dont-show-again",checked:u.checked,onCheckedChange:u.onCheckedChange}),a.jsx("label",{htmlFor:"dont-show-again",className:"text-sm cursor-pointer select-none",children:u.label})]}),a.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[a.jsxs(oe,{variant:"outline",onClick:m,children:[s," "]}),a.jsx(oe,{onClick:d,variant:i?"destructive":"default",className:i?"bg-red-600 hover:bg-red-700 text-white":"",children:o})]})]})]})})}const c1=Object.freeze(Object.defineProperty({__proto__:null,AlertDialogSimple:Km},Symbol.toStringTag,{value:"Module"})),Jm=c.createContext(null);function u1({children:e}){const[t,n]=c.useState({name:"home"}),[r,o]=c.useState("home"),[s,i]=c.useState(null),l=c.useRef([]),u=c.useCallback(I=>{const _=l.current.filter(P=>P!==I);_.push(I),l.current=_},[]),d=c.useCallback(I=>{l.current=l.current.filter(_=>_!==I)},[]),m=c.useCallback(()=>{const I=l.current;if(I.length===0)return null;const _=I[I.length-1];return l.current=I.slice(0,-1),_},[]),f=c.useCallback(()=>{l.current=[]},[]),h=c.useCallback(I=>{switch(I.name){case"home":return"home";case"ranking":return"ranking";case"bookmarks":return"bookmarks";case"myPage":return"profile";case"titlesCollection":return"titlesCollection";case"achievements":return"achievements";case"quiz":return"home";case"postDetail":return"home";case"userProfile":return"home";case"category":case"search":case"titleShop":return"home";case"followList":case"myContentList":return"profile";case"adminReports":return"home";case"notificationSettings":return"profile";default:return"home"}},[]),y=c.useCallback(I=>{const _={showMyPage:!1,showCategoryScreen:!1,showSearchScreen:!1,showNotificationSettings:!1,showBookmarks:!1,showWriteScreen:!1,showPostWarning:!1,showTitleShop:!1,showTitlesCollection:!1,showRanking:!1,showAchievements:!1,showGuidelines:!1,showNotifications:!1,showFollowList:null,showMyContentList:null,showUserProfile:null};switch(I.name){case"home":return _;case"ranking":return{..._,showRanking:!0};case"bookmarks":return{..._,showBookmarks:!0};case"myPage":return{..._,showMyPage:!0};case"category":return{..._,showCategoryScreen:!0};case"search":return{..._,showSearchScreen:!0};case"titleShop":return{..._,showTitleShop:!0};case"titlesCollection":return{..._,showTitlesCollection:!0};case"achievements":return{..._,showAchievements:!0};case"quiz":return _;case"followList":return{..._,showFollowList:I.mode};case"myContentList":return{..._,showMyContentList:I.mode};case"userProfile":return{..._,showUserProfile:I.nickname};case"postDetail":return _;case"adminReports":return _;case"notificationSettings":return{..._,showMyPage:!0,showNotificationSettings:!0};default:return _}},[]),b=c.useCallback(I=>{n(I),o(h(I))},[h]),v=c.useCallback(()=>b({name:"home"}),[b]),w=c.useCallback(()=>b({name:"ranking"}),[b]),p=c.useCallback(()=>b({name:"bookmarks"}),[b]),g=c.useCallback(()=>b({name:"myPage"}),[b]),x=c.useCallback(()=>b({name:"category"}),[b]),S=c.useCallback(()=>b({name:"search"}),[b]),C=c.useCallback(()=>b({name:"titleShop"}),[b]),R=c.useCallback(()=>b({name:"titlesCollection"}),[b]),k=c.useCallback(()=>b({name:"achievements"}),[b]),T=c.useCallback(()=>b({name:"quiz"}),[b]),N=c.useCallback(I=>b({name:"followList",mode:I}),[b]),A=c.useCallback(I=>b({name:"myContentList",mode:I}),[b]),L=c.useCallback(I=>b({name:"userProfile",nickname:I}),[b]),O=c.useCallback((I,_)=>b({name:"postDetail",postId:I,source:_}),[b]),E=c.useCallback(()=>b({name:"adminReports"}),[b]),j=c.useCallback(()=>b({name:"notificationSettings"}),[b]),M=c.useMemo(()=>({route:t,setRoute:n,currentScreen:r,setCurrentScreen:o,visibility:y(t),goHome:v,goRanking:w,goBookmarks:p,goMyPage:g,goCategory:x,goSearch:S,goTitleShop:C,goTitlesCollection:R,goAchievements:k,goQuiz:T,goFollowList:N,goMyContentList:A,goUserProfile:L,goPostDetail:O,goAdminReports:E,goNotificationSettings:j,layerStackRef:l,pushLayer:u,removeLayer:d,clearLayers:f,popLayer:m,writeDraft:s,setWriteDraft:i}),[t,r,y,v,w,p,g,x,S,C,R,k,T,N,A,L,O,E,j,u,d,f,m,s,i,l,r,o]);return a.jsx(Jm.Provider,{value:M,children:e})}function d1(){const e=c.useContext(Jm);if(!e)throw new Error("useNavigationStore must be used within NavigationStoreProvider");return e}const cu=[{id:"",name:"",icon:yy,count:0,subCategories:[{id:"",name:"",count:0}]},{id:"",name:"",icon:cy,count:0,subCategories:[{id:"",name:"",count:0},{id:"",name:"",count:0},{id:"",name:"",count:0},{id:"",name:"",count:0},{id:"",name:"",count:0}]},{id:"",name:"",icon:Ul,count:0,subCategories:[{id:"",name:"",count:0},{id:"",name:"",count:0},{id:"",name:"",count:0},{id:"",name:"",count:0},{id:"",name:"",count:0},{id:"",name:"",count:0}]},{id:"",name:"",icon:dy,count:0,subCategories:[{id:"",name:"",count:0},{id:"",name:"",count:0},{id:"",name:"",count:0},{id:"",name:"",count:0},{id:"",name:"",count:0},{id:"",name:"",count:0}]},{id:"",name:"",icon:Zg,count:0,subCategories:[{id:"",name:"",count:0},{id:"",name:"",count:0},{id:"",name:"",count:0},{id:"",name:"",count:0},{id:"",name:"",count:0},{id:"",name:"",count:0}]},{id:"",name:"",icon:Ky,count:0,subCategories:[{id:"",name:"",count:0},{id:"",name:"",count:0},{id:"",name:"",count:0},{id:"",name:"",count:0}]},{id:"",name:"",icon:Iy,count:0,subCategories:[{id:"",name:"",count:0},{id:"",name:"",count:0},{id:"",name:"",count:0}]},{id:"",name:"",icon:Ul,count:0,subCategories:[{id:"",name:"",count:0},{id:"",name:"",count:0}]}],f1=c.lazy(()=>Ne(()=>import("./MyPageScreen-lpPIJ3av.js"),__vite__mapDeps([8,2,1,3,4,5,9,10,11,12,13,14,15,16,17,18,6]),import.meta.url).then(e=>({default:e.MyPageScreen}))),m1=c.lazy(()=>Ne(()=>import("./CategoryScreen-BkqyP4K4.js"),__vite__mapDeps([19,2,1,3,4,5,20]),import.meta.url).then(e=>({default:e.CategoryScreen}))),h1=c.lazy(()=>Ne(()=>import("./SearchScreen-B9uYKFTo.js"),__vite__mapDeps([21,2,1,3,4,5,22,23,13,10,20,24]),import.meta.url).then(e=>({default:e.SearchScreen}))),p1=c.lazy(()=>Ne(()=>import("./RankingScreen-l6OG_wCF.js"),__vite__mapDeps([25,2,1,3,4,5,9,14,24,26]),import.meta.url).then(e=>({default:e.RankingScreen}))),g1=c.lazy(()=>Ne(()=>import("./BookmarkScreen-ok6qFoJk.js"),__vite__mapDeps([27,2,1,3,4,5,20]),import.meta.url).then(e=>({default:e.BookmarkScreen}))),y1=c.lazy(()=>Ne(()=>import("./MyContentListScreen-BInmtueT.js"),__vite__mapDeps([28,2,1,3,4,5,14,17]),import.meta.url).then(e=>({default:e.MyContentListScreen}))),x1=D.memo(p1),v1=D.memo(g1),b1=D.memo(h1),w1=c.lazy(()=>Ne(()=>import("./WriteScreen-DT2WLiU6.js"),__vite__mapDeps([29,2,1,3,4,5,22,23,13,18]),import.meta.url).then(e=>({default:e.WriteScreen}))),k1=c.lazy(()=>Ne(()=>import("./NotesScreen-Byw1d0sP.js"),__vite__mapDeps([30,2,1,3,4,5]),import.meta.url)),S1=c.lazy(()=>Ne(()=>import("./NoteDetailScreen-i54GsOA7.js"),__vite__mapDeps([31,2,1,3,4,5]),import.meta.url)),C1=c.lazy(()=>Ne(()=>import("./QuestionComposeScreen-CQc7CpBX.js"),__vite__mapDeps([32,2,1,3,4,5]),import.meta.url).then(e=>({default:e.QuestionComposeScreen}))),T1=c.lazy(()=>Ne(()=>import("./TitleShop-BaVvhVYE.js"),__vite__mapDeps([33,2,1,3,4,5,34,26,18,35]),import.meta.url).then(e=>({default:e.TitleShop}))),N1=c.lazy(()=>Ne(()=>import("./TitlesCollection-D9IoI8mt.js"),__vite__mapDeps([36,2,1,3,4,5,34,26,18,35]),import.meta.url).then(e=>({default:e.TitlesCollection}))),R1=c.lazy(()=>Ne(()=>import("./AchievementsScreen-DZ9MCCC_.js"),__vite__mapDeps([37,2,1,3,4,5,35]),import.meta.url).then(e=>({default:e.AchievementsScreen}))),A1=c.lazy(()=>Ne(()=>import("./FollowListScreen-aYwitBPr.js"),__vite__mapDeps([38,2,1,3,4,5,14,16]),import.meta.url).then(e=>({default:e.FollowListScreen}))),E1=c.lazy(()=>Ne(()=>import("./UserProfileDialog-BnvVw9Ue.js"),__vite__mapDeps([39,2,1,3,4,5,9,14,38,16,28,17,13,15]),import.meta.url).then(e=>({default:e.UserProfileDialog}))),j1=c.lazy(()=>Ne(()=>import("./NotificationSettingsDialog-Cl8AdsH7.js"),__vite__mapDeps([40,2,1,3,4,5,10,11,14]),import.meta.url).then(e=>({default:e.NotificationSettingsDialog}))),uu=c.lazy(()=>Ne(()=>import("./ReportDialog-CY7BpGSi.js"),__vite__mapDeps([41,2,1,3,4,5]),import.meta.url).then(e=>({default:e.ReportDialog}))),I1=c.lazy(()=>Ne(()=>import("./AdminReportScreen-BOYqQkzz.js"),__vite__mapDeps([42,2,1,3,4,5,14]),import.meta.url).then(e=>({default:e.AdminReportScreen}))),Go=Object.freeze([]),_1=120*1e3,it=()=>a.jsx("div",{className:"w-full h-full flex items-center justify-center text-sm text-muted-foreground",children:" ..."}),Ea=3600*1e3;function qo(e,t,n,r){c.useEffect(()=>{const o=r.current;if(t){o[e]&&(clearTimeout(o[e]),delete o[e]),n(s=>{if(s.has(e))return s;const i=new Set(s);return i.add(e),i});return}return o[e]&&clearTimeout(o[e]),o[e]=window.setTimeout(()=>{n(s=>{if(!s.has(e))return s;const i=new Set(s);return i.delete(e),i}),delete o[e]},_1),()=>{o[e]&&(clearTimeout(o[e]),delete o[e])}},[t,e,n,r])}function du(e){if(!e)return null;if(e instanceof Date)return e;if(e&&typeof e.toDate=="function")try{return e.toDate()}catch{return null}if(typeof e=="string"||typeof e=="number"){const t=new Date(e);if(!Number.isNaN(t.getTime()))return t}return null}function Zm(e){return a.jsx(u1,{children:a.jsx(P1,{...e})})}function P1({userNickname:e,userProfileImage:t,onProfileImageChange:n,onLogout:r,isDarkMode:o,onToggleDarkMode:s,onRequestExit:i,onShowTerms:l,onShowPrivacy:u,onShowOpenSourceLicenses:d,onShowAttributions:m,shouldOpenMyPageOnMain:f,shouldOpenSettingsOnMyPage:h,onMainScreenReady:y,onSettingsOpenedFromMain:b,onRequestLogin:v}){const{route:w,setRoute:p,currentScreen:g,setCurrentScreen:x,visibility:S,pushLayer:C,removeLayer:R,popLayer:k,goHome:T,goRanking:N,goBookmarks:A,goMyPage:L,goPostDetail:O,goAchievements:E,setWriteDraft:j}=d1(),[M,I]=c.useState(!1),[_,P]=c.useState(null),[W,K]=c.useState(!1),[q,G]=c.useState(null),[F,X]=c.useState(!1),[J,fe]=c.useState("home"),[Q,U]=c.useState(null),[le,he]=c.useState(!1),[Ce,Ee]=c.useState(""),[Re,je]=c.useState(""),[$e,Le]=c.useState("latest"),pe=c.useRef(null),Se=c.useRef(new Set),_e=c.useRef(null),We=M,Xn=w.name==="questionCompose",Xe=S.showMyPage,pt=S.showCategoryScreen,qt=S.showTitleShop,Yt=S.showTitlesCollection,Tt=S.showUserProfile,Kn=S.showRanking,wn=S.showSearchScreen,_n=S.showAchievements,Xt=S.showBookmarks||g==="bookmarks",Kt=S.showNotificationSettings,sn=w.name==="quiz",kn=S.showFollowList,Jn=S.showMyContentList,Zn=S.showMyPage,Qn=S.showCategoryScreen,pr=S.showSearchScreen,Pn=S.showTitleShop,Nt=S.showTitlesCollection,gr=S.showAchievements,yr=S.showUserProfile,So=w.name==="notes",er=kn,ce=Jn;c.useEffect(()=>{switch(w.name){case"questionCompose":x("home");break;case"home":x("home");break;case"myPage":x("profile");break;case"ranking":x("ranking");break;case"bookmarks":x("bookmarks");break;case"category":x("home");break;case"search":x("home");break;case"titleShop":x("home");break;case"titlesCollection":x("profile");break;case"achievements":x("achievements");break;case"followList":x("profile");break;case"myContentList":x("profile");break;case"userProfile":x("home");break;case"adminReports":x("home");break;case"notificationSettings":x("profile");break;case"postDetail":x("home");break}},[w,x]);const[De,Ge]=c.useState(null),[Ke,Ln]=c.useState(null),[He,ut]=c.useState(cu),[Dn,ze]=c.useState("profile"),{posts:ge,setPosts:tr,refresh:Jt}=xv(),{balance:hl}=cc(),Ys=Vx(),xr=c.useMemo(()=>Ys?.blockedUserIds||[],[Ys]),gt=c.useMemo(()=>{const z=Array.isArray(xr)?xr:[];return ge.filter(B=>{if(B.hidden===!0)return!1;const Y=B.authorUid||B.userId;return Y?!z.includes(Y):!0})},[ge,xr]);c.useEffect(()=>{if(gt.length===0){ut(cu);return}ut(z=>z.map(B=>{const Y=B.id===""?gt.length:0,xe=gt.filter(wt=>wt.category===B.id),Je=B.id===""?Y:xe.length,bt=B.subCategories.map(wt=>{if(wt.id==="")return{...wt,count:Je};const Ve=xe.filter(at=>at.subCategory===wt.id).length;return{...wt,count:Ve}});return{...B,count:Je,subCategories:bt}}))},[gt]),c.useEffect(()=>{if(!q)return;const z=ge.find(B=>B.id===q.id);z&&z!==q&&G(z)},[ge,q]);const Fr=c.useCallback(()=>{pe.current&&(clearTimeout(pe.current),pe.current=null)},[]),Xs=c.useCallback(async z=>{const B=String(z);if(Se.current.has(B))return;const Y=ge.find(Ve=>Ve.id===B);if(!Y)return;const xe=Y.replies?.some(Ve=>Ve?.isAi===!0||typeof Ve?.aiLabel=="string")===!0,Je=Y.replies?.some(Ve=>Ve?.isAi!==!0&&Ve?.hidden!==!0)===!0;if(xe||Je)return;const bt=du(Y.createdAt);if(!(!bt||Date.now()-bt.getTime()<Ea)){Se.current.add(B);try{const Ve=Fn(to,"aiAutoReply"),at=`${Y.title??""} 

 ${Y.content??""}`;await Ve({prompt:at,postId:B,postTitle:Y.title??"",postContent:Y.content??"",postCategory:Y.category??"",postCreatedAt:bt.toISOString(),replyCount:Y.replies?.length??0})}catch{Se.current.delete(B)}}},[ge]);c.useEffect(()=>{if(Fr(),!q||w.name!=="postDetail")return;const z=q.id,B=ge.find(at=>at.id===z)??q,Y=B.replies?.some(at=>at?.isAi===!0||typeof at?.aiLabel=="string")===!0,xe=B.replies?.some(at=>at?.isAi!==!0&&at?.hidden!==!0)===!0;if(Y||xe)return;const Je=du(B.createdAt);if(!Je)return;const bt=Date.now(),wt=Je.getTime()+Ea;if(wt<=bt){Xs(String(z));return}const Ve=Math.max(0,Math.min(wt-bt,Ea));return pe.current=setTimeout(()=>{Xs(String(z))},Ve),()=>Fr()},[Fr,ge,w.name,q,Xs]),c.useEffect(()=>()=>{Fr()},[Fr]);const Ks=cc(),{clampedTrust:Co,updateTrust:Qm,addLumensWithTrust:pl}=Bv({addLumens:Ks.addLumens}),dt=Rv({lumenBalance:Ks.balance,spendLumens:Ks.spendLumens}),{userActivity:eh,updateActivity:Js}=gv(pl,(z,B)=>{dt.addSpecialTitle(z,B)}),To=Ys?.role==="admin",Zt=Fv({posts:ge,userNickname:e}),[gl,No]=c.useState("");c.useEffect(()=>{const z=ne.currentUser?.uid;if(!z){No("");return}const B=ke(se,"users",z),Y=no(B,xe=>{if(!xe.exists()){No("");return}const Je=xe.data(),bt=typeof Je.profileDescription=="string"?Je.profileDescription:"";No(bt)},()=>{});return()=>{Y()}},[]);const an=bv({posts:ge,setPosts:tr,selectedPost:q,setSelectedPost:G,userNickname:e,userActivity:eh,updateActivity:Js,userPostLanterns:Zt.userPostLanterns,setUserPostLanterns:Zt.setUserPostLanterns??(()=>{}),userReplyLanterns:Zt.userReplyLanterns,setUserReplyLanterns:Zt.setUserReplyLanterns??(()=>{}),addLumensWithTrust:pl,updateTrust:Qm}),Qt=wv({userNickname:e}),Rt=Nv({userNickname:e}),Ro=c.useMemo(()=>(w.name==="userProfile"?w.nickname:null)??S.showUserProfile,[w,S.showUserProfile]),$r=c.useMemo(()=>{if(!Ro)return null;const z=ge.find(B=>B.author===Ro&&(typeof B.authorUid=="string"||typeof B.uid=="string"));return z?z.authorUid??z.uid??null:null},[Ro,ge]),th=c.useMemo(()=>$r?[$r]:[],[$r]),nh=Rs(th),Ao=$r?nh[$r]??null:null,Hr=$v({viewedNickname:Ro,currentUserNickname:e}),Zs=kv({posts:ge,setPosts:tr,selectedPost:q,setSelectedPost:G,userNickname:e}),Sn=Ev({posts:ge,setPosts:tr,selectedPost:q,setSelectedPost:G,userNickname:e,clampedTrust:Co,updateActivity:Js,userProfileImage:t,onRequestLogin:v}),rh=c.useCallback(z=>{G(z)},[]),yl=c.useCallback(z=>z?As(z):"",[]),xl=c.useCallback(z=>z?z.toLocaleString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"",[]),ln=zv({posts:ge,onPostSelect:rh}),en=Uv({posts:ge,setPosts:tr,userNickname:e,userProfileImage:t,clampedTrust:Co,updateActivity:Js}),Wr=c.useCallback((z,B)=>{O(z.id,B),fe(B),G(z),en.incrementViews(z.id)},[en,O]),yt=c.useCallback(()=>{G(null),T()},[T]),xt=c.useCallback(()=>{G(null),N()},[N]),vt=c.useCallback(()=>{if(!ne.currentUser){v?.();return}G(null),A()},[A,v]),At=c.useCallback(()=>{if(!ne.currentUser){v?.();return}G(null),L()},[L,v]),oh=c.useCallback(()=>{G(null),E()},[E]),{isOnline:Qs,wasOffline:sh}=rf(),ah=c.useCallback(z=>ln.setShowNotifications(z),[ln]),ih=c.useCallback(()=>{ln.setShowNotifications(!1),p({name:"notificationSettings"})},[p,ln]),lh=c.useCallback(()=>{p({name:"category"})},[p]),ch=c.useCallback(()=>{p({name:"quiz"})},[p]),uh=c.useCallback(()=>{p({name:"titleShop"})},[p]),dh=c.useCallback(()=>{To&&p({name:"adminReports"})},[To,p]),fh=c.useCallback(async()=>{K(!0);try{Jt&&(await Jt(),H.success("  "))}catch{H.error("  ")}finally{K(!1)}},[Jt]);c.useEffect(()=>{f&&(p({name:"myPage"}),y?.())},[f,y,p]);const ea=c.useRef({route:w,showWriteScreen:M,selectedPost:q,showTitlesCollection:Nt,showTitleShop:Pn,showAchievements:gr,showMyPage:Zn,showSearchScreen:pr,showCategoryScreen:Qn,showNotificationSettings:Kt,showMyContentList:Jn,showFollowList:kn,showUserProfile:yr,userProfileSection:Dn,lastUserProfileNickname:_,currentScreen:g,postDetailSource:J}),we=c.useCallback((z,B)=>{B?C(z):R(z)},[C,R]);c.useEffect(()=>{ea.current={route:w,showWriteScreen:M,selectedPost:q,showTitlesCollection:Nt,showTitleShop:Pn,showAchievements:gr,showMyPage:Zn,showSearchScreen:pr,showCategoryScreen:Qn,showNotificationSettings:Kt,showMyContentList:Jn,showFollowList:kn,showUserProfile:yr,userProfileSection:Dn,lastUserProfileNickname:_,currentScreen:g,postDetailSource:J}}),c.useEffect(()=>we("write",M),[M,we]),c.useEffect(()=>we("questionCompose",w.name==="questionCompose"),[w.name,we]),c.useEffect(()=>we("postDetail",!!q),[q,we]),c.useEffect(()=>we("titlesCollection",Nt),[Nt,we]),c.useEffect(()=>we("titleShop",Pn),[Pn,we]),c.useEffect(()=>we("achievements",gr),[gr,we]),c.useEffect(()=>we("userProfile",!!yr),[yr,we]),c.useEffect(()=>we("myContentList",!!Jn),[Jn,we]),c.useEffect(()=>we("followList",!!kn),[kn,we]),c.useEffect(()=>we("myPage",Zn),[Zn,we]),c.useEffect(()=>we("category",Qn),[Qn,we]),c.useEffect(()=>we("notificationSettings",Kt),[Kt,we]),c.useEffect(()=>we("ranking",S.showRanking),[S.showRanking,we]),c.useEffect(()=>we("search",pr),[pr,we]),c.useEffect(()=>we("quiz",w.name==="quiz"),[w.name,we]),c.useEffect(()=>we("notes",w.name==="notes"),[w.name,we]),c.useEffect(()=>we("noteDetail",w.name==="noteDetail"),[w.name,we]);const Eo=c.useCallback(z=>{const B=z??ea.current;if(B.selectedPost){if(B.postDetailSource==="notes"){const Y=_e.current;G(null),Y?(p({name:"noteDetail",noteId:Y}),x("home")):(p({name:"notes"}),x("home")),_e.current=null,fe("home");return}if(B.postDetailSource==="myPostsList")G(null),p({name:"myContentList",mode:"posts"}),x("profile");else if(B.postDetailSource==="myRepliesList")G(null),p({name:"myContentList",mode:"replies"}),x("profile");else if(B.postDetailSource==="followList"){G(null);const Y=B.showFollowList||"followers";p({name:"followList",mode:Y}),x("profile")}else if(B.postDetailSource==="myPage")G(null),p({name:"myPage"}),x("profile");else if(B.postDetailSource==="userProfilePosts"){G(null);const Y=B.lastUserProfileNickname??B.showUserProfile;Y?(ze("posts"),p({name:"userProfile",nickname:Y})):(ze("profile"),p({name:"home"})),x("home")}else if(B.postDetailSource==="userProfileReplies"){G(null);const Y=B.lastUserProfileNickname??B.showUserProfile;Y?(ze("replies"),p({name:"userProfile",nickname:Y})):(ze("profile"),p({name:"home"})),x("home")}else B.postDetailSource==="category"?(G(null),p({name:"category"}),x("home")):B.postDetailSource==="search"?(G(null),p({name:"search"}),x("home")):(G(null),p({name:"home"}));fe("home")}},[x,fe,p,G,ze]),jo=c.useCallback(()=>{const z=k();if(!z)return!1;switch(z){case"write":I(!1),p({name:"home"}),x("home");break;case"noteDetail":p({name:"notes"}),x("home");break;case"notes":p({name:"home"}),x("home");break;case"questionCompose":p({name:"home"}),x("home");break;case"postDetail":Eo();break;case"titlesCollection":p({name:"myPage"});break;case"titleShop":p({name:"home"});break;case"achievements":p({name:"myPage"});break;case"userProfile":if(Q?.source==="followList"){const B=Q.mode==="followers"||Q.mode==="following"?Q.mode:"followers";p({name:"followList",mode:B}),x("profile")}else if(Q?.source==="myPage")p({name:"myPage"}),x("profile");else if(Q?.source==="myContentList"){const B=Q.mode==="posts"||Q.mode==="replies"?Q.mode:"posts";p({name:"myContentList",mode:B}),x("profile")}else Q?.source==="userProfile"?(p({name:"home"}),x("home")):(p({name:"home"}),x("home"));U(null);break;case"myContentList":p({name:"myPage"}),x("profile");break;case"followList":p({name:"myPage"}),x("profile");break;case"myPage":p({name:"home"}),x("home");break;case"category":p({name:"home"}),x("home");break;case"notificationSettings":p({name:"myPage"}),x("profile");break;case"ranking":T();break;case"quiz":p({name:"home"}),x("home");break;case"search":p({name:"home"}),x("home");break}return!0},[Eo,T,k,x,p,I,U,Q]),st=c.useCallback(()=>{jo()},[jo]);c.useEffect(()=>{kn==="followers"&&Rt.fetchFollowerUsers()},[kn,Rt]),c.useEffect(()=>{let z=null;return(async()=>{if(eo?.addListener)try{z=await eo.addListener("backButton",()=>{const Y=ea.current;if(!jo()){if(Y.route.name==="adminReports"){p({name:"home"}),x("home");return}if(Y.currentScreen==="home"&&!Y.selectedPost){i?.();return}p({name:"home"}),x("home")}})}catch{}})(),()=>{z?.remove()}},[jo,i,x,p]);const ta=c.useCallback(()=>{if(!ne.currentUser){v?.();return}en.handleStartWriting(()=>{I(!0),p({name:"home"})})},[en,p,I,v]),mh=c.useCallback(async z=>{const B=await en.createPost(z);B&&(I(!1),G(B),p({name:"postDetail",postId:B.id,source:"home"}))},[en,p,G,I]),hh=c.useCallback(async z=>{const B=ne.currentUser?.uid;if(!B){H.error("    .");return}try{const Y=`post:${z?.id??""}`,xe=zt(Ye(se,"notes"),Ht("uid","==",B),Ht("source","==",Y),po(1));if(!(await mt(xe)).empty){H.info("   .");return}await Kr(Ye(se,"notes"),{uid:B,title:(z?.title??"").toString().trim(),body:(z?.content??"").toString(),source:Y,createdAt:Pt(),updatedAt:Pt()}),H.success(" .")}catch{H.error("  .")}},[H]),vl=c.useCallback(z=>{!z||z===fs||(ze("profile"),P(z),U({source:"home"}),p({name:"userProfile",nickname:z}))},[P,p,ze]),ph=c.useCallback(z=>Sn.renderContentWithMentions(z??"",vl),[Sn,vl]),na=c.useMemo(()=>{const z=ge.filter(xe=>xe.author===e),B=ge.flatMap(xe=>(xe.replies??[]).filter(Je=>Je.author===e).map(Je=>({...Je,postTitle:xe.title,postAuthor:xe.author,postId:xe.id}))),Y=ge.filter(xe=>Qt.isBookmarked(xe.id)).filter(xe=>xe.hidden!==!0);return{userPostsForMyPage:z,userRepliesForMyPage:B,userBookmarkedPosts:Y}},[ge,e,Qt]),gh=c.useMemo(()=>{if(!Tt)return{profileTarget:null,profilePosts:[],profileFirstAvatar:"",followerCountForProfile:0,followingCountForProfile:0,followerUsersForProfile:Go,followingUsersForProfile:Go};const z=Tt,B=ge.filter(at=>at.author===z),Y=B[0]?.authorAvatar??"",xe=z===e,Je=xe?Rt.followerCount:Hr?.followerCount??0,bt=xe?Rt.followingCount:Hr?.followingCount??0,wt=xe?Rt.followerUsers:Hr?.followerUsers??Go,Ve=xe?Rt.followingUsers:Hr?.followingUsers??Go;return{profileTarget:z,profilePosts:B,profileFirstAvatar:Y,followerCountForProfile:Je,followingCountForProfile:bt,followerUsersForProfile:wt,followingUsersForProfile:Ve}},[Tt,ge,e,Rt,Hr]),bl=c.useMemo(()=>{const z=gt.filter(Y=>Y.author===e),B=gt.flatMap(Y=>(Y.replies??[]).filter(xe=>xe.author===e).map(xe=>({...xe,authorAvatar:xe.authorAvatar??void 0,postTitle:Y.title,postAuthor:Y.author,postId:Y.id,postAuthorUid:typeof Y.authorUid=="string"?Y.authorUid:typeof Y.uid=="string"?Y.uid:null})));return{myPosts:z,myReplies:B}},[gt,e]),[vr,Vr]=c.useState(new Set(["home"])),Io=c.useRef({});c.useEffect(()=>{Vr(z=>{let B="";if(S.showMyPage?B="myPage":S.showRanking?B="ranking":S.showBookmarks?B="bookmarks":S.showTitleShop?B="titleShop":S.showTitlesCollection?B="titlesCollection":S.showAchievements?B="achievements":w.name==="quiz"?B="quiz":S.showFollowList?B="followList":S.showMyContentList?B="myContentList":S.showCategoryScreen?B="category":S.showSearchScreen?B="search":S.showUserProfile?B="userProfile":S.showNotificationSettings?B="notificationSettings":w.name==="adminReports"?B="adminReports":B="home",z.has(B))return z;const Y=new Set(z);return Y.add(B),Y})},[S,w.name]),qo("myPage",Xe,Vr,Io),qo("ranking",Kn,Vr,Io),qo("bookmarks",Xt,Vr,Io),qo("search",wn,Vr,Io);const yh=w.name==="postDetail"&&!!q&&String(w.postId)===String(q.id);return Xn?a.jsx(c.Suspense,{fallback:a.jsx(it,{}),children:a.jsx(C1,{onBack:st,onGoWrite:z=>{p({name:"home"}),x("home"),j({...z,postType:"question"}),I(!0),C("write")}})}):So?a.jsx(c.Suspense,{fallback:a.jsx(it,{}),children:a.jsxs("div",{className:"w-full h-full flex flex-col",children:[a.jsx(k1,{onBack:st,onOpenNote:z=>{p({name:"noteDetail",noteId:z}),x("home")}}),a.jsx(jt,{onHomeClick:yt,onRankingClick:xt,onBookmarksClick:vt,onMyPageClick:At,onWriteClick:()=>X(!0),activeTab:g})]})}):w.name==="noteDetail"?a.jsx(c.Suspense,{fallback:a.jsx(it,{}),children:a.jsx(S1,{noteId:w.noteId,onBack:()=>{p({name:"notes"}),x("home")},onGoWrite:z=>{j({...z,postType:"guide"}),p({name:"home"}),x("home"),I(!0)},onOpenSourcePost:z=>{_e.current=w.noteId;const B=ge.find(Y=>String(Y.id)===String(z));if(!B){H.error("    .");return}Wr(B,"notes")}})}):We?a.jsx(c.Suspense,{fallback:a.jsx(it,{}),children:a.jsx(w1,{onBack:st,onSubmit:mh,categories:He})}):a.jsxs("div",{className:`w-full h-full relative ${o?"dark":""}`,children:[a.jsxs("div",{className:`w-full h-full bg-background text-foreground flex flex-col absolute inset-0 ${g==="home"&&!pt&&!wn&&!qt&&!Tt&&!w.name.includes("admin")?"z-10 opacity-100":"z-0 opacity-0 pointer-events-none hidden"}`,children:[a.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col",children:[(!Qs||sh)&&a.jsx("div",{className:`px-3 py-2 text-xs ${Qs?"bg-emerald-500/80 text-white":"bg-red-500/80 text-white"}`,children:Qs?" .":" . /   ."}),yh&&q?a.jsx(fS,{post:q,userNickname:e,userProfileImage:t,currentTitle:dt.currentTitle,isDarkMode:o,isPostLanterned:an.isPostLanterned(q.id),isReplyLanterned:an.isReplyLanterned,onLanternToggle:()=>an.handleLanternToggle(q.id),onReplyLanternToggle:an.handleReplyLanternToggle,isBookmarked:Qt.isBookmarked(q.id),onBookmarkToggle:()=>Qt.handleBookmarkToggle(q.id),isGuideReply:Zs.isGuideReply,hasGuide:Zs.hasGuide(q.id),onGuideSelect:Zs.handleGuideSelect,newReplyContent:Sn.newReplyContent,onReplyContentChange:Sn.handleReplyContentChange,onReplySubmit:Sn.handleReplySubmit,replyInputRef:Sn.replyInputRef,onClose:()=>Eo(),onAuthorClick:()=>{ze("profile"),P(q.author),U(J==="followList"?{source:"followList"}:J==="myPage"||J==="myPostsList"||J==="myRepliesList"?{source:"myPage"}:J==="userProfilePosts"||J==="userProfileReplies"?{source:"userProfile"}:{source:"home"}),p({name:"userProfile",nickname:q.author})},onMentionAuthor:()=>Sn.handleInsertMention(q.author),onMentionReplyAuthor:Sn.handleInsertMention,onReplyAuthorClick:z=>{ze("profile"),P(z),U(J==="followList"?{source:"followList"}:J==="myPage"||J==="myPostsList"||J==="myRepliesList"?{source:"myPage"}:J==="userProfilePosts"||J==="userProfileReplies"?{source:"userProfile"}:{source:"home"}),p({name:"userProfile",nickname:z})},onReport:()=>Ge(q),onDelete:()=>{en.deletePost(q.id),Eo()},onSaveNote:()=>hh(q),hideSaveNote:J==="notes",onReportReply:z=>Ln(z),renderContentWithMentions:ph,canSubmitReply:Sn.canSubmitReply,blockedUserIds:xr}):a.jsxs(a.Fragment,{children:[a.jsx(t1,{isDarkMode:o,onToggleDarkMode:s,hasNotifications:ln.notifications.some(z=>!z.isRead),showNotifications:ln.showNotifications,onNotificationsToggle:ah,notifications:ln.notifications,onNotificationClick:ln.handleNotificationClick,onMarkAllNotificationsRead:ln.handleMarkAllNotificationsRead,onNotificationSettingsClick:ih,onNotificationDelete:ln.removeNotification,activeCategory:Ce,activeSubCategory:Re,onCategoryClick:lh,onQuizClick:ch,onTitleShopClick:uh,isAdmin:To,onOpenAdminReports:dh}),a.jsx(XC,{posts:gt,userNickname:e,userProfileImage:t,activeCategory:Ce,activeSubCategory:Re,sortBy:$e,categories:He,onSubCategoryChange:je,onSortChange:Le,isPostLanterned:an.isPostLanterned,isBookmarked:Qt.isBookmarked,onPostClick:z=>Wr(z,"home"),onLanternToggle:an.handleLanternToggle,onBookmarkToggle:Qt.handleBookmarkToggle,onStartWriting:ta,currentTitle:dt.currentTitle,blockedUserIds:xr,onRefresh:fh,isRefreshing:W})]})]}),a.jsx(jt,{onHomeClick:yt,onRankingClick:xt,onBookmarksClick:vt,onMyPageClick:At,onWriteClick:()=>X(!0),activeTab:g})]}),vr.has("myPage")&&a.jsx("div",{className:`absolute inset-0 bg-background ${Xe?"z-20 block":"z-0 hidden"}`,children:a.jsx(c.Suspense,{fallback:a.jsx(it,{}),children:a.jsxs("div",{className:"w-full h-full flex flex-col",children:[a.jsx(f1,{userNickname:e,userProfileImage:t,onProfileImageChange:n,onBack:st,onLogout:r,isDarkMode:o,onToggleDarkMode:s,onShowTerms:l,onShowPrivacy:u,onShowOpenSourceLicenses:d,onShowAttributions:m,userPosts:na.userPostsForMyPage,userReplies:na.userRepliesForMyPage,bookmarkedPosts:na.userBookmarkedPosts,currentTitle:dt.currentTitle,onManageBlockedUsers:()=>he(!0),userGuideCount:Zt.userGuideCount,trustScore:Co,profileDescription:gl,onProfileDescriptionChange:No,onHomeClick:yt,onRankingClick:xt,onBookmarksClick:vt,onWriteClick:ta,onTitleShopClick:()=>{p({name:"titleShop"})},onAchievementsClick:oh,onTitlesCollectionClick:()=>{p({name:"titlesCollection"})},followerCount:Rt.followerCount,followingCount:Rt.followingCount,onFollowerCardClick:()=>{p({name:"followList",mode:"followers"})},onFollowingCardClick:()=>{p({name:"followList",mode:"following"})},onMyPostsCardClick:()=>{p({name:"myContentList",mode:"posts"})},onMyRepliesCardClick:()=>{p({name:"myContentList",mode:"replies"})},onPostClick:z=>{const B=ge.find(Y=>Y.id===z);B&&Wr(B,"myPage")},onReplyClick:z=>{const B=ge.find(Y=>Y.id===z);B&&(fe("myRepliesList"),G(B),p({name:"postDetail",postId:B.id,source:"myRepliesList"}))},autoOpenSettings:h,onAutoSettingsOpened:b}),a.jsx(jt,{onHomeClick:yt,onRankingClick:xt,onBookmarksClick:vt,onMyPageClick:At,onWriteClick:()=>X(!0),activeTab:g})]})})}),vr.has("ranking")&&a.jsx("div",{className:`absolute inset-0 bg-background transition-all duration-200 ease-out ${Kn?"z-20 opacity-100 translate-y-0":"z-0 opacity-0 translate-y-2 pointer-events-none"}`,children:a.jsx(c.Suspense,{fallback:a.jsx(it,{}),children:a.jsxs("div",{className:"w-full h-full flex flex-col",children:[a.jsx(x1,{onBack:st,weeklyGuideRanking:Zt.weeklyGuideRanking,totalGuideRanking:Zt.totalGuideRanking,weeklyLanternRanking:Zt.weeklyLanternRanking}),a.jsx(jt,{onHomeClick:yt,onRankingClick:xt,onBookmarksClick:vt,onMyPageClick:At,onWriteClick:()=>X(!0),activeTab:g})]})})}),vr.has("bookmarks")&&a.jsx("div",{className:`absolute inset-0 bg-background transition-all duration-200 ease-out ${Xt?"z-20 opacity-100 translate-y-0":"z-0 opacity-0 translate-y-2 pointer-events-none"}`,children:a.jsx(c.Suspense,{fallback:a.jsx(it,{}),children:a.jsxs("div",{className:"w-full h-full flex flex-col",children:[a.jsx(v1,{onBack:st,bookmarkedPosts:Qt.bookmarkedPosts,posts:gt,onPostSelect:z=>{const B=String(z?.id??""),Y=gt.find(xe=>String(xe.id)===B);Y&&(fe("category"),G(Y),p({name:"postDetail",postId:String(Y.id),source:"category"}))},userNickname:e,currentTitle:dt.currentTitle}),a.jsx(jt,{onHomeClick:yt,onRankingClick:xt,onBookmarksClick:vt,onMyPageClick:At,onWriteClick:()=>X(!0),activeTab:g})]})})}),vr.has("quiz")&&a.jsx("div",{className:`absolute inset-0 bg-background transition-all duration-200 ease-out ${sn?"z-20 opacity-100 translate-y-0":"z-0 opacity-0 translate-y-2 pointer-events-none"}`,children:a.jsxs("div",{className:"w-full h-full flex flex-col",children:[a.jsx(a1,{onBack:st}),a.jsx(jt,{onHomeClick:yt,onRankingClick:xt,onBookmarksClick:vt,onMyPageClick:At,onWriteClick:()=>X(!0),activeTab:g})]})}),vr.has("category")&&a.jsx("div",{className:`absolute inset-0 bg-background transition-all duration-200 ease-out ${pt?"z-30 opacity-100 translate-y-0":"z-0 opacity-0 translate-y-2 pointer-events-none"}`,children:a.jsx(c.Suspense,{fallback:a.jsx(it,{}),children:a.jsx(m1,{onBack:st,categories:He,activeCategory:Ce,activeSubCategory:Re,onCategorySelect:(z,B)=>{Ee(z),je(B||"")},posts:gt,onPostSelect:z=>{Wr(z,"home"),p({name:"postDetail",postId:z.id,source:"home"})},userNickname:e,userProfileImage:t,currentTitle:dt.currentTitle,isPostLanterned:an.isPostLanterned,isBookmarked:Qt.isBookmarked,onLanternToggle:an.handleLanternToggle,onBookmarkToggle:Qt.handleBookmarkToggle,formatTimeAgo:yl,formatCreatedAt:xl})})}),vr.has("search")&&a.jsx("div",{className:`absolute inset-0 bg-background transition-all duration-200 ease-out ${wn?"z-30 opacity-100 translate-y-0":"z-0 opacity-0 translate-y-2 pointer-events-none"}`,children:a.jsx(c.Suspense,{fallback:a.jsx(it,{}),children:a.jsx(b1,{onBack:st,posts:gt,onPostSelect:z=>{Wr(z,"search")},userNickname:e,userProfileImage:t,currentTitle:dt.currentTitle,isPostLanterned:an.isPostLanterned,isBookmarked:Qt.isBookmarked,onLanternToggle:an.handleLanternToggle,onBookmarkToggle:Qt.handleBookmarkToggle,formatTimeAgo:yl,formatCreatedAt:xl})})}),qt&&a.jsx("div",{className:"absolute inset-0 z-30 bg-background",children:a.jsx(c.Suspense,{fallback:a.jsx(it,{}),children:a.jsxs("div",{className:"w-full h-full flex flex-col",children:[a.jsx("div",{className:"flex-1 min-h-0 overflow-hidden",children:a.jsx(T1,{onBack:st,userLumens:hl,userPostLanterns:Zt.userPostLanterns,userReplyLanterns:Zt.userReplyLanterns,userGuideCount:Zt.userGuideCount,ownedTitles:dt.ownedTitles,currentTitle:dt.currentTitle,onTitlePurchase:dt.handleTitlePurchase,onTitleEquip:dt.handleTitleEquip})}),a.jsx(jt,{onHomeClick:yt,onRankingClick:xt,onBookmarksClick:vt,onMyPageClick:At,onWriteClick:()=>X(!0),activeTab:g})]})})}),Tt&&a.jsx("div",{className:"absolute inset-0 z-30 bg-background",children:(()=>{const{profileTarget:z,profilePosts:B,profileFirstAvatar:Y,followerCountForProfile:xe,followingCountForProfile:Je,followerUsersForProfile:bt,followingUsersForProfile:wt}=gh,Ve=z===e,at=Ao?.nickname,xh=Ao?.isDeleted===!0||at===" "?" ":at??z??"";return a.jsx(c.Suspense,{fallback:a.jsx(it,{}),children:a.jsxs("div",{className:"w-full h-full flex flex-col",children:[a.jsx(E1,{onBack:st,username:xh,userAvatar:Ve?t:Ao?.profileImage??Y??"",userBio:Ve?gl:Ao?.profileDescription??"",posts:B,trustScore:Ve?Co:void 0,reportCount:0,achievementCount:0,titleCount:0,guideCount:0,followerCount:xe,followingCount:Je,followerUsers:bt,followingUsers:wt,onPostClick:br=>{const nr=ge.find(ra=>ra.id===br);nr&&(fe("userProfilePosts"),P(z),G(nr),p({name:"postDetail",postId:nr.id,source:"userProfilePosts"}))},onReplyClick:br=>{const nr=ge.find(ra=>ra.id===br);nr&&(fe("userProfileReplies"),P(z),G(nr),p({name:"postDetail",postId:nr.id,source:"userProfileReplies"}))},isMyself:Ve,isFollowing:Rt.isFollowing(z??""),onToggleFollowUser:Rt.handleToggleFollowUser,onFollowUserClick:br=>{ze("profile"),P(br),U({source:"userProfile"}),p({name:"userProfile",nickname:br})},activeSection:Dn,onChangeSection:ze}),a.jsx(jt,{onHomeClick:yt,onRankingClick:xt,onBookmarksClick:vt,onMyPageClick:At,onWriteClick:()=>X(!0),activeTab:g})]})})})()}),Yt&&a.jsx("div",{className:"absolute inset-0 z-30 bg-background",children:a.jsx(c.Suspense,{fallback:a.jsx(it,{}),children:a.jsxs("div",{className:"w-full h-full flex flex-col",children:[a.jsx("div",{className:"flex-1 overflow-y-auto",children:a.jsx(N1,{onBack:st,userTitles:dt.ownedTitles,equippedTitle:dt.currentTitle,onTitleEquip:dt.handleTitleEquip,onTitleUnequip:dt.handleTitleUnequip})}),a.jsx(jt,{onHomeClick:yt,onRankingClick:xt,onBookmarksClick:vt,onMyPageClick:At,onWriteClick:()=>X(!0),activeTab:g})]})})}),er&&a.jsx("div",{className:"absolute inset-0 z-30 bg-background",children:a.jsx(c.Suspense,{fallback:a.jsx(it,{}),children:a.jsxs("div",{className:"w-full h-full flex flex-col",children:[a.jsx(A1,{mode:er,users:er==="followers"?Rt.followerUsersDetailed:Rt.followingUsersDetailed,onBack:st,onUserClick:z=>{if(!z||z===fs)return;ze("profile"),P(z),U({source:"followList",mode:er}),p({name:"userProfile",nickname:z})}}),a.jsx(jt,{onHomeClick:yt,onRankingClick:xt,onBookmarksClick:vt,onMyPageClick:At,onWriteClick:()=>X(!0),activeTab:g})]})})}),ce&&a.jsx("div",{className:"absolute inset-0 z-30 bg-background",children:a.jsx(c.Suspense,{fallback:a.jsx(it,{}),children:a.jsxs("div",{className:"w-full h-full flex flex-col",children:[a.jsx(y1,{mode:ce,onBack:st,posts:bl.myPosts,replies:bl.myReplies,onPostClick:z=>{const B=gt.find(Y=>Y.id===z);if(B){const Y=ce==="posts"?"myPostsList":"myRepliesList";fe(Y),G(B),p({name:"postDetail",postId:B.id,source:Y})}},onReplyClick:(z,B)=>{const Y=gt.find(xe=>xe.id===z);Y&&(fe("myRepliesList"),G(Y),p({name:"postDetail",postId:Y.id,source:"myRepliesList"}))}}),a.jsx(jt,{onHomeClick:yt,onRankingClick:xt,onBookmarksClick:vt,onMyPageClick:At,onWriteClick:()=>X(!0),activeTab:g})]})})}),_n&&a.jsx("div",{className:"absolute inset-0 z-30 bg-background transition-all duration-200 ease-out opacity-100 translate-y-0",children:a.jsx(c.Suspense,{fallback:a.jsx(it,{}),children:a.jsxs("div",{className:"w-full h-full flex flex-col",children:[a.jsx(R1,{onBack:st,userNickname:e,isDarkMode:o}),a.jsx(jt,{onHomeClick:yt,onRankingClick:xt,onBookmarksClick:vt,onMyPageClick:At,onWriteClick:()=>X(!0),activeTab:g})]})})}),w.name==="adminReports"&&To&&a.jsx("div",{className:"absolute inset-0 z-40 bg-background",children:a.jsx(c.Suspense,{fallback:a.jsx(it,{}),children:a.jsxs("div",{className:"w-full h-full flex flex-col",children:[a.jsx(I1,{onBack:()=>{p({name:"home"}),x("home")}}),a.jsx(jt,{onHomeClick:yt,onRankingClick:xt,onBookmarksClick:vt,onMyPageClick:At,onWriteClick:()=>X(!0),activeTab:g})]})})}),Kt&&a.jsx("div",{className:"fixed inset-0 z-50 bg-background",children:a.jsx(c.Suspense,{fallback:null,children:a.jsx(j1,{onBack:st,categories:He})})}),De&&a.jsx(c.Suspense,{fallback:null,children:a.jsx(uu,{open:!!De,onOpenChange:z=>!z&&Ge(null),targetType:"",onSubmit:async(z,B)=>{if(De)try{const Y=ne.currentUser?.uid??null;await Kr(Ye(se,"reports"),{targetType:"post",targetId:De.id,targetAuthorUid:De.authorUid??De.uid??null,reporterUid:Y,reasons:z,details:B,createdAt:Pt(),status:"pending",autoHidden:!1,priority:"normal"}),H.success(" .   .")}catch{H.error("    .    .")}finally{Ge(null)}}})}),Ke&&a.jsx(c.Suspense,{fallback:null,children:a.jsx(uu,{open:!!Ke,onOpenChange:z=>!z&&Ln(null),targetType:"",onSubmit:async(z,B)=>{if(Ke)try{const Y=ne.currentUser?.uid??null;await Kr(Ye(se,"reports"),{targetType:"reply",targetId:String(Ke.id),targetAuthorUid:Ke.authorUid??null,reporterUid:Y,reasons:z,details:B,createdAt:Pt(),status:"pending",autoHidden:!1,priority:"normal",postId:q?.id??null}),H.success(" .   .")}catch{H.error("    .    .")}finally{Ln(null)}}})}),a.jsx(dv,{open:le,onOpenChange:he,blockedUserIds:xr,onUnblocked:()=>{}}),a.jsx(vv,{open:F,onClose:()=>X(!1),onSelectStructured:()=>{X(!1),p({name:"questionCompose"})},onSelectWrite:()=>{X(!1),ta()},onSelectNotes:()=>{X(!1),p({name:"notes"}),x("home")}}),a.jsx(Km,{open:en.showPostWarning,onOpenChange:en.setShowPostWarning,title:"  ",description:"  30    ",confirmText:"",onConfirm:()=>{en.handleWarningConfirm(()=>{I(!0)})},checkbox:en.checkboxConfig})]})}const nT=Object.freeze(Object.defineProperty({__proto__:null,MainScreenRefactored:Zm},Symbol.toStringTag,{value:"Module"})),L1=({isDarkMode:e=!1,...t})=>a.jsx(Bg,{theme:e?"dark":"light",className:"toaster group",closeButton:!1,richColors:!0,position:"top-center",duration:2e3,...t});async function D1(e,t=512,n=.82){if(typeof window>"u"||typeof document>"u"||!e.type.startsWith("image/"))return e;const r=URL.createObjectURL(e),o=await new Promise((w,p)=>{const g=new Image;g.onload=()=>w(g),g.onerror=p,g.src=r});URL.revokeObjectURL(r);const{width:s,height:i}=o;let l=Math.min(1,t/Math.max(s,i));if(l>=1&&e.size<1024*1024)return e;const u=Math.round(s*l),d=Math.round(i*l),m=document.createElement("canvas");m.width=u,m.height=d;const f=m.getContext("2d");if(!f)return e;f.imageSmoothingEnabled=!0,f.imageSmoothingQuality="high",f.drawImage(o,0,0,u,d);const h="image/webp";let y=h;m.toDataURL(h).startsWith(`data:${h}`)||(y="image/jpeg");const v=await new Promise(w=>{m.toBlob(p=>w(p),y,n)});return v?new File([v],e.name,{type:y,lastModified:Date.now()}):e}async function M1(e){const t=ne.currentUser;if(!t)throw new Error("  .");const n=t.uid;try{const r=await D1(e),o=vh(bh,`profileImages/${n}`);await wh(o,r);const s=await kh(o);return await Promise.all([Ia(t,{photoURL:s}),hn(ke(se,"users",n),{photoURL:s,updatedAt:Pt()},{merge:!0})]),s}catch(r){throw r}}const O1=c.lazy(()=>Ne(()=>import("./CommunityGuidelinesScreen-DTRDLm7S.js"),__vite__mapDeps([7,1,2,3,4,5]),import.meta.url).then(e=>({default:e.CommunityGuidelinesScreen}))),z1=c.lazy(()=>Ne(()=>import("./WelcomeScreen-CXUExfNa.js"),__vite__mapDeps([0,1,2,3,4,5,6]),import.meta.url).then(e=>({default:e.WelcomeScreen}))),U1=c.lazy(()=>Ne(()=>import("./PrivacyPolicyScreen-DAe-T_Dr.js"),__vite__mapDeps([43,2,1,3,4,5,12]),import.meta.url).then(e=>({default:e.PrivacyPolicyScreen}))),B1=c.lazy(()=>Ne(()=>import("./TermsOfServiceScreen-B4T6gwYb.js"),__vite__mapDeps([44,2,1,3,4,5,17]),import.meta.url).then(e=>({default:e.TermsOfServiceScreen}))),F1=c.lazy(()=>Ne(()=>import("./OpenSourceLicensesScreen-DryJ_Ox8.js"),__vite__mapDeps([45,2,1,3,4,5,17]),import.meta.url).then(e=>({default:e.OpenSourceLicensesScreen}))),$1=c.lazy(()=>Ne(()=>import("./AttributionsScreen-mKGQLZ91.js"),__vite__mapDeps([46,2,1,3,4,5]),import.meta.url).then(e=>({default:e.AttributionsScreen}))),fu=c.lazy(()=>Ne(()=>Promise.resolve().then(()=>c1),void 0,import.meta.url).then(e=>({default:e.AlertDialogSimple}))),H1=c.lazy(()=>Ne(()=>import("./offline-indicator-C_WISlkw.js"),__vite__mapDeps([23,2,1,3,4,5,13]),import.meta.url).then(e=>({default:e.OfflineIndicator})));function W1(){const{isLoading:e,initialScreen:t,authStateVersion:n,userData:r,globalError:o,resetAuthState:s,refreshAfterEmailVerified:i}=Hg(),[l,u]=c.useState("login"),[d,m]=c.useState(r.nickname),[f,h]=c.useState(r.profileImage),[,y]=c.useState({nickname:r.nickname,email:r.email,profileImage:r.profileImage}),[b,v]=c.useState(()=>{const F=localStorage.getItem("darkMode");return F!==null?F==="true":window.matchMedia?.("(prefers-color-scheme: dark)").matches??!0}),w=c.useRef(!1),[p,g]=c.useState(!1);c.useEffect(()=>{sg(),fg()},[]),c.useEffect(()=>{e||(u(t),g(!1))},[t,e,n]),c.useEffect(()=>{if(l!=="main")return;const F=ne.currentUser;F&&!F.emailVerified&&u("verifyEmail")},[l]),c.useEffect(()=>{if(e)return;Vu(l);const F=ne.currentUser;F&&Il(F.uid)},[l,e]),c.useEffect(()=>{!e&&r.nickname&&(m(r.nickname),h(r.profileImage),y({nickname:r.nickname,email:r.email,profileImage:r.profileImage}))},[r,e]),c.useEffect(()=>{o&&H.error(o)},[o]),c.useEffect(()=>{document.documentElement.classList.toggle("dark",b)},[b]);const x=c.useCallback(()=>{v(F=>{const X=!F;return localStorage.setItem("darkMode",X.toString()),document.documentElement.classList.toggle("dark",X),X})},[]),S=c.useCallback(async()=>{w.current=!1,dg(),Il(null),await s()},[s]),C=c.useCallback(async F=>{m(F),y(X=>({...X,nickname:F})),_l("nickname"),u("guidelines")},[]),R=c.useCallback(async()=>{try{const F=ne.currentUser;F&&await hn(ke(se,"users",F.uid),{communityGuidelinesAgreed:!0,updatedAt:Pt()},{merge:!0})}catch{}_l("guidelines"),u("welcome")},[]),k=c.useCallback(F=>{const X=new FileReader;X.onload=J=>{const fe=J.target?.result;fe&&h(fe)},X.readAsDataURL(F),M1(F).then(J=>h(J)).catch(()=>{H.error("  .")})},[]),[T,N]=c.useState("login"),[A,L]=c.useState(!1),[O,E]=c.useState(!1),[j,M]=c.useState(!1),[I,_]=c.useState(!1),P=c.useRef(l);c.useEffect(()=>{P.current=l},[l]);const W=c.useRef([]),K=c.useRef(!1),q=c.useRef("login");c.useEffect(()=>{if(K.current){K.current=!1,q.current=l;return}const F=q.current;F!==l&&W.current.push(F),q.current=l},[l]),rf(),c.useEffect(()=>{if(l==="main")return;let F;async function X(){F=await eo.addListener("backButton",()=>{const J=P.current,Q=W.current.pop();if(Q){K.current=!0,u(Q);return}if(J==="login"||J==="welcome")M(!0);else{if(J==="verifyEmail")return;if(J==="privacy"||J==="terms")u(T);else if(J==="openSourceLicenses"||J==="attributions")u("main");else if(J==="nickname")S();else if(J==="guidelines")return}})}return X(),()=>{F?.remove()}},[l,T,S]);const G=()=>a.jsx("div",{className:"w-full h-screen flex items-center justify-center",children:a.jsx("div",{className:"w-8 h-8 border-2 border-primary/30 border-t-primary rounded-full animate-spin"})});return a.jsxs("div",{className:`w-full h-screen ${b?"dark bg-background text-foreground":"bg-white text-gray-900"}`,children:[(e||l==="login")&&a.jsx(xx,{onShowTerms:()=>{N("login"),u("terms")},onShowPrivacy:()=>{N("login"),u("privacy")},onShowEmailLogin:()=>u("emailLogin"),isDarkMode:b,onToggleDarkMode:x,onLoginStart:()=>g(!0),onLoginEnd:()=>g(!1)}),p&&a.jsx("div",{className:"absolute inset-0 z-50 bg-background/80 backdrop-blur-sm flex items-center justify-center",children:a.jsxs("div",{className:"flex flex-col items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 border-3 border-primary/30 border-t-primary rounded-full animate-spin"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:" ..."})]})}),!e&&l!=="login"&&a.jsxs(a.Fragment,{children:[l==="emailLogin"&&a.jsx(kx,{onBack:()=>u("login"),onShowSignup:()=>u("emailSignup")}),l==="emailSignup"&&a.jsx(Sx,{onBack:()=>u("emailLogin")}),l==="verifyEmail"&&a.jsx(Ud,{onLogout:S,onVerified:()=>void i()}),l==="nickname"&&a.jsx(zd,{onBack:S,onComplete:C,userEmail:r.email,isDarkMode:b,onToggleDarkMode:x}),l==="guidelines"&&a.jsx(c.Suspense,{fallback:a.jsx(G,{}),children:a.jsx(O1,{onBack:()=>u("nickname"),onContinue:R,hideBackButton:!0,disableBack:!0,isDarkMode:b,onToggleDarkMode:x})}),l==="welcome"&&a.jsx(c.Suspense,{fallback:a.jsx(G,{}),children:a.jsx(z1,{nickname:d,onRestart:S,onStartApp:async()=>{try{const F=ne.currentUser;F&&await hn(ke(se,"users",F.uid),{onboardingComplete:!0,updatedAt:Pt()},{merge:!0})}catch{}u("main")},isDarkMode:b,onToggleDarkMode:x})}),l==="main"&&a.jsx(Zm,{userNickname:d,userProfileImage:f,onProfileImageChange:k,onLogout:S,isDarkMode:b,onToggleDarkMode:x,onRequestExit:()=>M(!0),onShowTerms:()=>{N("main"),L(!0),E(!0),u("terms")},onShowPrivacy:()=>{N("main"),L(!0),E(!0),u("privacy")},onShowOpenSourceLicenses:()=>{L(!0),E(!0),u("openSourceLicenses")},onShowAttributions:()=>{L(!0),E(!0),u("attributions")},shouldOpenMyPageOnMain:A,shouldOpenSettingsOnMyPage:O,onMainScreenReady:()=>L(!1),onSettingsOpenedFromMain:()=>E(!1),onRequestLogin:()=>_(!0)}),l==="privacy"&&a.jsx(c.Suspense,{fallback:a.jsx(G,{}),children:a.jsx(U1,{onBack:()=>u(T)})}),l==="terms"&&a.jsx(c.Suspense,{fallback:a.jsx(G,{}),children:a.jsx(B1,{onBack:()=>u(T)})}),l==="openSourceLicenses"&&a.jsx(c.Suspense,{fallback:a.jsx(G,{}),children:a.jsx(F1,{onBack:()=>u("main")})}),l==="attributions"&&a.jsx(c.Suspense,{fallback:a.jsx(G,{}),children:a.jsx($1,{onBack:()=>u("main")})}),l==="main"&&a.jsx(c.Suspense,{fallback:null,children:a.jsx(H1,{position:"top",variant:"toast",showReconnectButton:!0})})]}),a.jsx(L1,{isDarkMode:b}),a.jsx(c.Suspense,{fallback:null,children:a.jsx(fu,{open:j,onOpenChange:M,title:" ",description:" ?",onConfirm:()=>eo.exitApp()})}),a.jsx(c.Suspense,{fallback:null,children:a.jsx(fu,{open:I,onOpenChange:_,title:" ",description:"    .   ?",confirmText:"",cancelText:"",onConfirm:()=>u("login")})})]})}const rT=Object.freeze(Object.defineProperty({__proto__:null,default:W1},Symbol.toStringTag,{value:"Module"}));export{Fe as $,Ii as A,oe as B,et as C,tl as D,FC as E,zy as F,Kg as G,nt as H,ir as I,ar as J,Cd as K,vi as L,wi as M,Ry as N,zi as O,ZC as P,of as Q,Km as R,ki as S,Da as T,Ky as U,ss as V,ot as W,as as X,Ri as Y,go as Z,rt as _,J1 as a,Z0 as a0,pd as a1,Xu as a2,ny as a3,Si as a4,d1 as a5,rf as a6,cs as a7,My as a8,Ul as a9,Q1 as aA,Po as aB,Z1 as aC,Gy as aD,tT as aE,nT as aF,rT as aG,Ku as aa,md as ab,Ol as ac,gv as ad,hv as ae,eT as af,Ts as ag,lf as ah,qx as ai,St as aj,yn as ak,$C as al,CC as am,Ms as an,jf as ao,Yi as ap,Xi as aq,pk as ar,cx as as,Zw as at,Qf as au,Wf as av,Ui as aw,If as ax,_f as ay,fs as az,tt as b,_i as c,Pi as d,La as e,gi as f,Ni as g,hd as h,ve as i,Rs as j,An as k,HC as l,el as m,yi as n,Ka as o,dr as p,bi as q,lu as r,H as s,_l as t,fm as u,Hs as v,xi as w,oy as x,Zg as y,By as z};
