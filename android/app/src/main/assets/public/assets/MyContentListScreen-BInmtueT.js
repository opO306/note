import{r as c,j as s}from"./index-BJjkZhAE.js";import{j as k,o as U,D as h,C as u,b as f,O as j,k as N,n as I,v as g,q as p}from"./App-Cnx-z95_.js";import{A as P}from"./AppHeader-DUFlu2QS.js";import{F as v}from"./file-text-BzSwTf16.js";import"./vendor-capacitor-Bm7NWSxP.js";import"./vendor-react-1wgkHQEd.js";import"./vendor-firebase-B8qz7irO.js";function O({mode:b,posts:l=[],replies:i=[],onBack:y,onPostClick:n,onReplyClick:d}){const m=b==="posts",A=[...new Set([...l.map(e=>e.authorUid).filter(e=>typeof e=="string"&&e.length>0),...i.map(e=>e.authorUid).filter(e=>typeof e=="string"&&e.length>0)])],x=k(A),w=m?"내가 작성한 글":"내가 남긴 답글",C=c.useCallback(e=>()=>{n?.(e)},[n]),T=c.useCallback((e,t)=>()=>{const a=typeof t=="number"?t:Number(t);Number.isNaN(a)||d?.(e,a)},[d]);return s.jsxs("div",{className:"flex-1 flex flex-col scrollbar-hide",children:[s.jsx(P,{title:w,onBack:y,icon:s.jsx(v,{className:"w-4 h-4"})}),s.jsx("main",{className:"flex-1 scroll-container px-4 py-3 pb-24",children:m?l.length===0?s.jsx("div",{className:"h-full flex items-center justify-center",children:s.jsxs("div",{className:"flex flex-col items-center text-center",children:[s.jsx(v,{className:"w-10 h-10 mb-3 text-muted-foreground/60"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"아직 작성한 글이 없습니다."})]})}):s.jsx("div",{className:"space-y-3",children:l.map(e=>{const t=e.authorUid?x[e.authorUid]:void 0,a=c.useMemo(()=>t?.profileImage??U(e.authorAvatar)??"",[t?.profileImage,e.authorAvatar]),r=t?.currentTitleId?h(t.currentTitleId):null;return s.jsx(u,{className:"border-border/60 shadow-sm bg-card/80 backdrop-blur-sm hover:shadow-md transition-shadow cursor-pointer list-optimized",onClick:C(e.id),children:s.jsx(f,{className:"p-4",children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(j,{src:a,alt:e.author,size:40,className:"ring-2 ring-border/20",fallbackText:e.author?.charAt(0)?.toUpperCase()||"?"}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("p",{className:"font-medium text-sm",children:e.author}),r&&s.jsx(N,{variant:"secondary",className:"text-[10px] px-2 py-0.5 h-auto bg-primary/10 text-primary border-primary/20",children:r})]}),s.jsx("div",{className:"flex items-center space-x-2 text-xs text-muted-foreground mt-1",children:(e.timeAgo||e.createdAtText)&&s.jsx("span",{title:e.createdAtText||void 0,children:e.timeAgo??e.createdAtText})}),(()=>{const o=[e.category&&e.category!=="전체"?e.category:null,e.subCategory&&e.subCategory!=="전체"?e.subCategory:null,e.type?e.type==="guide"?"길잡이 글":"질문글":null].filter(Boolean);return o.length?s.jsx("div",{className:"text-xs text-muted-foreground mt-2",children:o.join(" · ")}):null})()]})]}),s.jsx(I,{className:`w-4 h-4 ${e.isBookmarked?"fill-amber-500 text-amber-500":"text-muted-foreground"}`})]}),e.title&&s.jsx("h2",{className:"text-sm font-medium line-clamp-1",children:e.title}),e.content&&s.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:e.content}),s.jsx("div",{className:"flex items-center justify-between pt-1",children:s.jsxs("div",{className:"flex items-center space-x-4 text-xs text-muted-foreground",children:[s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(g,{className:"w-4 h-4 text-amber-500"}),s.jsx("span",{children:e.lanterns??0})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(p,{className:"w-4 h-4"}),s.jsx("span",{children:e.comments??0})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("span",{className:"w-1 h-1 rounded-full bg-muted-foreground/60 inline-block"}),s.jsxs("span",{children:[e.views??0," 조회"]})]})]})})]})})},e.id)})}):i.length===0?s.jsx("div",{className:"h-full flex items-center justify-center",children:s.jsxs("div",{className:"flex flex-col items-center text-center",children:[s.jsx(p,{className:"w-10 h-10 mb-3 text-muted-foreground/60"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"아직 작성한 답글이 없습니다."})]})}):s.jsx("div",{className:"space-y-3",children:i.map(e=>{const t=e.authorUid?x[e.authorUid]:void 0,a=t?.profileImage??e.authorAvatar??"",r=t?.currentTitleId?h(t.currentTitleId):null;return s.jsx(u,{className:"hover:shadow-md transition-shadow cursor-pointer list-optimized",onClick:T(e.postId,e.id),children:s.jsx(f,{className:"p-4",children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(j,{src:a,alt:e.author,size:32,fallbackText:e.author?.charAt(0)?.toUpperCase()||"?"}),s.jsxs("div",{className:"flex flex-col",children:[s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("span",{className:"text-xs font-medium",children:e.author}),r&&s.jsx(N,{variant:"secondary",className:"text-[10px] px-2 py-0.5 h-auto bg-primary/10 text-primary border-primary/20",children:r})]}),s.jsxs("span",{className:"text-[11px] text-muted-foreground",children:[e.postAuthor,"님의 글"]})]})]}),e.timeAgo&&s.jsx("span",{className:"text-xs text-muted-foreground",children:e.timeAgo})]}),s.jsx("p",{className:"text-sm line-clamp-2",children:e.content}),s.jsxs("div",{className:"flex items-center space-x-1 mt-2",children:[s.jsx(g,{className:"w-3 h-3 text-amber-500"}),s.jsx("span",{className:"text-xs text-amber-600",children:e.lanterns})]})]})})},e.id)})})})]})}export{O as MyContentListScreen};
