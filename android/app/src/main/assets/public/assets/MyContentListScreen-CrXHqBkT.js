import{r as o,j as t}from"./index-nq_z7WhA.js";import{A as M}from"./AppHeader-BT9vd7QI.js";import{i as z,a1 as O,M as D,g as E,O as q,c as H}from"./MainScreenRefactored-BRHyWOom.js";import{C as R,a as W}from"./card-DIbA5A_d.js";import{g as G}from"./App-COUbzzsB.js";import{F as u}from"./file-text-B2yTW3on.js";import"./vendor-capacitor-rvH5hiNU.js";import"./vendor-react-1wgkHQEd.js";import"./vendor-firebase-D1NEqzdz.js";import"./arrow-left-Lp9IH1tN.js";import"./toastHelper-BQ6M3Cc4.js";import"./index-Bjta6Ul0.js";import"./index-C-WI9JZT.js";import"./checkbox-CFUi8qYh.js";import"./check-FzTHNnAz.js";import"./avatar-CGdV8c0F.js";import"./alert-dialog-simple-C5oUXbYo.js";import"./sparkles-7iSHoCyd.js";import"./firebaseCache-C_csZa1c.js";import"./profanityFilter-CmEWjjlv.js";import"./users-CgQI8rwE.js";import"./sun-BhpYpMxp.js";function xe({mode:h,posts:i=[],replies:n=[],onBack:f,onPostClick:l,onReplyClick:d,userNickname:g,userProfileImage:p,currentTitle:j,isPostLanterned:N=()=>!1,isBookmarked:v=()=>!1,formatTimeAgo:A=()=>"",formatCreatedAt:b=()=>"",onLanternToggle:C=()=>{},onBookmarkToggle:T=()=>{},isGuest:k,userUid:w}){const m=h==="posts",y=[...new Set([...i.map(e=>e.authorUid).filter(e=>typeof e=="string"&&e.length>0),...n.map(e=>e.authorUid).filter(e=>typeof e=="string"&&e.length>0)])],x=z(y),U=m?"내가 작성한 글":"내가 남긴 답글",P=o.useCallback((e,r)=>()=>{const s=typeof r=="number"?r:Number(r);Number.isNaN(s)||d?.(e,s)},[d]),B=o.useCallback(e=>{let r=new Date;if(e.createdAtText){const s=new Date(e.createdAtText);isNaN(s.getTime())||(r=s)}return{id:e.id,title:e.title||"",content:e.content||"",category:e.category||"기타",subCategory:e.subCategory||"기타",type:e.type==="guide"?"guide":"question",tags:e.tags||[],author:e.author||"",authorUid:e.authorUid||null,authorAvatar:e.authorAvatar||"",createdAt:r,lanterns:e.lanterns||0,replies:[],replyCount:e.comments||0,comments:e.comments||0,views:e.views||0,isBookmarked:e.isBookmarked||!1,isOwner:!0,timeAgo:e.timeAgo}},[]),L=o.useCallback(e=>{l?.(e.id)},[l]);return t.jsxs("div",{className:"flex-1 flex flex-col scrollbar-hide",children:[t.jsx(M,{title:U,onBack:f,icon:t.jsx(u,{className:"w-4 h-4"})}),t.jsx("main",{className:"flex-1 scroll-container px-4 py-3 pb-24",children:m?i.length===0?t.jsx("div",{className:"h-full flex items-center justify-center",children:t.jsxs("div",{className:"flex flex-col items-center text-center",children:[t.jsx(u,{className:"w-10 h-10 mb-3 text-muted-foreground/60"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"아직 작성한 글이 없습니다."})]})}):t.jsx("div",{className:"space-y-3",children:i.map((e,r)=>{const s=B(e),a=e.authorUid?x[e.authorUid]:void 0,S=e.timeAgo||A(s.createdAt),F=e.createdAtText||b(s.createdAt);return t.jsx("div",{className:"px-0 py-1.5",children:t.jsx(O,{post:s,userNickname:g||"",userProfileImage:p||"",isLanterned:N(s.id),isBookmarked:v(s.id),timeAgo:S,createdAtText:F,currentTitle:j||"",authorProfile:a,onPostClick:L,onLanternToggle:c=>C?.(String(c)),onBookmarkToggle:c=>T?.(String(c)),index:r,isGuest:k,userUid:w||""})},s.id)})}):n.length===0?t.jsx("div",{className:"h-full flex items-center justify-center",children:t.jsxs("div",{className:"flex flex-col items-center text-center",children:[t.jsx(D,{className:"w-10 h-10 mb-3 text-muted-foreground/60"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"아직 작성한 답글이 없습니다."})]})}):t.jsx("div",{className:"space-y-3",children:n.map(e=>{const r=e.authorUid?x[e.authorUid]:void 0,s=r?.profileImage??e.authorAvatar??"",a=r?.currentTitleId?E(r.currentTitleId):null;return t.jsx(R,{className:"hover:shadow-md transition-shadow cursor-pointer list-optimized",onClick:P(e.postId,e.id),children:t.jsx(W,{className:"p-4",children:t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(q,{src:s,alt:e.author,size:32,fallbackText:e.author?.charAt(0)?.toUpperCase()||"?"}),t.jsxs("div",{className:"flex flex-col",children:[t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx("span",{className:"text-xs font-medium",children:e.author}),a&&t.jsx(G,{variant:"secondary",className:"text-[10px] px-2 py-0.5 h-auto bg-primary/10 text-primary border-primary/20",children:a})]}),t.jsxs("span",{className:"text-[11px] text-muted-foreground",children:[e.postAuthor,"님의 글"]})]})]}),e.timeAgo&&t.jsx("span",{className:"text-xs text-muted-foreground",children:e.timeAgo})]}),t.jsx("p",{className:"text-sm line-clamp-2",children:e.content}),t.jsxs("div",{className:"flex items-center space-x-1 mt-2",children:[t.jsx(H,{className:"w-3 h-3 text-amber-500"}),t.jsx("span",{className:"text-xs text-amber-600",children:e.lanterns})]})]})})},e.id)})})})]})}export{xe as MyContentListScreen};
