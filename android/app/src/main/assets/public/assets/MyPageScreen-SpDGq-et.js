import{r as s,j as e,d as ae,a as re,R as it,c as ot}from"./index-nq_z7WhA.js";import{u as $e,P as lt,h as ct,R as dt,a as mt,F as ut,D as xt,B as ht,b as ft,g as pt,O as gt,L as jt,M as te,S as Nt,c as ve,d as bt,T as yt,U as vt,e as wt,f as Ct}from"./MainScreenRefactored-BRHyWOom.js";import{c as Re,e as kt,b as Be,i as Dt,B as y,T as St,g as Fe}from"./App-COUbzzsB.js";import{s as ne,w as fs,x as Rt,H as ps,t as gs,m as Et,W as At,X as Pt,G as Tt,Y as It,D as Ot,A as is,q as Mt}from"./vendor-firebase-D1NEqzdz.js";import{C as v,b as J,c as Y,a as b}from"./card-DIbA5A_d.js";import{L as _}from"./label-DFqdyXVq.js";import{b as _t,c as Lt,P as he,a as xe,f as $t}from"./index-Bjta6Ul0.js";import{P as Ue}from"./checkbox-CFUi8qYh.js";import{T as Ft,a as zt,b as os,c as ls}from"./tabs-CprT-Mux.js";import{S as $}from"./switch-DSP7bNjX.js";import{S as Wt}from"./separator-ChiaOu68.js";import{t as f,i as Bt,s as Ut}from"./toastHelper-BQ6M3Cc4.js";import{r as Ht,C as cs}from"./vendor-capacitor-rvH5hiNU.js";import{r as ds,c as qt}from"./loginDebug-CNrNP7Rg.js";import{A as Gt}from"./arrow-left-Lp9IH1tN.js";import{P as Vt}from"./palette-DmnnlyTB.js";import{M as js,S as Ns}from"./sun-BhpYpMxp.js";import{S as Jt}from"./shield-C-5UIn88.js";import{T as Yt,S as Kt}from"./trash-2-CwUGqWoD.js";import{A as Xt}from"./AppHeader-BT9vd7QI.js";import{S as Zt,a as Qt}from"./shield-check-PERLHSEk.js";import{U as ea}from"./users-CgQI8rwE.js";import{U as sa}from"./user-check-CJt_OBSS.js";import{F as we}from"./file-text-B2yTW3on.js";import{C as ta}from"./compass-DDaLZSZd.js";import{L as ms}from"./log-out-CKRO520m.js";import"./vendor-react-1wgkHQEd.js";import"./avatar-CGdV8c0F.js";import"./index-C-WI9JZT.js";import"./alert-dialog-simple-C5oUXbYo.js";import"./sparkles-7iSHoCyd.js";import"./firebaseCache-C_csZa1c.js";import"./profanityFilter-CmEWjjlv.js";import"./check-FzTHNnAz.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aa=[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]],ra=Re("bug",aa);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const na=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],ia=Re("camera",na);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oa=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],la=Re("download",oa);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ca=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],us=Re("message-square",ca);function da(t){const a=ma(t),r=s.forwardRef((o,i)=>{const{children:n,...m}=o,d=s.Children.toArray(n),p=d.find(xa);if(p){const C=p.props.children,g=d.map(R=>R===p?s.Children.count(C)>1?s.Children.only(null):s.isValidElement(C)?C.props.children:null:R);return e.jsx(a,{...m,ref:i,children:s.isValidElement(C)?s.cloneElement(C,void 0,g):null})}return e.jsx(a,{...m,ref:i,children:n})});return r.displayName=`${t}.Slot`,r}function ma(t){const a=s.forwardRef((r,o)=>{const{children:i,...n}=r;if(s.isValidElement(i)){const m=fa(i),d=ha(n,i.props);return i.type!==s.Fragment&&(d.ref=o?kt(o,m):m),s.cloneElement(i,d)}return s.Children.count(i)>1?s.Children.only(null):null});return a.displayName=`${t}.SlotClone`,a}var ua=Symbol("radix.slottable");function xa(t){return s.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===ua}function ha(t,a){const r={...a};for(const o in a){const i=t[o],n=a[o];/^on[A-Z]/.test(o)?i&&n?r[o]=(...d)=>{const p=n(...d);return i(...d),p}:i&&(r[o]=i):o==="style"?r[o]={...i,...n}:o==="className"&&(r[o]=[i,n].filter(Boolean).join(" "))}return{...t,...r}}function fa(t){let a=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,r=a&&"isReactWarning"in a&&a.isReactWarning;return r?t.ref:(a=Object.getOwnPropertyDescriptor(t,"ref")?.get,r=a&&"isReactWarning"in a&&a.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}var Ee="Dialog",[bs]=Lt(Ee),[pa,T]=bs(Ee),ys=t=>{const{__scopeDialog:a,children:r,open:o,defaultOpen:i,onOpenChange:n,modal:m=!0}=t,d=s.useRef(null),p=s.useRef(null),[C,g]=_t({prop:o,defaultProp:i??!1,onChange:n,caller:Ee});return e.jsx(pa,{scope:a,triggerRef:d,contentRef:p,contentId:$e(),titleId:$e(),descriptionId:$e(),open:C,onOpenChange:g,onOpenToggle:s.useCallback(()=>g(R=>!R),[g]),modal:m,children:r})};ys.displayName=Ee;var vs="DialogTrigger",ws=s.forwardRef((t,a)=>{const{__scopeDialog:r,...o}=t,i=T(vs,r),n=Be(a,i.triggerRef);return e.jsx(he.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":Ge(i.open),...o,ref:n,onClick:xe(t.onClick,i.onOpenToggle)})});ws.displayName=vs;var He="DialogPortal",[ga,Cs]=bs(He,{forceMount:void 0}),ks=t=>{const{__scopeDialog:a,forceMount:r,children:o,container:i}=t,n=T(He,a);return e.jsx(ga,{scope:a,forceMount:r,children:s.Children.map(o,m=>e.jsx(Ue,{present:r||n.open,children:e.jsx(lt,{asChild:!0,container:i,children:m})}))})};ks.displayName=He;var Ce="DialogOverlay",Ds=s.forwardRef((t,a)=>{const r=Cs(Ce,t.__scopeDialog),{forceMount:o=r.forceMount,...i}=t,n=T(Ce,t.__scopeDialog);return n.modal?e.jsx(Ue,{present:o||n.open,children:e.jsx(Na,{...i,ref:a})}):null});Ds.displayName=Ce;var ja=da("DialogOverlay.RemoveScroll"),Na=s.forwardRef((t,a)=>{const{__scopeDialog:r,...o}=t,i=T(Ce,r);return e.jsx(dt,{as:ja,allowPinchZoom:!0,shards:[i.contentRef],children:e.jsx(he.div,{"data-state":Ge(i.open),...o,ref:a,style:{pointerEvents:"auto",...o.style}})})}),K="DialogContent",Ss=s.forwardRef((t,a)=>{const r=Cs(K,t.__scopeDialog),{forceMount:o=r.forceMount,...i}=t,n=T(K,t.__scopeDialog);return e.jsx(Ue,{present:o||n.open,children:n.modal?e.jsx(ba,{...i,ref:a}):e.jsx(ya,{...i,ref:a})})});Ss.displayName=K;var ba=s.forwardRef((t,a)=>{const r=T(K,t.__scopeDialog),o=s.useRef(null),i=Be(a,r.contentRef,o);return s.useEffect(()=>{const n=o.current;if(n)return ct(n)},[]),e.jsx(Rs,{...t,ref:i,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:xe(t.onCloseAutoFocus,n=>{n.preventDefault(),r.triggerRef.current?.focus()}),onPointerDownOutside:xe(t.onPointerDownOutside,n=>{const m=n.detail.originalEvent,d=m.button===0&&m.ctrlKey===!0;(m.button===2||d)&&n.preventDefault()}),onFocusOutside:xe(t.onFocusOutside,n=>n.preventDefault())})}),ya=s.forwardRef((t,a)=>{const r=T(K,t.__scopeDialog),o=s.useRef(!1),i=s.useRef(!1);return e.jsx(Rs,{...t,ref:a,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:n=>{t.onCloseAutoFocus?.(n),n.defaultPrevented||(o.current||r.triggerRef.current?.focus(),n.preventDefault()),o.current=!1,i.current=!1},onInteractOutside:n=>{t.onInteractOutside?.(n),n.defaultPrevented||(o.current=!0,n.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const m=n.target;r.triggerRef.current?.contains(m)&&n.preventDefault(),n.detail.originalEvent.type==="focusin"&&i.current&&n.preventDefault()}})}),Rs=s.forwardRef((t,a)=>{const{__scopeDialog:r,trapFocus:o,onOpenAutoFocus:i,onCloseAutoFocus:n,...m}=t,d=T(K,r),p=s.useRef(null),C=Be(a,p);return mt(),e.jsxs(e.Fragment,{children:[e.jsx(ut,{asChild:!0,loop:!0,trapped:o,onMountAutoFocus:i,onUnmountAutoFocus:n,children:e.jsx(xt,{role:"dialog",id:d.contentId,"aria-describedby":d.descriptionId,"aria-labelledby":d.titleId,"data-state":Ge(d.open),...m,ref:C,onDismiss:()=>d.onOpenChange(!1)})}),e.jsxs(e.Fragment,{children:[e.jsx(wa,{titleId:d.titleId}),e.jsx(ka,{contentRef:p,descriptionId:d.descriptionId})]})]})}),qe="DialogTitle",Es=s.forwardRef((t,a)=>{const{__scopeDialog:r,...o}=t,i=T(qe,r);return e.jsx(he.h2,{id:i.titleId,...o,ref:a})});Es.displayName=qe;var As="DialogDescription",Ps=s.forwardRef((t,a)=>{const{__scopeDialog:r,...o}=t,i=T(As,r);return e.jsx(he.p,{id:i.descriptionId,...o,ref:a})});Ps.displayName=As;var Ts="DialogClose",va=s.forwardRef((t,a)=>{const{__scopeDialog:r,...o}=t,i=T(Ts,r);return e.jsx(he.button,{type:"button",...o,ref:a,onClick:xe(t.onClick,()=>i.onOpenChange(!1))})});va.displayName=Ts;function Ge(t){return t?"open":"closed"}var Is="DialogTitleWarning",[Nr,Os]=$t(Is,{contentName:K,titleName:qe,docsSlug:"dialog"}),wa=({titleId:t})=>{const a=Os(Is),r=`\`${a.contentName}\` requires a \`${a.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${a.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${a.docsSlug}`;return s.useEffect(()=>{if(t){const o=document.getElementById(t)}},[r,t]),null},Ca="DialogDescriptionWarning",ka=({contentRef:t,descriptionId:a})=>{const o=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Os(Ca).contentName}}.`;return s.useEffect(()=>{const i=t.current?.getAttribute("aria-describedby");if(a&&i){const n=document.getElementById(a)}},[o,t,a]),null},Da=ys,Sa=ws,Ra=ks,Ms=Ds,_s=Ss,Ls=Es,$s=Ps;const fe=(...t)=>t.filter(Boolean).join(" "),ze=Da,Ea=Sa,Aa=Ra,Fs=s.forwardRef(({className:t,...a},r)=>e.jsx(Ms,{ref:r,className:fe("fixed inset-0 z-50 backdrop-blur-sm","data-[state=open]:animate-in data-[state=closed]:animate-out","data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...a}));Fs.displayName=Ms.displayName;const ke=s.forwardRef(({className:t,children:a,...r},o)=>e.jsxs(Aa,{children:[e.jsx(Fs,{}),e.jsx(_s,{ref:o,className:fe("fixed left-1/2 top-1/2 z-50 -translate-x-1/2 -translate-y-1/2","w-[360px] max-w-[90vw]","rounded-lg border border-border bg-card p-6 shadow-lg outline-none","data-[state=open]:animate-in data-[state=closed]:animate-out","data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0","data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95","data-[state=closed]:slide-out-to-top-4 data-[state=open]:slide-in-from-top-4",t),...r,children:a})]}));ke.displayName=_s.displayName;const De=({className:t,...a})=>e.jsx("div",{className:fe("flex flex-col space-y-1.5 text-center sm:text-left",t),...a});De.displayName="DialogHeader";const Se=s.forwardRef(({className:t,...a},r)=>e.jsx(Ls,{ref:r,className:fe("text-lg font-semibold leading-none tracking-tight",t),...a}));Se.displayName=Ls.displayName;const We=s.forwardRef(({className:t,...a},r)=>e.jsx($s,{ref:r,className:fe("text-sm text-muted-foreground",t),...a}));We.displayName=$s.displayName;const P=Ht("PushNotifications",{}),xs={notifyOnReply:!0,notifyOnMention:!0,notifyOnFollow:!0,notifyOnGuide:!0,notifyOnDailyDigest:!0,notifyOnMarketing:!1};function Pa(){const[t,a]=s.useState(null),[r,o]=s.useState(!1),[i,n]=s.useState(xs),[m,d]=s.useState(!0),p=s.useRef(!1),C=s.useCallback(async(h,j)=>{try{const k=ne(ae,"users",h);await fs(k,{fcmToken:j,updatedAt:new Date},{merge:!0})}catch{}},[]),g=s.useCallback(async()=>{if(!p.current)try{await P.addListener("registration",async h=>{a(h.value);const j=re.currentUser;j&&await C(j.uid,h.value)}),await P.addListener("registrationError",h=>{}),await P.addListener("pushNotificationReceived",h=>{const j=h.title||"알림",k=h.body||"";f.success(`${j}: ${k}`)}),await P.addListener("pushNotificationActionPerformed",h=>{const j=h.notification.data;j?.link&&j.link.startsWith("/")&&(window.location.hash=j.link)}),p.current=!0}catch{}},[C]);s.useEffect(()=>{if(!cs.isNativePlatform()){d(!1);return}(async()=>{try{const w=await P.checkPermissions();if(w.receive==="granted")o(!0),await g(),await P.register();else if(w.receive==="prompt")try{(await P.requestPermissions()).receive==="granted"&&(o(!0),await g(),await P.register())}catch{}}catch{}})();const j=async w=>{try{const D=await gs(ne(ae,"users",w));if(D.exists()){const W=D.data().notificationSettings||{};n(q=>({...q,...W}))}}catch{}finally{d(!1)}},k=Rt(re,async w=>{if(w){if(j(w.uid),r)try{await P.register()}catch{}}else a(null),n(xs),d(!1)});return()=>k()},[r,g]);const R=s.useCallback(async()=>{if(!cs.isNativePlatform())return!1;try{if((await P.requestPermissions()).receive==="granted")return o(!0),g(),await P.register(),!0}catch{}return!1},[g]),F=s.useCallback(async(h,j)=>{n(w=>({...w,[h]:j}));const k=re.currentUser;if(k)try{const w=ne(ae,"users",k.uid);await ps(w,{[`notificationSettings.${h}`]:j})}catch{f.error("설정 저장에 실패했습니다."),n(D=>({...D,[h]:!j}))}},[]);return{fcmToken:t,isPermissionGranted:r,requestPermission:R,settings:i,updateSetting:F,isSettingsLoading:m}}function Ta(t){return new Date(t).toLocaleString()}function Ia(){const[t,a]=it.useState(ds()),r=()=>a(ds()),o=()=>{qt(),a([])},i=t[t.length-1],n=(()=>{const d=[...t].reverse().find(p=>p.step==="error")?.data?.code;return d==="auth/account-exists-with-different-credential"?"Firebase: 기존 제공자로 먼저 로그인 후 계정 연결(link) 흐름이 필요합니다.":typeof d=="string"&&d==="10"?"GoogleAuth: code 10은 보통 SHA-1/클라이언트ID 설정 미스(Developer Error)로 보고됩니다. Android OAuth Client와 SHA-1을 점검하세요.":i?.step==="google.signIn.start"?"직전 실행이 GoogleAuth.signIn 시작 단계에서 종료되었습니다. 플러그인 초기화/버전(rc.4 등) 또는 네이티브 설정 반영(sync)을 우선 점검하세요.":null})();return e.jsxs("div",{style:{padding:16},children:[e.jsx("h3",{children:"로그인 디버그"}),n&&e.jsxs("div",{style:{padding:12,border:"1px solid #ccc",marginBottom:12},children:[e.jsx("div",{style:{fontWeight:700},children:"힌트"}),e.jsx("div",{children:n})]}),e.jsxs("div",{style:{display:"flex",gap:8,marginBottom:12},children:[e.jsx("button",{onClick:r,children:"새로고침"}),e.jsx("button",{onClick:o,children:"로그 지우기"})]}),e.jsx("div",{style:{fontSize:12,whiteSpace:"pre-wrap"},children:t.length===0?"로그 없음":t.map(m=>{const d=m.data?JSON.stringify(m.data):"";return`[${Ta(m.t)}] ${m.step} ${d}`}).join(`
`)})]})}const hs="userSettings",Oa=Mt(ot,"asia-northeast3"),Ma=Ot(Oa,"deleteAccount");function _a({onBack:t,isDarkMode:a,onToggleDarkMode:r,onShowPrivacy:o,onShowTerms:i,onShowGuidelines:n,onLogout:m,onShowOpenSourceLicenses:d,onShowAttributions:p}){const{settings:C,updateSetting:g,requestPermission:R,isPermissionGranted:F}=Pa(),[h,j]=s.useState(!0),[k,w]=s.useState(!0),[D,z]=s.useState(!0),[W,q]=s.useState(!0),[pe,ie]=s.useState(!0),[Ae,Pe]=s.useState(!1);s.useEffect(()=>{w(C.notifyOnFollow),z(C.notifyOnReply)},[C]);const[Te,ge]=s.useState(!1),[oe,X]=s.useState(!1),[le,ce]=s.useState(!1),[je,G]=s.useState(!1);s.useEffect(()=>{try{const c=localStorage.getItem(hs);if(!c)return;const x=JSON.parse(c);typeof x.notificationsEnabled=="boolean"&&j(x.notificationsEnabled),typeof x.newPostNotifications=="boolean"&&w(x.newPostNotifications),typeof x.replyNotifications=="boolean"&&z(x.replyNotifications),typeof x.lanternNotifications=="boolean"&&q(x.lanternNotifications),typeof x.autoSave=="boolean"&&ie(x.autoSave)}catch{}},[]),s.useEffect(()=>{const c=re.currentUser?.uid;if(!c)return;const x=ne(ae,"users",c);ce(!0),gs(x).then(N=>{if(!N.exists())return;const A=N.data()?.consents??{};typeof A.aiAutoReply=="boolean"&&ge(A.aiAutoReply),typeof A.personalizedDigest=="boolean"&&X(A.personalizedDigest)}).catch(N=>{}).finally(()=>ce(!1))},[]);const S=s.useCallback(c=>{const x={notificationsEnabled:h,newPostNotifications:k,replyNotifications:D,lanternNotifications:W,autoSave:pe,...c};try{localStorage.setItem(hs,JSON.stringify(x))}catch{}},[h,k,D,W,pe]),I=s.useCallback(async c=>{const x=re.currentUser?.uid;if(!x)return f.error("로그인이 필요합니다"),!1;const N={},E={};c.aiAutoReply!==void 0&&(N.aiAutoReply=c.aiAutoReply,E.aiAutoReply=is()),c.personalizedDigest!==void 0&&(N.personalizedDigest=c.personalizedDigest,E.personalizedDigest=is());try{return await fs(ne(ae,"users",x),{consents:N,consentUpdatedAt:E},{merge:!0}),!0}catch{return f.error("동의 저장에 실패했습니다. 잠시 후 다시 시도해주세요."),!1}},[]),O=s.useCallback(async c=>{j(c),S({notificationsEnabled:c}),c&&!F&&await R()},[S,R,F]),Z=s.useCallback(c=>{w(c),S({newPostNotifications:c}),g("notifyOnFollow",c)},[S,g]),Ne=s.useCallback(c=>{z(c),S({replyNotifications:c}),g("notifyOnReply",c),g("notifyOnMention",c)},[S,g]),Ie=s.useCallback(c=>{q(c),S({lanternNotifications:c})},[S]),de=s.useCallback(c=>{ie(c),S({autoSave:c})},[S]),Q=s.useCallback(async c=>{ge(c),await I({aiAutoReply:c})&&f.success(c?"AI 자동응답이 활성화되었습니다":"AI 자동응답이 비활성화되었습니다")},[I]),V=s.useCallback(async c=>{X(c),g("notifyOnDailyDigest",c),await I({personalizedDigest:c})&&f.success(c?"맞춤 아침 추천이 켜졌습니다":"맞춤 아침 추천이 꺼졌습니다")},[I,g]),B=s.useCallback(()=>{f.success("캐시가 삭제되었습니다")},[]),Oe=s.useCallback(async()=>{if(!window.confirm("정말로 계정을 탈퇴하시겠습니까? 모든 데이터가 영구적으로 삭제되며, 이 작업은 되돌릴 수 없습니다."))return;const x=Et().currentUser;if(!x){f.error("로그인이 필요합니다.");return}G(!0);try{const N=x.providerData[0]?.providerId;if(N==="password"){const E=prompt("본인 확인을 위해 비밀번호를 다시 입력해주세요.");if(E===null){G(!1);return}if(!x.email)throw new Error("계정의 이메일 정보를 확인할 수 없습니다.");const A=At.credential(x.email,E);await Pt(x,A)}else if(N==="google.com"){const E=new Tt;await It(x,E)}else throw new Error("지원하지 않는 로그인 방식입니다. 관리자에게 문의해주세요.");await Ma({}),f.success("계정 탈퇴가 완료되었습니다. 이용해주셔서 감사합니다."),m()}catch(N){N.code==="auth/wrong-password"?f.error("비밀번호가 일치하지 않습니다."):N.code==="auth/popup-closed-by-user"||N.code==="auth/cancelled-popup-request"?f.info("계정 탈퇴가 취소되었습니다."):N.code==="auth/too-many-requests"?f.error("요청이 너무 많습니다. 잠시 후 다시 시도해 주세요."):f.error("계정 삭제 중 문제가 발생했습니다. 잠시 후 다시 시도해 주세요."),G(!1)}},[m]),[me,Me]=s.useState(Bt()),_e=s.useCallback(c=>{Me(c),Ut(c),f.success(c?"화면 알림이 활성화되었습니다":"화면 알림이 비활성화되었습니다")},[]);return e.jsxs("div",{className:"w-full h-full bg-background text-foreground overflow-y-auto scrollbar-hide",children:[e.jsx(Dt,{isLoading:je,message:"계정을 정리하고 있습니다...",variant:"blur"}),e.jsx("header",{className:"bg-card/95 backdrop-blur-xl border-b border-border flex-shrink-0 safe-top",children:e.jsx("div",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(y,{variant:"ghost",size:"icon",onClick:t,className:"hover:bg-accent",children:e.jsx(Gt,{className:"w-5 h-5"})}),e.jsx("h1",{className:"font-medium",children:"설정"})]})})}),e.jsxs("div",{className:"p-4 space-y-6",children:[e.jsxs(v,{className:"bg-card border-border",children:[e.jsx(J,{children:e.jsxs(Y,{className:"flex items-center space-x-2",children:[e.jsx(Vt,{className:"w-5 h-5"}),e.jsx("span",{children:"화면 설정"})]})}),e.jsx(b,{className:"space-y-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[a?e.jsx(js,{className:"w-4 h-4"}):e.jsx(Ns,{className:"w-4 h-4"}),e.jsx(_,{className:"text-foreground",children:"다크 모드"})]}),e.jsx("div",{className:"-m-2 p-2 inline-flex items-center",children:e.jsx($,{className:`!min-w-0 !min-h-0 h-4 w-8 md:h-6 md:w-11
                  [&>span]:h-3.5 [&>span]:w-3.5 md:[&>span]:h-5 md:[&>span]:w-5
                  [&[data-state=checked]>span]:translate-x-3.5 md:[&[data-state=checked]>span]:translate-x-5`,checked:a,onCheckedChange:r})})]})})]}),e.jsxs(v,{className:"bg-card border-border",children:[e.jsx(J,{children:e.jsxs(Y,{className:"flex items-center space-x-2",children:[e.jsx(ht,{className:"w-5 h-5"}),e.jsx("span",{children:"알림 설정"})]})}),e.jsxs(b,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(_,{className:"text-foreground",children:"전체 알림"}),e.jsx($,{className:`!min-w-0 !min-h-0 h-4 w-8 md:h-6 md:w-11
                [&>span]:h-3.5 [&>span]:w-3.5 md:[&>span]:h-5 md:[&>span]:w-5
                [&[data-state=checked]>span]:translate-x-3.5 md:[&[data-state=checked]>span]:translate-x-5`,checked:h,onCheckedChange:O})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(us,{className:"w-4 h-4 text-gray-700"}),e.jsx(_,{className:"text-gray-900",children:"화면 알림 표시"})]}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:'"글이 작성되었습니다" 같은 성공 메시지 표시'})]}),e.jsx($,{checked:me,onCheckedChange:_e})]}),h&&e.jsxs(e.Fragment,{children:[e.jsx(Wt,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(_,{className:"text-foreground",children:"새 글 알림"}),e.jsx($,{className:`!min-w-0 !min-h-0 h-4 w-8 md:h-6 md:w-11
                    [&>span]:h-3.5 [&>span]:w-3.5 md:[&>span]:h-5 md:[&>span]:w-5
                    [&[data-state=checked]>span]:translate-x-3.5 md:[&[data-state=checked]>span]:translate-x-5`,checked:k,onCheckedChange:Z})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(_,{className:"text-foreground",children:"답글 알림"}),e.jsx($,{className:`!min-w-0 !min-h-0 h-4 w-8 md:h-6 md:w-11
                    [&>span]:h-3.5 [&>span]:w-3.5 md:[&>span]:h-5 md:[&>span]:w-5
                    [&[data-state=checked]>span]:translate-x-3.5 md:[&[data-state=checked]>span]:translate-x-5`,checked:D,onCheckedChange:Ne})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(_,{className:"text-foreground",children:"등불 알림"}),e.jsx($,{className:`!min-w-0 !min-h-0 h-4 w-8 md:h-6 md:w-11
                    [&>span]:h-3.5 [&>span]:w-3.5 md:[&>span]:h-5 md:[&>span]:w-5
                    [&[data-state=checked]>span]:translate-x-3.5 md:[&[data-state=checked]>span]:translate-x-5`,checked:W,onCheckedChange:Ie})]})]})]})]}),e.jsxs(v,{className:"bg-card border-border",children:[e.jsx(J,{children:e.jsxs(Y,{className:"flex items-center space-x-2",children:[e.jsx(us,{className:"w-5 h-5"}),e.jsx("span",{children:"AI / 맞춤 설정"})]})}),e.jsxs(b,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(_,{className:"text-foreground",children:"AI 자동응답 허용"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"1시간 이상 미응답 글·댓글에 AI가 대신 답변합니다."})]}),e.jsx($,{disabled:le,checked:Te,onCheckedChange:Q})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(_,{className:"text-foreground",children:"맞춤 아침 추천 수신"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"오전 9시 관심사 기반 추천 푸시·고정카드를 받습니다."})]}),e.jsx($,{disabled:le,checked:oe,onCheckedChange:V})]})]})]}),e.jsxs(v,{className:"bg-card border-border",children:[e.jsx(J,{children:e.jsxs(Y,{className:"flex items-center space-x-2",children:[e.jsx(Jt,{className:"w-5 h-5"}),e.jsx("span",{children:"개인정보 보호"})]})}),e.jsx(b,{className:"space-y-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(_,{className:"text-foreground",children:"자동 저장"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"작성 중인 글을 자동으로 저장"})]}),e.jsx($,{className:`!min-w-0 !min-h-0 h-4 w-8 md:h-6 md:w-11
                [&>span]:h-3.5 [&>span]:w-3.5 md:[&>span]:h-5 md:[&>span]:w-5
                [&[data-state=checked]>span]:translate-x-3.5 md:[&[data-state=checked]>span]:translate-x-5`,checked:pe,onCheckedChange:de})]})})]}),e.jsxs(v,{className:"bg-card border-border",children:[e.jsx(J,{children:e.jsxs(Y,{className:"flex items-center space-x-2 text-gray-900",children:[e.jsx(la,{className:"w-5 h-5 text-gray-700"}),e.jsx("span",{children:"데이터 관리"})]})}),e.jsxs(b,{className:"space-y-3",children:[e.jsxs(ze,{open:Ae,onOpenChange:Pe,children:[e.jsx(Ea,{asChild:!0,children:e.jsxs(y,{variant:"outline",className:"w-full justify-start",children:[e.jsx(ra,{className:"w-4 h-4 mr-2"}),"로그인 디버그 보기"]})}),e.jsxs(ke,{className:"max-h-[80vh] overflow-y-auto",children:[e.jsx(De,{children:e.jsx(Se,{children:"로그인 디버그"})}),e.jsx(Ia,{})]})]}),e.jsxs(y,{variant:"outline",className:"w-full justify-start",onClick:B,children:[e.jsx(Yt,{className:"w-4 h-4 mr-2"}),"캐시 삭제"]}),e.jsxs(y,{variant:"destructive",className:"w-full justify-start bg-destructive text-destructive-foreground hover:bg-destructive/90",onClick:Oe,children:[e.jsx(St,{className:"w-4 h-4 mr-3"}),e.jsx("div",{className:"text-left",children:e.jsx("p",{className:"font-medium",children:"계정 탈퇴"})})]})]})]}),e.jsxs(v,{className:"bg-card border-border",children:[e.jsx(J,{children:e.jsx(Y,{children:"법적 문서"})}),e.jsxs(b,{className:"space-y-3",children:[i&&e.jsx(y,{variant:"outline",className:"w-full justify-start bg-white border-gray-300 text-gray-900 hover:bg-gray-50",onClick:i,children:"이용약관"}),o&&e.jsx(y,{variant:"outline",className:"w-full justify-start bg-white border-gray-300 text-gray-900 hover:bg-gray-50",onClick:o,children:"개인정보 처리방침"}),n&&e.jsx(y,{variant:"outline",className:"w-full justify-start bg-white border-gray-300 text-gray-900 hover:bg-gray-50",onClick:n,children:"커뮤니티 가이드라인"}),d&&e.jsx(y,{variant:"outline",className:"w-full justify-start bg-white border-gray-300 text-gray-900 hover:bg-gray-50",onClick:d,children:"오픈소스 라이선스"}),p&&e.jsx(y,{variant:"outline",className:"w-full justify-start bg-white border-gray-300 text-gray-900 hover:bg-gray-50",onClick:p,children:"이미지·아이콘 출처"})]})]}),e.jsxs(v,{className:"bg-card border-border",children:[e.jsx(J,{children:e.jsx(Y,{className:"text-gray-900",children:"앱 정보"})}),e.jsxs(b,{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"버전"}),e.jsx("span",{className:"",children:"1.0.0"})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"빌드"}),e.jsx("span",{className:"",children:"2025.01.01"})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"개발자"}),e.jsx("span",{className:"",children:"비유노트 팀"})]})]})]})]})]})}function La(t){return t<=10?"text-red-400":t<=30?"text-orange-400":t<=70?"text-emerald-400":"text-blue-400"}function $a(t){return t<=10?"이제 막 첫 등불을 켜기 시작했어요. 질문하고 답변하면서 천천히 신뢰를 쌓아가 봐요.":t<=30?"기본 수준의 신뢰도예요. 이해를 돕는 질문과 비유, 예시가 쌓일수록 점수가 올라가요.":t<=70?"안정적인 신뢰도예요. 비유와 예시로 많은 사람에게 도움을 주고 있어요.":"매우 높은 신뢰도예요. 이곳에서 믿고 보는 길잡이로, 당신의 설명이 길이 되고 있어요."}function br({userNickname:t,userProfileImage:a="",onProfileImageChange:r,onBack:o,onLogout:i,isDarkMode:n,onToggleDarkMode:m,onShowPrivacy:d,onShowTerms:p,onShowGuidelines:C,onShowOpenSourceLicenses:g,onShowAttributions:R,userPosts:F=[],userReplies:h=[],bookmarkedPosts:j=[],currentTitle:k="",userGuideCount:w=0,trustScore:D=30,profileDescription:z="",onProfileDescriptionChange:W,onAchievementsClick:q,onThemeClick:pe,onTitlesCollectionClick:ie,followerCount:Ae=0,followingCount:Pe=0,onFollowerCardClick:Te,onFollowingCardClick:ge,onMyPostsCardClick:oe,onMyRepliesCardClick:X,onPostClick:le,onReplyClick:ce,autoOpenSettings:je,onAutoSettingsOpened:G,onManageBlockedUsers:S,currentTheme:I,isGuest:O}){const[Z,Ne]=s.useState(z);s.useEffect(()=>{Ne(z)},[z]);const[Ie,de]=s.useState(!1),[Q,V]=s.useState(""),B=80,[Oe,me]=s.useState(!1);s.useEffect(()=>{je&&(me(!0),G&&G())},[je,G]);const Me=ft({key:"mypage"}),[_e,c]=s.useState(!1),[x,N]=s.useState(!1),[E,A]=s.useState(!1),zs=s.useCallback(()=>{A(!0)},[]),Ve=s.useCallback(async()=>{A(!1);try{i(),f.success("로그아웃 되었습니다.")}catch{f.error("로그아웃 중 오류가 발생했습니다.")}},[i]),Ws=s.useCallback(()=>{A(!1)},[]),Bs=s.useCallback(l=>{const u=l.target.files?.[0];if(u&&r){if(u.size>5*1024*1024){f.error("파일 크기는 5MB 이하로 선택해주세요.");return}if(!u.type.startsWith("image/")){f.error("이미지 파일만 선택 가능합니다.");return}r(u),f.success("프로필 사진이 변경되었습니다!")}},[r]),Je=s.useMemo(()=>pt(k),[k]),ee=F,se=h,U=s.useMemo(()=>!ee||ee.length===0?null:ee.reduce((l,u)=>{const M=typeof l?.lanterns=="number"?l.lanterns:0;return(typeof u?.lanterns=="number"?u.lanterns:0)>M?u:l},ee[0]),[ee]),L=s.useMemo(()=>!se||se.length===0?null:se.reduce((l,u)=>{const M=typeof l?.lanterns=="number"?l.lanterns:0;return(typeof u?.lanterns=="number"?u.lanterns:0)>M?u:l},se[0]),[se]),Us=j,ue=Math.max(0,Math.min(100,D)),Hs=La(ue),qs=$a(ue),Ye=Math.floor(ue/10),H=Ye/10,Le=.4+H*.6,Ke=.7+H*.3,Xe=Math.max(0,Math.min(255,Math.floor(180+H*75))),Ze=Math.max(0,Math.min(255,Math.floor(150+H*65))),Qe=Math.max(0,Math.min(255,Math.floor(40*(1-H)))),Gs=Math.max(0,Math.min(255,Math.floor(220+H*35))),Vs=Math.max(0,Math.min(255,Math.floor(200+H*15))),Js=0,be={postsCount:ee.length,guidesReceived:w,commentsCount:se.length,bookmarksCount:Us.length},es=F?[...F].sort((l,u)=>(u.lanterns||0)-(l.lanterns||0)).slice(0,3):[],ss=h?[...h].sort((l,u)=>(u.lanterns||0)-(l.lanterns||0)).slice(0,3):[],Ys=s.useCallback(async()=>{const l=Q.trim();if(!l){f.error("프로필 설명을 입력해주세요.");return}if(l.length>B){f.error(`최대 ${B}자까지 입력할 수 있어요.`);return}try{const u=re.currentUser;if(!u){f.error("로그인 후 이용해주세요.");return}const M=ne(ae,"users",u.uid);await ps(M,{profileDescription:l}),Ne(l),W?.(l),f.success("프로필 설명이 변경되었습니다!"),de(!1),V("")}catch{f.error("프로필 설명을 저장하지 못했어요. 잠시 후 다시 시도해주세요.")}},[Q,W]),Ks=s.useCallback(()=>{me(!1)},[]),Xs=s.useCallback(l=>{const u=l.target.value,M=l.nativeEvent?.isComposing;V(M?u:u.slice(0,B))},[]),Zs=s.useCallback(()=>{de(!1)},[]),Qs=s.useCallback(l=>{de(l),l&&V(Z)},[Z]),et=s.useCallback(()=>{me(!0)},[]),st=s.useCallback(()=>{V(l=>l.slice(0,B))},[]),tt=s.useCallback(()=>{oe?oe():c(!0)},[oe]),at=s.useCallback(()=>{X?X():N(!0)},[X]),rt=s.useCallback(()=>{c(!1)},[]),nt=s.useCallback(()=>{N(!1)},[]),ts=s.useCallback(l=>{c(!1),le?.(l)},[le]),as=s.useCallback((l,u)=>{N(!1),ce?.(l,u)},[ce]),rs=s.useCallback(l=>{const u=l.currentTarget.getAttribute("data-post-id");u&&ts(u)},[ts]),ns=s.useCallback(l=>{const u=l.currentTarget.getAttribute("data-post-id"),M=l.currentTarget.getAttribute("data-reply-id");if(!u||!M)return;const ye=Number(M);Number.isNaN(ye)||as(u,ye)},[as]);return Oe?e.jsx(_a,{onBack:Ks,isDarkMode:n,onToggleDarkMode:m,onShowPrivacy:d,onShowTerms:p,onShowGuidelines:C,onShowOpenSourceLicenses:g,onShowAttributions:R,onLogout:Ve}):e.jsxs("div",{className:"w-full h-full bg-background text-foreground flex flex-col overflow-hidden",children:[e.jsx(Xt,{title:"마이페이지",onBack:o,rightSlot:e.jsx(y,{variant:"ghost",size:"icon",onClick:m,children:n?e.jsx(Ns,{className:"w-4 h-4"}):e.jsx(js,{className:"w-4 h-4"})})}),e.jsxs("div",{ref:Me,className:"flex-1 scroll-container scrollbar-hide p-4 pb-24 space-y-4",children:[e.jsx("div",{className:"bg-card text-card-foreground flex flex-col gap-6 rounded-xl transition-all border border-border/70 shadow-sm",children:e.jsx(b,{className:"p-6 relative z-10",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:`rounded-full overflow-hidden border-4 ${I==="golden-library"?"border-[#d4af37]":"border-white"}`,children:e.jsx(gt,{src:a,alt:t?`${t}님의 프로필`:"프로필 이미지",fallbackText:t?.charAt(0)?.toUpperCase()||"?",nickname:t,className:"w-20 h-20 rounded-full shadow-xl"})}),e.jsxs("div",{className:"absolute -bottom-1 -right-1",children:[e.jsx("input",{type:"file",accept:"image/*",className:"hidden",id:"profile-image-upload",onChange:Bs}),e.jsx(y,{size:"icon",asChild:!0,className:"w-9 h-9 rounded-full cursor-pointer touch-target",disabled:O,children:e.jsx("label",{htmlFor:"profile-image-upload",children:e.jsx(ia,{className:"w-4 h-4"})})})]})]}),e.jsxs("div",{className:"flex-1 min-h-20 flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[I==="greek-temple"&&D>=70&&e.jsx("div",{className:`shrink-0 ${I==="greek-temple"?"laurel-wreath-premium":"laurel-wreath"}`,children:e.jsx(jt,{size:20,isPremium:I==="greek-temple"})}),I==="golden-library"&&D>=70&&e.jsx("div",{className:"shrink-0",children:e.jsx(Zt,{className:"w-5 h-5 text-[#d4af37]",strokeWidth:2.5})}),e.jsx("h2",{className:"text-xl font-semibold truncate",children:t})]}),Je&&e.jsx(Fe,{variant:"secondary",className:"text-xs shrink-0",children:Je})]}),e.jsx(y,{variant:"ghost",size:"icon",className:"touch-target",onClick:O?()=>f.info("로그인 후 프로필 설명을 수정할 수 있습니다."):()=>Qs(!0),disabled:O,children:e.jsx(Kt,{className:"w-4 h-4"})})]}),Z&&e.jsx("p",{className:"mt-1 text-sm text-muted-foreground whitespace-pre-wrap break-words leading-snug line-clamp-2",children:Z})]})]})})}),e.jsx(v,{className:"trust-score-card rounded-xl mt-3 border-border/70 shadow-sm",style:{"--trust-score":ue,"--trust-level":Ye,"--trust-brightness":H,"--trust-opacity-base":Le,"--trust-opacity-high":Ke,"--trust-color-base":`rgba(${Xe}, ${Ze}, ${Qe}, ${Le})`,"--trust-color-high":`rgba(${Gs}, ${Vs}, ${Js}, ${Ke})`,"--trust-color-bright":`rgba(${Xe}, ${Ze}, ${Qe}, ${Le+.15})`},children:e.jsxs(b,{className:"p-4 flex flex-col items-center text-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Qt,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("span",{className:"text-sm font-medium",children:["신뢰도"," ",e.jsxs("span",{className:`font-semibold ${Hs}`,children:[Math.round(ue),"점"]})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground leading-snug",children:qs})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(v,{className:"cursor-pointer",onClick:Te,children:e.jsxs(b,{className:"p-6 text-center",children:[e.jsx(ea,{className:"w-6 h-6 mx-auto mb-2 text-amber-500"}),e.jsx("div",{className:"text-lg font-medium",children:Ae}),e.jsx("div",{className:"text-xs text-muted-foreground leading-snug",children:"선원"})]})}),e.jsx(v,{className:"cursor-pointer",onClick:ge,children:e.jsxs(b,{className:"p-6 text-center",children:[e.jsx(sa,{className:"w-6 h-6 mx-auto mb-2 text-amber-500"}),e.jsx("div",{className:"text-lg font-medium",children:Pe}),e.jsx("div",{className:"text-xs text-muted-foreground leading-snug",children:"승선한 배"})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(v,{className:"cursor-pointer hover:shadow-md transition-shadow active:scale-[0.98]",onClick:tt,children:e.jsxs(b,{className:"p-4 text-center",children:[e.jsx(we,{className:"w-6 h-6 mx-auto mb-2 text-blue-500"}),e.jsx("div",{className:"text-lg font-medium",children:be.postsCount}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"작성한 글"})]})}),e.jsx(v,{className:"cursor-pointer hover:shadow-md transition-shadow active:scale-[0.98]",onClick:at,children:e.jsxs(b,{className:"p-4 text-center",children:[e.jsx(te,{className:"w-6 h-6 mx-auto mb-2 text-green-500"}),e.jsx("div",{className:"text-lg font-medium",children:be.commentsCount}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"답글"})]})}),e.jsx(v,{children:e.jsxs(b,{className:"p-4 text-center",children:[e.jsx(ta,{className:"w-6 h-6 mx-auto mb-2 text-primary"}),e.jsx("div",{className:"text-lg font-medium",children:be.guidesReceived}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"길잡이"})]})}),e.jsx(v,{children:e.jsxs(b,{className:"p-4 text-center",children:[e.jsx(Nt,{className:"w-6 h-6 mx-auto mb-2 text-yellow-500"}),e.jsx("div",{className:"text-lg font-medium",children:be.bookmarksCount}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"북마크"})]})})]}),e.jsxs(Ft,{defaultValue:"posts",className:"w-full",children:[e.jsxs(zt,{className:"grid w-full grid-cols-2",children:[e.jsxs(os,{value:"posts",className:"text-xs",children:[e.jsx(we,{className:"w-4 h-4 mr-1"}),"내 글"]}),e.jsxs(os,{value:"replies",className:"text-xs",children:[e.jsx(te,{className:"w-4 h-4 mr-1"}),"내 답글"]})]}),e.jsx(ls,{value:"posts",className:"space-y-3 mt-4",children:U?e.jsx(v,{className:"hover:shadow-md transition-shadow cursor-pointer list-optimized","data-post-id":U.id,onClick:rs,children:e.jsx(b,{className:"p-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Fe,{variant:"outline",className:"text-xs",children:U.subCategory}),e.jsx("span",{className:"text-xs text-muted-foreground",children:U.timeAgo})]}),e.jsx("h3",{className:"font-medium text-sm",children:U.title}),e.jsx("div",{className:"flex items-center justify-between pt-2 border-t border-border",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(ve,{className:"w-3 h-3 text-amber-500"}),e.jsx("span",{className:"text-xs text-amber-600",children:U.lanterns})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(te,{className:"w-3 h-3 text-muted-foreground"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:U.comments})]})]})})]})})},U.id):e.jsx(v,{children:e.jsxs(b,{className:"p-8 text-center",children:[e.jsxs("div",{className:"relative mb-4",children:[e.jsx("div",{className:"absolute inset-0 bg-blue-500/30 dark:bg-blue-400/30 blur-2xl rounded-full"}),e.jsx("div",{className:"relative w-20 h-20 rounded-full bg-blue-100 dark:bg-blue-900/40 flex items-center justify-center border-4 border-blue-400 dark:border-blue-600 shadow-lg mx-auto",children:e.jsx(we,{className:"w-12 h-12 text-blue-900 dark:text-blue-200",strokeWidth:2.5})})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"아직 작성한 글이 없습니다. 궁금한 것을 편하게 질문해 보세요."})]})})}),e.jsx(ls,{value:"replies",className:"space-y-3 mt-4",children:L?e.jsx(v,{className:"hover:shadow-md transition-shadow cursor-pointer list-optimized","data-post-id":L.postId,"data-reply-id":L.id,onClick:ns,children:e.jsx(b,{className:"p-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-xs font-medium text-primary truncate max-w-[60%]",children:[L.postAuthor,"님의 글"]}),e.jsx("span",{className:"text-xs text-muted-foreground",children:L.timeAgo})]}),e.jsxs("h4",{className:"text-sm text-muted-foreground",children:['"',L.postTitle,'"']}),e.jsx("p",{className:"text-sm leading-relaxed",children:L.content}),e.jsxs("div",{className:"flex items-center space-x-1 pt-1",children:[e.jsx(ve,{className:"w-3 h-3 text-amber-500"}),e.jsx("span",{className:"text-xs text-amber-600",children:L.lanterns})]})]})})},L.id):e.jsx(v,{children:e.jsxs(b,{className:"p-8 text-center",children:[e.jsxs("div",{className:"relative mb-4",children:[e.jsx("div",{className:"absolute inset-0 bg-green-500/30 dark:bg-green-400/30 blur-2xl rounded-full"}),e.jsx("div",{className:"relative w-20 h-20 rounded-full bg-green-100 dark:bg-green-900/40 flex items-center justify-center border-4 border-green-400 dark:border-green-600 shadow-lg mx-auto",children:e.jsx(te,{className:"w-12 h-12 text-green-900 dark:text-green-200",strokeWidth:2.5})})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"아직 작성한 답글이 없습니다. 다른 사람의 질문에 비유와 예시로 답해 보세요."})]})})})]}),e.jsxs("div",{className:"space-y-2 mt-6",children:[ie&&e.jsxs(y,{variant:"ghost",className:"w-full justify-start p-4 h-auto",onClick:ie,children:[e.jsx(bt,{className:"w-5 h-5 mr-3 text-purple-500"}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-medium",children:"칭호 도감"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"비유노트에서 모은 칭호들을 한눈에 볼 수 있어요."})]})]}),q&&e.jsxs(y,{variant:"ghost",className:"w-full justify-start p-4 h-auto",onClick:q,children:[e.jsx(yt,{className:"w-5 h-5 mr-3 text-amber-500"}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-medium",children:"업적"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"질문과 답변으로 쌓인 나의 기록을 확인해 보세요."})]})]}),!1,S&&!O&&e.jsxs(y,{variant:"ghost",className:"w-full justify-start p-4 h-auto",onClick:O?()=>f.info("로그인 후 이용 가능합니다."):S,disabled:O,children:[e.jsx(vt,{className:"w-5 h-5 mr-3 text-red-500"}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-medium",children:"차단 관리"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"차단한 사용자 목록을 확인하고 해제할 수 있어요."})]})]}),e.jsxs(y,{variant:"ghost",className:"w-full justify-start p-4 h-auto",onClick:et,children:[e.jsx(wt,{className:"w-5 h-5 mr-3"}),e.jsx("div",{className:"text-left",children:e.jsx("p",{className:"font-medium",children:"설정"})})]}),e.jsxs(y,{variant:"ghost",className:"w-full justify-start p-4 h-auto text-destructive hover:text-destructive",onClick:zs,children:[e.jsx(ms,{className:"w-5 h-5 mr-3"}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-medium",children:"로그아웃"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"계정에서 로그아웃합니다"})]})]})]})]}),e.jsx(ze,{open:_e,onOpenChange:c,children:e.jsxs(ke,{className:"w-[340px] max-w-[90vw] max-h-[70vh] overflow-hidden flex flex-col",children:[e.jsxs(De,{children:[e.jsx(Se,{children:"최근 3일간 작성한 글"}),e.jsx(We,{children:"최근 3일 이내에 작성한 게시글 목록입니다."})]}),e.jsx("div",{className:"flex-1 overflow-y-auto space-y-2 py-2",children:es.length>0?es.map(l=>e.jsx(v,{"data-post-id":l.id,className:"cursor-pointer hover:shadow-md transition-shadow active:scale-[0.98]",onClick:rs,children:e.jsxs(b,{className:"p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx(Fe,{variant:"outline",className:"text-xs",children:l.subCategory||l.category}),e.jsx("span",{className:"text-xs text-muted-foreground",children:l.timeAgo})]}),e.jsx("h4",{className:"text-sm font-medium line-clamp-2",children:l.title}),e.jsxs("div",{className:"flex items-center space-x-3 mt-2",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(ve,{className:"w-3 h-3 text-amber-500"}),e.jsx("span",{className:"text-xs text-amber-600",children:l.lanterns})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(te,{className:"w-3 h-3 text-muted-foreground"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:l.comments})]})]})]})},l.id)):e.jsxs("div",{className:"py-8 text-center",children:[e.jsx(we,{className:"w-12 h-12 mx-auto mb-3 text-muted-foreground/40"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"최근 3일간 작성한 글이 없습니다"})]})}),e.jsx(y,{variant:"outline",onClick:rt,className:"mt-2",children:"닫기"})]})}),e.jsx(ze,{open:x,onOpenChange:N,children:e.jsxs(ke,{className:"w-[340px] max-w-[90vw] max-h-[70vh] overflow-hidden flex flex-col",children:[e.jsxs(De,{children:[e.jsx(Se,{children:"최근 3일간 작성한 답글"}),e.jsx(We,{children:"최근 3일 이내에 작성한 답글 목록입니다."})]}),e.jsx("div",{className:"flex-1 overflow-y-auto space-y-2 py-2",children:ss.length>0?ss.map(l=>e.jsx(v,{"data-post-id":l.postId,"data-reply-id":l.id,className:"cursor-pointer hover:shadow-md transition-shadow active:scale-[0.98]",onClick:ns,children:e.jsxs(b,{className:"p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsxs("span",{className:"text-xs font-medium text-primary truncate max-w-[60%]",children:[l.postAuthor,"님의 글"]}),e.jsx("span",{className:"text-xs text-muted-foreground",children:l.timeAgo})]}),e.jsxs("p",{className:"text-xs text-muted-foreground mb-1 line-clamp-1",children:['"',l.postTitle,'"']}),e.jsx("p",{className:"text-sm line-clamp-2",children:l.content}),e.jsxs("div",{className:"flex items-center space-x-1 mt-2",children:[e.jsx(ve,{className:"w-3 h-3 text-amber-500"}),e.jsx("span",{className:"text-xs text-amber-600",children:l.lanterns})]})]})},l.id)):e.jsxs("div",{className:"py-8 text-center",children:[e.jsx(te,{className:"w-12 h-12 mx-auto mb-3 text-muted-foreground/40"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"최근 3일간 작성한 답글이 없습니다"})]})}),e.jsx(y,{variant:"outline",onClick:nt,className:"mt-2",children:"닫기"})]})}),E&&e.jsx("div",{className:"fixed inset-0 z-[999] bg-black/60 backdrop-blur-sm flex items-center justify-center px-4",children:e.jsxs("div",{className:"w-[360px] max-w-full rounded-2xl border border-border/60 bg-card shadow-2xl shadow-black/20 p-6 space-y-5",children:[e.jsxs("div",{className:"flex flex-col items-center text-center space-y-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-accent/50 flex items-center justify-center shrink-0 mb-1",children:e.jsx(ms,{className:"w-6 h-6 text-muted-foreground"})}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-lg font-semibold text-foreground",children:"로그아웃 하시겠어요?"}),e.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:"계정에서 로그아웃하면 다시 로그인해야 합니다."})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 pt-2",children:[e.jsx("button",{className:"flex-1 h-11 rounded-xl border border-input bg-background hover:bg-accent hover:text-accent-foreground text-foreground font-medium transition-colors text-sm",onClick:Ws,children:"취소"}),e.jsx("button",{className:"flex-1 h-11 rounded-xl bg-primary text-primary-foreground hover:bg-primary/90 font-medium shadow-lg shadow-primary/20 transition-colors text-sm",onClick:Ve,children:"로그아웃"})]})]})}),Ie&&e.jsx("div",{className:"fixed inset-0 z-[999] bg-black/50 backdrop-blur-sm flex items-center justify-center px-4",children:e.jsxs("div",{className:"w-[360px] max-w-full rounded-lg border border-border bg-card p-6 shadow-2xl",children:[e.jsxs("div",{className:"flex flex-col space-y-1.5 text-left",children:[e.jsx("h3",{className:"text-lg font-semibold leading-none tracking-tight",children:"프로필 설명"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"비유노트에서 어떻게 배우고, 설명하고 싶은지 짧게 적어보세요."})]}),e.jsx("div",{className:"space-y-4 py-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"description",children:"설명"}),e.jsx(Ct,{id:"description",placeholder:"예: 비유와 예시로 다른 사람의 이해를 돕는 걸 좋아합니다.",value:Q,onChange:Xs,onCompositionEnd:st,maxLength:B,className:"min-h-[100px]",autoFocus:!0}),e.jsxs("div",{className:"text-right text-xs text-muted-foreground",children:[Q.length,"/",B]})]})}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(y,{variant:"outline",onClick:Zs,children:"취소"}),e.jsx(y,{onClick:O?()=>f.info("로그인 후 프로필 설명을 저장할 수 있습니다."):Ys,disabled:O,children:"저장"})]})]})})]})}export{br as MyPageScreen};
