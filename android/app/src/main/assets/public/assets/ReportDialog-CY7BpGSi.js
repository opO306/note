import{r as i,j as e}from"./index-BJjkZhAE.js";import{X as R,x as S,J as d,K as z,Q as F,B as h,s as v}from"./App-Cnx-z95_.js";import"./vendor-capacitor-Bm7NWSxP.js";import"./vendor-react-1wgkHQEd.js";import"./vendor-firebase-B8qz7irO.js";function T({children:r,onReport:b,open:m,onOpenChange:o,targetType:g="게시글",onSubmit:j}){const[a,u]=i.useState([]),[x,f]=i.useState(""),[y,N]=i.useState(!1),c=m!==void 0,n=c?m:y,t=i.useCallback(s=>{c&&o?o(s):N(s),s||setTimeout(()=>{u([]),f("")},200)},[c,o]);i.useEffect(()=>{if(n){document.body.style.overflow="hidden";const s=l=>{l.key==="Escape"&&t(!1)};return window.addEventListener("keydown",s),()=>{document.body.style.overflow="unset",window.removeEventListener("keydown",s)}}else{document.body.style.overflow="unset";return}},[n,t]);const k=[{value:"spam",label:"스팸 또는 광고"},{value:"harassment",label:"괴롭힘 또는 욕설"},{value:"inappropriate",label:"부적절한 내용"},{value:"copyright",label:"저작권 침해"},{value:"misinformation",label:"잘못된 정보"},{value:"other",label:"기타 사유"}],w=(s,l)=>{u(p=>l?[...p,s]:p.filter(E=>E!==s))},C=()=>{if(a.length===0){v.error("신고 사유를 최소 하나 이상 선택해주세요.");return}const s=j||b;s&&s(a,x),v.success("신고가 접수되었습니다."),t(!1)};return!n&&!r?null:e.jsxs(e.Fragment,{children:[r&&e.jsx("span",{onClick:()=>t(!0),className:"inline-block cursor-pointer",children:r}),n&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm transition-opacity animate-in fade-in duration-200",onClick:()=>t(!1)}),e.jsxs("div",{className:"relative z-50 w-full max-w-md p-6 mx-4 bg-background border border-border rounded-xl shadow-2xl animate-in zoom-in-95 fade-in duration-200",children:[e.jsxs("button",{onClick:()=>t(!1),className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",children:[e.jsx(R,{className:"w-4 h-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]}),e.jsxs("div",{className:"flex flex-col space-y-1.5 text-center sm:text-left mb-5",children:[e.jsxs("div",{className:"flex items-center gap-2 font-semibold leading-none tracking-tight text-lg text-destructive",children:[e.jsx(S,{className:"w-5 h-5"}),g," 신고하기"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"신고 사유를 선택해 주세요. 허위 신고 시 제재를 받을 수 있습니다."})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(d,{className:"text-sm font-medium",children:"신고 사유"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:k.map(s=>e.jsxs("div",{className:`flex items-start space-x-2 p-2 rounded-md border transition-colors ${a.includes(s.value)?"border-destructive/50 bg-destructive/5":"border-transparent hover:bg-muted"}`,children:[e.jsx(z,{id:s.value,checked:a.includes(s.value),onCheckedChange:l=>w(s.value,l)}),e.jsx(d,{htmlFor:s.value,className:"text-sm font-normal cursor-pointer leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 pt-0.5",children:s.label})]},s.value))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"report-details",className:"text-sm font-medium",children:"상세 내용 (선택)"}),e.jsx(F,{id:"report-details",placeholder:"신고 사유에 대해 자세히 적어주시면 처리에 도움이 됩니다.",value:x,onChange:s=>f(s.target.value),className:"min-h-[100px] resize-none"})]})]}),e.jsxs("div",{className:"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2 mt-6 pt-2",children:[e.jsx(h,{variant:"ghost",onClick:()=>t(!1),className:"mt-2 sm:mt-0",children:"취소"}),e.jsx(h,{variant:"destructive",onClick:C,disabled:a.length===0,children:"신고 접수"})]})]})]})]})}export{T as ReportDialog};
