import{j as e}from"./index-nq_z7WhA.js";import{B as m,g as c}from"./App-COUbzzsB.js";import{C as y,a as v}from"./card-DIbA5A_d.js";import{c as C}from"./MainScreenRefactored-BRHyWOom.js";import{t as x}from"./toastHelper-BQ6M3Cc4.js";import{S as q}from"./shopTitles-D4xbNovf.js";import{A as S}from"./arrow-left-Lp9IH1tN.js";import{S as p}from"./sparkles-7iSHoCyd.js";import{C as $}from"./compass-DDaLZSZd.js";import{C as L}from"./check-FzTHNnAz.js";import{L as A}from"./lock-8Sm5p2Vf.js";import{C as R}from"./circle-alert-CRxICFkj.js";import"./vendor-capacitor-rvH5hiNU.js";import"./vendor-react-1wgkHQEd.js";import"./vendor-firebase-D1NEqzdz.js";import"./index-Bjta6Ul0.js";import"./index-C-WI9JZT.js";import"./checkbox-CFUi8qYh.js";import"./avatar-CGdV8c0F.js";import"./alert-dialog-simple-C5oUXbYo.js";import"./firebaseCache-C_csZa1c.js";import"./profanityFilter-CmEWjjlv.js";import"./users-CgQI8rwE.js";import"./sun-BhpYpMxp.js";import"./award-B79nP1PI.js";function ae({onBack:h,userReplyLanterns:d,userGuideCount:n,userLumens:l,ownedTitles:f,currentTitle:u,onTitlePurchase:b,onTitleEquip:w}){const j=q.filter(s=>!s.hidden),o=s=>{const r=f.includes(s.id),t=u===s.id,a=s.requiredReplyLanterns<=d&&s.requiredGuideCount<=n,i=s.cost<=l;return{isOwned:r,isEquipped:t,isRequirementsMet:a,isAffordable:i}},g=s=>{const{isRequirementsMet:r,isAffordable:t}=o(s);if(!r){x.error("구매 조건을 먼저 달성해야 합니다.");return}if(!t){x.error(`루멘이 부족합니다! (필요: ${s.cost}, 보유: ${l})`);return}b(s.id,s.cost)};return e.jsxs("div",{className:"w-full h-full bg-background flex flex-col",children:[e.jsx("header",{className:"bg-card/95 backdrop-blur-xl border-b border-border flex-shrink-0 safe-top sticky top-0 z-10",children:e.jsx("div",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 min-w-0",children:[e.jsx(m,{variant:"ghost",size:"icon",onClick:h,className:"-ml-2 flex-shrink-0",children:e.jsx(S,{className:"w-5 h-5"})}),e.jsx("h1",{className:"font-medium text-lg truncate",children:"칭호 상점"})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-amber-500/10 px-3 py-1.5 rounded-full border border-amber-500/20 flex-shrink-0",children:[e.jsx(p,{className:"w-4 h-4 text-amber-500 fill-amber-500 flex-shrink-0"}),e.jsx("span",{className:"font-bold text-amber-600 dark:text-amber-400 tabular-nums whitespace-nowrap",children:l.toLocaleString()}),e.jsx("span",{className:"text-xs text-muted-foreground whitespace-nowrap",children:"루멘"})]})]})})}),e.jsx("div",{className:"flex-1 overflow-y-auto no-scrollbar p-4 space-y-3 pb-20",children:j.map(s=>{const{isOwned:r,isEquipped:t,isRequirementsMet:a,isAffordable:i}=o(s),N=!r&&!a?"opacity-70 bg-muted/40":"bg-card",k=t?"border-primary ring-1 ring-primary":!r&&!a?"border-dashed":"";return e.jsx(y,{className:`transition-all duration-200 relative overflow-hidden ${N} ${k}`,children:e.jsx(v,{className:"p-3 sm:p-4",children:e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between sm:gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0 space-y-2 sm:space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("h3",{className:"font-bold text-base truncate flex-1 min-w-0",children:s.name}),e.jsxs("div",{className:"flex items-center gap-1.5 flex-shrink-0",children:[t&&e.jsx(c,{className:"text-[10px] px-1.5 h-5 whitespace-nowrap",children:"착용 중"}),!r&&!a&&e.jsx(c,{variant:"outline",className:"text-[10px] px-1.5 h-5 text-muted-foreground whitespace-nowrap",children:"잠김"})]})]}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 break-words",children:s.description}),e.jsxs("div",{className:"flex flex-wrap items-center gap-1.5 sm:gap-2 text-xs",children:[e.jsxs("div",{className:`
                        flex items-center gap-1 sm:gap-1.5 px-1.5 py-0.5 sm:px-2 sm:py-1 rounded-md border flex-shrink-0
                        ${r?"bg-muted border-transparent text-muted-foreground":i?"bg-amber-500/10 border-amber-500/20 text-amber-700 dark:text-amber-400":"bg-red-500/10 border-red-500/20 text-red-600 dark:text-red-400"}
                      `,children:[e.jsx(p,{className:"w-3 h-3 sm:w-3.5 sm:h-3.5 flex-shrink-0"}),e.jsx("span",{className:"font-semibold tabular-nums whitespace-nowrap",children:s.cost.toLocaleString()}),e.jsx("span",{className:"text-[10px] opacity-80 whitespace-nowrap",children:"루멘"})]}),s.requiredReplyLanterns>0&&e.jsxs("div",{className:`
                          flex items-center gap-1 sm:gap-1.5 px-1.5 py-0.5 sm:px-2 sm:py-1 rounded-md border flex-shrink-0
                          ${s.requiredReplyLanterns>d?"bg-red-500/10 border-red-500/20 text-red-600 dark:text-red-400":"bg-muted border-border text-muted-foreground"}
                        `,children:[e.jsx(C,{className:"w-3 h-3 sm:w-3.5 sm:h-3.5 flex-shrink-0"}),e.jsxs("span",{className:"tabular-nums whitespace-nowrap",children:[d," / ",s.requiredReplyLanterns]})]}),s.requiredGuideCount>0&&e.jsxs("div",{className:`
                          flex items-center gap-1 sm:gap-1.5 px-1.5 py-0.5 sm:px-2 sm:py-1 rounded-md border flex-shrink-0
                          ${s.requiredGuideCount>n?"bg-red-500/10 border-red-500/20 text-red-600 dark:text-red-400":"bg-muted border-border text-muted-foreground"}
                        `,children:[e.jsx($,{className:"w-3 h-3 sm:w-3.5 sm:h-3.5 flex-shrink-0"}),e.jsxs("span",{className:"tabular-nums whitespace-nowrap",children:[n," / ",s.requiredGuideCount]})]})]})]}),e.jsx("div",{className:"flex-shrink-0 w-full sm:w-auto sm:self-start mt-1 sm:mt-0",children:r?t?e.jsxs(m,{disabled:!0,variant:"secondary",size:"sm",className:"w-full sm:w-auto min-w-[5rem] bg-primary/10 text-primary",children:[e.jsx(L,{className:"w-3.5 h-3.5 mr-1"}),"완료"]}):e.jsx(m,{size:"sm",variant:"outline",className:"w-full sm:w-auto min-w-[5rem]",onClick:()=>w(s.id),children:"착용"}):e.jsx(m,{size:"sm",disabled:!a||!i,onClick:()=>g(s),className:`w-full sm:w-auto min-w-[6rem] ${!a||!i?"opacity-80":""}`,variant:!a||!i?"secondary":"default",children:a?i?"구매하기":e.jsxs(e.Fragment,{children:[e.jsx(R,{className:"w-3.5 h-3.5 mr-1.5"}),e.jsx("span",{className:"text-xs",children:"부족"})]}):e.jsxs(e.Fragment,{children:[e.jsx(A,{className:"w-3.5 h-3.5 mr-1.5"}),e.jsx("span",{className:"text-xs",children:"잠김"})]})})})]})})},s.id)})})]})}export{ae as TitleShop};
