import{j as e}from"./index-BJjkZhAE.js";import{B as n,f as k,e as o,C as v,b as C,k as x,v as q,w as S,x as $,s as p}from"./App-Cnx-z95_.js";import{S as L}from"./shopTitles-NHVA0yfQ.js";import{C as R}from"./compass-DdDIcXqX.js";import{L as z}from"./lock-CRZRN9tI.js";import"./vendor-capacitor-Bm7NWSxP.js";import"./vendor-react-1wgkHQEd.js";import"./vendor-firebase-B8qz7irO.js";import"./award-CSx5UlBn.js";function P({onBack:b,userReplyLanterns:i,userGuideCount:c,userLumens:l,ownedTitles:u,currentTitle:h,onTitlePurchase:f,onTitleEquip:j}){const N=L,m=s=>{const r=u.includes(s.id),d=h===s.id,a=s.requiredReplyLanterns<=i&&s.requiredGuideCount<=c,t=s.cost<=l;return{isOwned:r,isEquipped:d,isRequirementsMet:a,isAffordable:t}},g=s=>{const{isRequirementsMet:r,isAffordable:d}=m(s);if(!r){p.error("구매 조건을 먼저 달성해야 합니다.");return}if(!d){p.error(`루멘이 부족합니다! (필요: ${s.cost}, 보유: ${l})`);return}f(s.id,s.cost)};return e.jsxs("div",{className:"w-full h-full bg-background flex flex-col",children:[e.jsx("header",{className:"bg-card/95 backdrop-blur-xl border-b border-border flex-shrink-0 safe-top sticky top-0 z-10",children:e.jsx("div",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 min-w-0",children:[e.jsx(n,{variant:"ghost",size:"icon",onClick:b,className:"-ml-2 flex-shrink-0",children:e.jsx(k,{className:"w-5 h-5"})}),e.jsx("h1",{className:"font-medium text-lg truncate",children:"칭호 상점"})]}),e.jsxs("div",{className:"flex items-center space-x-2 bg-amber-500/10 px-3 py-1.5 rounded-full border border-amber-500/20 flex-shrink-0",children:[e.jsx(o,{className:"w-4 h-4 text-amber-500 fill-amber-500 flex-shrink-0"}),e.jsx("span",{className:"font-bold text-amber-600 dark:text-amber-400 tabular-nums whitespace-nowrap",children:l.toLocaleString()}),e.jsx("span",{className:"text-xs text-muted-foreground whitespace-nowrap",children:"루멘"})]})]})})}),e.jsx("div",{className:"flex-1 overflow-y-auto no-scrollbar p-4 space-y-3 pb-20",children:N.map(s=>{const{isOwned:r,isEquipped:d,isRequirementsMet:a,isAffordable:t}=m(s),w=!r&&!a?"opacity-70 bg-muted/40":"bg-card",y=d?"border-primary ring-1 ring-primary":!r&&!a?"border-dashed":"";return e.jsx(v,{className:`transition-all duration-200 ${w} ${y}`,children:e.jsx(C,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("h3",{className:"font-bold text-base truncate",children:s.name}),d&&e.jsx(x,{className:"text-[10px] px-1.5 h-5",children:"착용 중"}),!r&&!a&&e.jsx(x,{variant:"outline",className:"text-[10px] px-1.5 h-5 text-muted-foreground",children:"잠김"})]}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:s.description}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs",children:[e.jsxs("div",{className:`
                        flex items-center gap-1.5 px-2 py-1 rounded-md border
                        ${r?"bg-muted border-transparent text-muted-foreground":t?"bg-amber-500/10 border-amber-500/20 text-amber-700 dark:text-amber-400":"bg-red-500/10 border-red-500/20 text-red-600 dark:text-red-400"}
                      `,children:[e.jsx(o,{className:"w-3.5 h-3.5"}),e.jsx("span",{className:"font-semibold tabular-nums",children:s.cost.toLocaleString()}),e.jsx("span",{className:"text-[10px] opacity-80",children:"루멘"})]}),s.requiredReplyLanterns>0&&e.jsxs("div",{className:`
                          flex items-center gap-1.5 px-2 py-1 rounded-md border
                          ${s.requiredReplyLanterns>i?"bg-red-500/10 border-red-500/20 text-red-600 dark:text-red-400":"bg-muted border-border text-muted-foreground"}
                        `,children:[e.jsx(q,{className:"w-3.5 h-3.5"}),e.jsxs("span",{className:"tabular-nums",children:[i," / ",s.requiredReplyLanterns]})]}),s.requiredGuideCount>0&&e.jsxs("div",{className:`
                          flex items-center gap-1.5 px-2 py-1 rounded-md border
                          ${s.requiredGuideCount>c?"bg-red-500/10 border-red-500/20 text-red-600 dark:text-red-400":"bg-muted border-border text-muted-foreground"}
                        `,children:[e.jsx(R,{className:"w-3.5 h-3.5"}),e.jsxs("span",{className:"tabular-nums",children:[c," / ",s.requiredGuideCount]})]})]})]}),e.jsx("div",{className:"flex-shrink-0 pt-2 sm:pt-0 self-end sm:self-center",children:r?d?e.jsxs(n,{disabled:!0,variant:"secondary",size:"sm",className:"min-w-[5rem] bg-primary/10 text-primary",children:[e.jsx(S,{className:"w-3.5 h-3.5 mr-1"}),"완료"]}):e.jsx(n,{size:"sm",variant:"outline",className:"min-w-[5rem]",onClick:()=>j(s.id),children:"착용"}):e.jsx(n,{size:"sm",disabled:!a||!t,onClick:()=>g(s),className:`min-w-[6rem] ${!a||!t?"opacity-80":""}`,variant:!a||!t?"secondary":"default",children:a?t?"구매하기":e.jsxs(e.Fragment,{children:[e.jsx($,{className:"w-3.5 h-3.5 mr-1.5"}),e.jsx("span",{className:"text-xs",children:"부족"})]}):e.jsxs(e.Fragment,{children:[e.jsx(z,{className:"w-3.5 h-3.5 mr-1.5"}),e.jsx("span",{className:"text-xs",children:"잠김"})]})})})]})})},s.id)})})]})}export{P as TitleShop};
