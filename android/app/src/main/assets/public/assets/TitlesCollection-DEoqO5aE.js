import{r as E,j as e}from"./index-Dk92xA2w.js";import{C,a as H}from"./card-BTNeCppV.js";import{B as v,g as y}from"./App-Bs6YIlvy.js";import{t as _}from"./toastHelper-CmqwgrpB.js";import{d as I,G as S,T as B,c as L}from"./MainScreenRefactored-Cnk3o5eP.js";import{S as A}from"./shopTitles-Dec_RQfh.js";import{A as $}from"./arrow-left-BKP0x_yl.js";import{S as b}from"./sparkles-BV-B8Lrs.js";import{L as N}from"./lock-BlxSE2Lo.js";import{C as z}from"./compass-Br1pEBh_.js";import"./vendor-capacitor-rvH5hiNU.js";import"./vendor-react-1wgkHQEd.js";import"./vendor-firebase-C8ERkm_B.js";import"./index-DKlU3y7i.js";import"./index-SzzsopSI.js";import"./checkbox-BNqRj2KP.js";import"./check-CFbpOADo.js";import"./avatar-BVorKTXF.js";import"./alert-dialog-simple-CJo3HBbI.js";import"./firebaseCache-C_csZa1c.js";import"./profanityFilter-CmEWjjlv.js";import"./users-D58BOHBF.js";import"./sun-aJJImKwH.js";import"./award-BF7_xMcg.js";const k=A.map(n=>({...n,type:"shop"})),w=[{id:"explore_brave_questioner",name:"용기 있는 질문러",description:"부끄러움을 이겨내고 질문 글을 5개 작성했습니다",type:"achievement"},{id:"explore_steady_questioner",name:"꾸준한 질문러",description:"포기하지 않고 질문 글을 20개 작성했습니다",type:"achievement"},{id:"explore_seeker",name:"탐색자",description:"질문 글을 10개 작성했습니다",type:"achievement"},{id:"explore_inquirer",name:"질문자",description:"질문 글을 30개 작성했습니다",type:"achievement"},{id:"explore_investigator",name:"조사자",description:"질문 글을 100개 작성했습니다",type:"achievement"},{id:"explore_philosopher",name:"사색가",description:"질문 글을 300개 작성했습니다",type:"achievement"},{id:"reply_challenger",name:"도전하는 답변가",description:"완벽하지 않아도 답변을 10개 시도했습니다",type:"achievement"},{id:"reply_persistent_helper",name:"끈기 있는 답변가",description:"도움을 주기 위해 답변 50개를 남겼습니다",type:"achievement"},{id:"reply_helper",name:"조력자",description:"등불 10개 이상 받은 답변을 10개 작성했습니다",type:"achievement"},{id:"reply_advisor",name:"조언자",description:"등불 10개 이상 받은 답변을 30개 작성했습니다",type:"achievement"},{id:"reply_mentor",name:"멘토",description:"등불 10개 이상 받은 답변을 100개 작성했습니다",type:"achievement"},{id:"reply_scholar",name:"학자",description:"등불 10개 이상 받은 답변을 300개 작성했습니다",type:"achievement"},{id:"guide_guide",name:"가이드",description:"길잡이로 5회 채택되었습니다",type:"achievement"},{id:"guide_navigator",name:"내비게이터",description:"길잡이로 20회 채택되었습니다",type:"achievement"},{id:"guide_luminary",name:"선도자",description:"길잡이로 100회 채택되었습니다",type:"achievement"},{id:"lantern_candle",name:"촛불",description:"등불을 50개 받았습니다",type:"achievement"},{id:"lantern_campfire",name:"모닥불",description:"등불을 200개 받았습니다",type:"achievement"},{id:"lantern_lantern",name:"랜턴",description:"등불을 500개 받았습니다",type:"achievement"},{id:"lantern_furnace",name:"용광로",description:"등불을 1500개 받았습니다",type:"achievement"},{id:"lantern_giver_small",name:"좋아요 요정",description:"다른 사람 글에 등불 50개를 켰습니다",type:"achievement"},{id:"lantern_giver_captain",name:"응원단장",description:"다른 사람 글에 등불 200개를 켰습니다",type:"achievement"},{id:"share_sharer",name:"공유자",description:"인기 공유 글을 10개 작성했습니다",type:"achievement"},{id:"share_curator",name:"큐레이터",description:"인기 공유 글을 30개 작성했습니다",type:"achievement"},{id:"share_publisher",name:"발행자",description:"인기 공유 글을 100개 작성했습니다",type:"achievement"},{id:"share_archivist",name:"기록 관리자",description:"인기 공유 글을 300개 작성했습니다",type:"achievement"},{id:"streak_visitor",name:"방문자",description:"연속 7일 로그인했습니다",type:"achievement"},{id:"streak_regular",name:"단골",description:"연속 30일 로그인했습니다",type:"achievement"},{id:"streak_resident",name:"주민",description:"연속 100일 로그인했습니다",type:"achievement"},{id:"streak_pillar",name:"기둥",description:"연속 365일 로그인했습니다",type:"achievement"},{id:"captain_captain",name:"선장",description:"선원 100명을 모았습니다",type:"achievement"},{id:"economy_analyst",name:"경제 분석인",description:"경제 분야 답변 활동을 했습니다",type:"achievement"},{id:"economy_expert",name:"경제 길잡이",description:"경제 분야를 함께 탐색하는 길잡이입니다",type:"achievement"},{id:"it_consultant",name:"기술 상담인",description:"IT 분야 답변 활동을 했습니다",type:"achievement"},{id:"it_expert",name:"기술 이야기꾼",description:"IT 분야를 함께 탐색하는 이야기꾼입니다",type:"achievement"},{id:"language_tutor",name:"언어 튜터",description:"외국어 분야 답변 활동을 했습니다",type:"achievement"},{id:"language_expert",name:"언어 항해사",description:"외국어 분야를 함께 탐색하는 항해사입니다",type:"achievement"},{id:"engineering_curious",name:"변수 연구자",description:"공학 분야 질문을 많이 했습니다",type:"achievement"},{id:"engineering_first_light",name:"공학자의 첫 등불",description:"공학 분야에서 첫 인정을 받았습니다",type:"achievement"},{id:"engineering_destroyer",name:"방정식 해결사",description:"공학 분야 답변을 많이 했습니다",type:"achievement"},{id:"multi_specialist",name:"다중 분야 항해사",description:"3개 분야에서 길잡이 칭호를 획득했습니다",type:"achievement",isHidden:!0},{id:"discussion_expert",name:"마라톤 토론러",description:"한 글에서 답변을 15회 이상 주고받았습니다",type:"achievement",isHidden:!0},{id:"best_contributor",name:"베스트 컨트리뷰터",description:"한 글에서 등불 100개 이상을 받았습니다",type:"achievement",isHidden:!0},{id:"community_fellow",name:"커뮤니티 펠로우",description:"모든 기본 칭호 3단계를 달성했습니다",type:"achievement",isHidden:!0},{id:"honorary_scholar",name:"명예 학자",description:"모든 기본 칭호 4단계를 달성했습니다",type:"achievement",isHidden:!0},{id:"lantern_giver",name:"등불 나눔이",description:"등불 500개를 나누어 주었습니다",type:"achievement",isHidden:!0},{id:"engineering_focused",name:"함수 마스터",description:"공학 카테고리에만 집중했습니다",type:"achievement",isHidden:!0},{id:"diligent_visitor",name:"성실한 방문자",description:"최근 30일 중 27일 이상 로그인했습니다",type:"achievement",isHidden:!0},{id:"popular_questioner",name:"인기 질문러",description:"많은 공감을 받은 질문을 작성했습니다",type:"achievement",isHidden:!0},{id:"specialized_replier",name:"특화 답변가",description:"한 카테고리를 깊게 파고들었습니다",type:"achievement",isHidden:!0}];function ce({onBack:n,userTitles:t,equippedTitle:a,onTitleEquip:m,onTitleUnequip:l,isGuest:d}){const{visibleAchievementTitles:c,ownedHiddenTitles:h,shopTitles:r,totalStats:p}=E.useMemo(()=>{const i=w.filter(o=>!o.isHidden),s=w.filter(o=>o.isHidden&&t.includes(o.id)),f=[...k,...i,...s],j=t.filter(o=>f.some(q=>q.id===o)).length,x=f.length,T=x>0?Math.round(j/x*100):0;return{visibleAchievementTitles:i,ownedHiddenTitles:s,shopTitles:k,totalStats:{unlockedCount:j,totalCount:x,percentage:T}}},[t]);return e.jsxs("div",{className:"w-full h-full bg-background flex flex-col",children:[e.jsx("header",{className:"bg-card/95 backdrop-blur-xl border-b border-border flex-shrink-0 safe-top sticky top-0 z-10",children:e.jsx("div",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(v,{variant:"ghost",size:"icon",onClick:n,className:"-ml-2",children:e.jsx($,{className:"w-5 h-5"})}),e.jsx("h1",{className:"font-medium text-lg",children:"칭호 도감"})]})})}),e.jsxs("div",{className:"flex-1 overflow-y-auto no-scrollbar p-4 space-y-6 pb-24",children:[e.jsx(C,{className:"bg-gradient-to-br from-purple-500/10 via-background to-background border-purple-200/50 dark:border-purple-800/50",children:e.jsx(H,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(I,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"}),e.jsx("span",{className:"text-lg font-bold text-foreground",children:"수집 현황"})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["총 ",p.totalCount,"개 중 ",p.unlockedCount,"개 획득"]})]}),e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsxs("span",{className:"text-3xl font-bold text-purple-600 dark:text-purple-400 tabular-nums",children:[p.percentage,"%"]}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"달성률"})]})]})})}),e.jsx(u,{icon:e.jsx(S,{className:"w-5 h-5 text-indigo-500"}),title:"일반 칭호",count:r.length}),e.jsx("div",{className:"space-y-2",children:r.map(i=>e.jsx(g,{title:i,isUnlocked:t.includes(i.id),isEquipped:a===i.id,onEquip:m,onUnequip:l,variant:"shop",isGuest:d},i.id))}),h.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(u,{icon:e.jsx(b,{className:"w-5 h-5 text-amber-500"}),title:"히든 칭호",count:h.length}),e.jsx("div",{className:"space-y-2",children:h.map(i=>e.jsx(g,{title:i,isUnlocked:!0,isEquipped:a===i.id,onEquip:m,onUnequip:l,variant:"hidden",isGuest:d},i.id))})]}),e.jsx(u,{icon:e.jsx(B,{className:"w-5 h-5 text-slate-500"}),title:"업적 칭호",count:c.length}),e.jsx("div",{className:"space-y-2",children:c.map(i=>e.jsx(g,{title:i,isUnlocked:t.includes(i.id),isEquipped:a===i.id,onEquip:m,onUnequip:l,variant:"achievement",isGuest:d},i.id))})]})]})}function u({icon:n,title:t,count:a}){return e.jsxs("div",{className:"flex items-center gap-2 px-1 pt-2",children:[n,e.jsx("h3",{className:"text-lg font-bold text-foreground",children:t}),e.jsxs(y,{variant:"outline",className:"text-xs ml-auto",children:[a,"개"]})]})}function g({title:n,isUnlocked:t,isEquipped:a,onEquip:m,onUnequip:l,variant:d,isGuest:c}){const r={shop:{activeBg:"bg-indigo-50/80 dark:bg-indigo-950/20 border-indigo-200 dark:border-indigo-800",iconBg:"bg-indigo-100 dark:bg-indigo-900/40",iconColor:"text-indigo-600 dark:text-indigo-400",Icon:S,badge:"bg-indigo-600"},hidden:{activeBg:"bg-amber-50/80 dark:bg-amber-950/20 border-amber-200 dark:border-amber-800",iconBg:"bg-amber-100 dark:bg-amber-900/40",iconColor:"text-amber-600 dark:text-amber-400",Icon:b,badge:"bg-amber-600"},achievement:{activeBg:"bg-slate-50/80 dark:bg-slate-900/40 border-slate-200 dark:border-slate-800",iconBg:"bg-slate-200 dark:bg-slate-800",iconColor:"text-slate-600 dark:text-slate-400",Icon:B,badge:"bg-slate-600"}}[d],{Icon:p}=r,i=d==="shop",s=n;return e.jsx(C,{className:`transition-all duration-200 min-h-[88px] ${t?`${r.activeBg} shadow-sm`:"opacity-60 bg-muted/30 border-dashed border-border"}`,children:e.jsx(H,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[e.jsx("div",{className:`p-2.5 rounded-lg shrink-0 ${t?r.iconBg:"bg-muted"}`,children:t?e.jsx(p,{className:`w-5 h-5 ${r.iconColor}`}):e.jsx(N,{className:"w-5 h-5 text-muted-foreground/50"})}),e.jsxs("div",{className:"flex-1 min-w-0 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:`font-bold truncate ${t?"text-foreground":"text-muted-foreground"}`,children:n.name}),a&&e.jsx(y,{variant:"default",className:`text-[10px] px-1.5 h-5 ${r.badge} text-white shrink-0`,children:"장착 중"}),d==="hidden"&&e.jsx(y,{variant:"outline",className:"text-[10px] px-1.5 h-5 border-amber-500/50 text-amber-600 shrink-0",children:"히든"})]}),e.jsx("p",{className:"text-[10px] text-muted-foreground whitespace-nowrap overflow-hidden text-ellipsis",children:n.description}),!t&&i&&e.jsxs("div",{className:"flex flex-wrap items-center gap-x-3 gap-y-1 mt-2 text-[10px]",children:[e.jsxs("div",{className:"flex items-center gap-1 text-amber-600 dark:text-amber-500",children:[e.jsx(b,{className:"w-3 h-3"}),e.jsxs("span",{className:"font-medium",children:[s.cost," 루멘"]})]}),(s.requiredReplyLanterns>0||s.requiredGuideCount>0)&&e.jsx("div",{className:"w-px h-2 bg-border"}),s.requiredReplyLanterns>0&&e.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[e.jsx(L,{className:"w-3 h-3"}),e.jsxs("span",{children:["등불 ",s.requiredReplyLanterns,"개"]})]}),s.requiredGuideCount>0&&e.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[e.jsx(z,{className:"w-3 h-3"}),e.jsxs("span",{children:["길잡이 ",s.requiredGuideCount,"회"]})]})]})]})]}),e.jsx("div",{className:"shrink-0",children:t?a?e.jsx(v,{size:"sm",variant:"outline",onClick:c?()=>_.info("로그인 후 칭호를 해제할 수 있습니다."):l,className:"h-8 text-xs",disabled:c,children:"해제"}):e.jsx(v,{size:"sm",onClick:c?()=>_.info("로그인 후 칭호를 장착할 수 있습니다."):()=>m(n.id),className:"h-8 text-xs",disabled:c,children:"장착"}):e.jsxs("div",{className:"flex items-center text-xs text-muted-foreground bg-muted/50 px-2 py-1.5 rounded",children:[e.jsx(N,{className:"w-3 h-3 mr-1.5 opacity-70"}),"미획득"]})})]})})})}export{ce as TitlesCollection};
