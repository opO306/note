import{r as s,j as e}from"./index-BJjkZhAE.js";import{i as qe,ag as Pe,Z as Ze,an as Je,aj as Qe,ai as Ot,ao as Lt,ap as Ft,ak as xe,aq as Gt,W as se,$ as g,ar as Kt,_ as X,as as Ut,at as Bt,au as $t,av as Vt,aw as zt,ax as Wt,ay as Ht,Y as Yt,ah as Ke,H as et,s as te,O as Ue,az as Ne,B as Ce,C as R,b as E,U as Xt,q as _e,T as qt,y as Zt,v as ye,V as Jt,k as Qt,R as en}from"./App-Cnx-z95_.js";import{d as tn,e as tt,I as nn,R as rn,T as on,a as sn,b as Be,c as $e}from"./tabs-C8huRtv9.js";import{A as Ve}from"./AppHeader-DUFlu2QS.js";import{FollowListScreen as ze}from"./FollowListScreen-aYwitBPr.js";import{MyContentListScreen as We}from"./MyContentListScreen-BInmtueT.js";import{a5 as an,a4 as cn}from"./vendor-firebase-B8qz7irO.js";import{T as ln}from"./triangle-alert-DhDogudD.js";import{U as He}from"./user-check-B7uLcgpX.js";import{S as dn}from"./shield-check-BZnO_jG9.js";import{F as Ye}from"./file-text-BzSwTf16.js";import"./vendor-capacitor-Bm7NWSxP.js";import"./vendor-react-1wgkHQEd.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const un=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],fn=qe("ellipsis-vertical",un);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mn=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],xn=qe("user-plus",mn);function pn(t){const r=hn(t),n=s.forwardRef((o,a)=>{const{children:c,...d}=o,l=s.Children.toArray(c),m=l.find(vn);if(m){const x=m.props.children,f=l.map(i=>i===m?s.Children.count(x)>1?s.Children.only(null):s.isValidElement(x)?x.props.children:null:i);return e.jsx(r,{...d,ref:a,children:s.isValidElement(x)?s.cloneElement(x,void 0,f):null})}return e.jsx(r,{...d,ref:a,children:c})});return n.displayName=`${t}.Slot`,n}function hn(t){const r=s.forwardRef((n,o)=>{const{children:a,...c}=n;if(s.isValidElement(a)){const d=bn(a),l=wn(c,a.props);return a.type!==s.Fragment&&(l.ref=o?Pe(o,d):d),s.cloneElement(a,l)}return s.Children.count(a)>1?s.Children.only(null):null});return r.displayName=`${t}.SlotClone`,r}var gn=Symbol("radix.slottable");function vn(t){return s.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===gn}function wn(t,r){const n={...r};for(const o in r){const a=t[o],c=r[o];/^on[A-Z]/.test(o)?a&&c?n[o]=(...l)=>{const m=c(...l);return a(...l),m}:a&&(n[o]=a):o==="style"?n[o]={...a,...c}:o==="className"&&(n[o]=[a,c].filter(Boolean).join(" "))}return{...t,...n}}function bn(t){let r=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=r&&"isReactWarning"in r&&r.isReactWarning;return n?t.ref:(r=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=r&&"isReactWarning"in r&&r.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Ee=["Enter"," "],jn=["ArrowDown","PageUp","Home"],nt=["ArrowUp","PageDown","End"],Mn=[...jn,...nt],Nn={ltr:[...Ee,"ArrowRight"],rtl:[...Ee,"ArrowLeft"]},Cn={ltr:["ArrowLeft"],rtl:["ArrowRight"]},ae="Menu",[re,_n,yn]=tn(ae),[V,rt]=Ze(ae,[yn,Je,tt]),pe=Je(),ot=tt(),[Rn,z]=V(ae),[En,ce]=V(ae),st=t=>{const{__scopeMenu:r,open:n=!1,children:o,dir:a,onOpenChange:c,modal:d=!0}=t,l=pe(r),[m,x]=s.useState(null),f=s.useRef(!1),i=Qe(c),h=Ot(a);return s.useEffect(()=>{const M=()=>{f.current=!0,document.addEventListener("pointerdown",v,{capture:!0,once:!0}),document.addEventListener("pointermove",v,{capture:!0,once:!0})},v=()=>f.current=!1;return document.addEventListener("keydown",M,{capture:!0}),()=>{document.removeEventListener("keydown",M,{capture:!0}),document.removeEventListener("pointerdown",v,{capture:!0}),document.removeEventListener("pointermove",v,{capture:!0})}},[]),e.jsx(Lt,{...l,children:e.jsx(Rn,{scope:r,open:n,onOpenChange:i,content:m,onContentChange:x,children:e.jsx(En,{scope:r,onClose:s.useCallback(()=>i(!1),[i]),isUsingKeyboardRef:f,dir:h,modal:d,children:o})})})};st.displayName=ae;var Pn="MenuAnchor",Se=s.forwardRef((t,r)=>{const{__scopeMenu:n,...o}=t,a=pe(n);return e.jsx(Ft,{...a,...o,ref:r})});Se.displayName=Pn;var De="MenuPortal",[Sn,at]=V(De,{forceMount:void 0}),ct=t=>{const{__scopeMenu:r,forceMount:n,children:o,container:a}=t,c=z(De,r);return e.jsx(Sn,{scope:r,forceMount:n,children:e.jsx(xe,{present:n||c.open,children:e.jsx(Gt,{asChild:!0,container:a,children:o})})})};ct.displayName=De;var P="MenuContent",[Dn,Ie]=V(P),it=s.forwardRef((t,r)=>{const n=at(P,t.__scopeMenu),{forceMount:o=n.forceMount,...a}=t,c=z(P,t.__scopeMenu),d=ce(P,t.__scopeMenu);return e.jsx(re.Provider,{scope:t.__scopeMenu,children:e.jsx(xe,{present:o||c.open,children:e.jsx(re.Slot,{scope:t.__scopeMenu,children:d.modal?e.jsx(In,{...a,ref:r}):e.jsx(kn,{...a,ref:r})})})})}),In=s.forwardRef((t,r)=>{const n=z(P,t.__scopeMenu),o=s.useRef(null),a=se(r,o);return s.useEffect(()=>{const c=o.current;if(c)return Kt(c)},[]),e.jsx(ke,{...t,ref:a,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:g(t.onFocusOutside,c=>c.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),kn=s.forwardRef((t,r)=>{const n=z(P,t.__scopeMenu);return e.jsx(ke,{...t,ref:r,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),An=pn("MenuContent.ScrollLock"),ke=s.forwardRef((t,r)=>{const{__scopeMenu:n,loop:o=!1,trapFocus:a,onOpenAutoFocus:c,onCloseAutoFocus:d,disableOutsidePointerEvents:l,onEntryFocus:m,onEscapeKeyDown:x,onPointerDownOutside:f,onFocusOutside:i,onInteractOutside:h,onDismiss:M,disableOutsideScroll:v,...S}=t,k=z(P,n),D=ce(P,n),W=pe(n),H=ot(n),q=_n(n),[ve,ie]=s.useState(null),F=s.useRef(null),b=se(r,F,k.onContentChange),$=s.useRef(0),Y=s.useRef(""),we=s.useRef(0),G=s.useRef(null),C=s.useRef("right"),K=s.useRef(0),be=v?$t:s.Fragment,je=v?{as:An,allowPinchZoom:!0}:void 0,Me=u=>{const B=Y.current+u,T=q().filter(w=>!w.disabled),p=document.activeElement,Z=T.find(w=>w.ref.current===p)?.textValue,J=T.map(w=>w.textValue),le=Wn(J,B,Z),O=T.find(w=>w.textValue===le)?.ref.current;(function w(de){Y.current=de,window.clearTimeout($.current),de!==""&&($.current=window.setTimeout(()=>w(""),1e3))})(B),O&&setTimeout(()=>O.focus())};s.useEffect(()=>()=>window.clearTimeout($.current),[]),Bt();const U=s.useCallback(u=>C.current===G.current?.side&&Yn(u,G.current?.area),[]);return e.jsx(Dn,{scope:n,searchRef:Y,onItemEnter:s.useCallback(u=>{U(u)&&u.preventDefault()},[U]),onItemLeave:s.useCallback(u=>{U(u)||(F.current?.focus(),ie(null))},[U]),onTriggerLeave:s.useCallback(u=>{U(u)&&u.preventDefault()},[U]),pointerGraceTimerRef:we,onPointerGraceIntentChange:s.useCallback(u=>{G.current=u},[]),children:e.jsx(be,{...je,children:e.jsx(Vt,{asChild:!0,trapped:a,onMountAutoFocus:g(c,u=>{u.preventDefault(),F.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:d,children:e.jsx(zt,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:x,onPointerDownOutside:f,onFocusOutside:i,onInteractOutside:h,onDismiss:M,children:e.jsx(rn,{asChild:!0,...H,dir:D.dir,orientation:"vertical",loop:o,currentTabStopId:ve,onCurrentTabStopIdChange:ie,onEntryFocus:g(m,u=>{D.isUsingKeyboardRef.current||u.preventDefault()}),preventScrollOnEntryFocus:!0,children:e.jsx(Wt,{role:"menu","aria-orientation":"vertical","data-state":Ct(k.open),"data-radix-menu-content":"",dir:D.dir,...W,...S,ref:b,style:{outline:"none",...S.style},onKeyDown:g(S.onKeyDown,u=>{const T=u.target.closest("[data-radix-menu-content]")===u.currentTarget,p=u.ctrlKey||u.altKey||u.metaKey,Z=u.key.length===1;T&&(u.key==="Tab"&&u.preventDefault(),!p&&Z&&Me(u.key));const J=F.current;if(u.target!==J||!Mn.includes(u.key))return;u.preventDefault();const O=q().filter(w=>!w.disabled).map(w=>w.ref.current);nt.includes(u.key)&&O.reverse(),Vn(O)}),onBlur:g(t.onBlur,u=>{u.currentTarget.contains(u.target)||(window.clearTimeout($.current),Y.current="")}),onPointerMove:g(t.onPointerMove,oe(u=>{const B=u.target,T=K.current!==u.clientX;if(u.currentTarget.contains(B)&&T){const p=u.clientX>K.current?"right":"left";C.current=p,K.current=u.clientX}}))})})})})})})});it.displayName=P;var Tn="MenuGroup",Ae=s.forwardRef((t,r)=>{const{__scopeMenu:n,...o}=t;return e.jsx(X.div,{role:"group",...o,ref:r})});Ae.displayName=Tn;var On="MenuLabel",lt=s.forwardRef((t,r)=>{const{__scopeMenu:n,...o}=t;return e.jsx(X.div,{...o,ref:r})});lt.displayName=On;var fe="MenuItem",Xe="menu.itemSelect",he=s.forwardRef((t,r)=>{const{disabled:n=!1,onSelect:o,...a}=t,c=s.useRef(null),d=ce(fe,t.__scopeMenu),l=Ie(fe,t.__scopeMenu),m=se(r,c),x=s.useRef(!1),f=()=>{const i=c.current;if(!n&&i){const h=new CustomEvent(Xe,{bubbles:!0,cancelable:!0});i.addEventListener(Xe,M=>o?.(M),{once:!0}),Ut(i,h),h.defaultPrevented?x.current=!1:d.onClose()}};return e.jsx(dt,{...a,ref:m,disabled:n,onClick:g(t.onClick,f),onPointerDown:i=>{t.onPointerDown?.(i),x.current=!0},onPointerUp:g(t.onPointerUp,i=>{x.current||i.currentTarget?.click()}),onKeyDown:g(t.onKeyDown,i=>{const h=l.searchRef.current!=="";n||h&&i.key===" "||Ee.includes(i.key)&&(i.currentTarget.click(),i.preventDefault())})})});he.displayName=fe;var dt=s.forwardRef((t,r)=>{const{__scopeMenu:n,disabled:o=!1,textValue:a,...c}=t,d=Ie(fe,n),l=ot(n),m=s.useRef(null),x=se(r,m),[f,i]=s.useState(!1),[h,M]=s.useState("");return s.useEffect(()=>{const v=m.current;v&&M((v.textContent??"").trim())},[c.children]),e.jsx(re.ItemSlot,{scope:n,disabled:o,textValue:a??h,children:e.jsx(nn,{asChild:!0,...l,focusable:!o,children:e.jsx(X.div,{role:"menuitem","data-highlighted":f?"":void 0,"aria-disabled":o||void 0,"data-disabled":o?"":void 0,...c,ref:x,onPointerMove:g(t.onPointerMove,oe(v=>{o?d.onItemLeave(v):(d.onItemEnter(v),v.defaultPrevented||v.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:g(t.onPointerLeave,oe(v=>d.onItemLeave(v))),onFocus:g(t.onFocus,()=>i(!0)),onBlur:g(t.onBlur,()=>i(!1))})})})}),Ln="MenuCheckboxItem",ut=s.forwardRef((t,r)=>{const{checked:n=!1,onCheckedChange:o,...a}=t;return e.jsx(ht,{scope:t.__scopeMenu,checked:n,children:e.jsx(he,{role:"menuitemcheckbox","aria-checked":me(n)?"mixed":n,...a,ref:r,"data-state":Oe(n),onSelect:g(a.onSelect,()=>o?.(me(n)?!0:!n),{checkForDefaultPrevented:!1})})})});ut.displayName=Ln;var ft="MenuRadioGroup",[Fn,Gn]=V(ft,{value:void 0,onValueChange:()=>{}}),mt=s.forwardRef((t,r)=>{const{value:n,onValueChange:o,...a}=t,c=Qe(o);return e.jsx(Fn,{scope:t.__scopeMenu,value:n,onValueChange:c,children:e.jsx(Ae,{...a,ref:r})})});mt.displayName=ft;var xt="MenuRadioItem",pt=s.forwardRef((t,r)=>{const{value:n,...o}=t,a=Gn(xt,t.__scopeMenu),c=n===a.value;return e.jsx(ht,{scope:t.__scopeMenu,checked:c,children:e.jsx(he,{role:"menuitemradio","aria-checked":c,...o,ref:r,"data-state":Oe(c),onSelect:g(o.onSelect,()=>a.onValueChange?.(n),{checkForDefaultPrevented:!1})})})});pt.displayName=xt;var Te="MenuItemIndicator",[ht,Kn]=V(Te,{checked:!1}),gt=s.forwardRef((t,r)=>{const{__scopeMenu:n,forceMount:o,...a}=t,c=Kn(Te,n);return e.jsx(xe,{present:o||me(c.checked)||c.checked===!0,children:e.jsx(X.span,{...a,ref:r,"data-state":Oe(c.checked)})})});gt.displayName=Te;var Un="MenuSeparator",vt=s.forwardRef((t,r)=>{const{__scopeMenu:n,...o}=t;return e.jsx(X.div,{role:"separator","aria-orientation":"horizontal",...o,ref:r})});vt.displayName=Un;var Bn="MenuArrow",wt=s.forwardRef((t,r)=>{const{__scopeMenu:n,...o}=t,a=pe(n);return e.jsx(Ht,{...a,...o,ref:r})});wt.displayName=Bn;var $n="MenuSub",[oo,bt]=V($n),ne="MenuSubTrigger",jt=s.forwardRef((t,r)=>{const n=z(ne,t.__scopeMenu),o=ce(ne,t.__scopeMenu),a=bt(ne,t.__scopeMenu),c=Ie(ne,t.__scopeMenu),d=s.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:m}=c,x={__scopeMenu:t.__scopeMenu},f=s.useCallback(()=>{d.current&&window.clearTimeout(d.current),d.current=null},[]);return s.useEffect(()=>f,[f]),s.useEffect(()=>{const i=l.current;return()=>{window.clearTimeout(i),m(null)}},[l,m]),e.jsx(Se,{asChild:!0,...x,children:e.jsx(dt,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":a.contentId,"data-state":Ct(n.open),...t,ref:Pe(r,a.onTriggerChange),onClick:i=>{t.onClick?.(i),!(t.disabled||i.defaultPrevented)&&(i.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:g(t.onPointerMove,oe(i=>{c.onItemEnter(i),!i.defaultPrevented&&!t.disabled&&!n.open&&!d.current&&(c.onPointerGraceIntentChange(null),d.current=window.setTimeout(()=>{n.onOpenChange(!0),f()},100))})),onPointerLeave:g(t.onPointerLeave,oe(i=>{f();const h=n.content?.getBoundingClientRect();if(h){const M=n.content?.dataset.side,v=M==="right",S=v?-5:5,k=h[v?"left":"right"],D=h[v?"right":"left"];c.onPointerGraceIntentChange({area:[{x:i.clientX+S,y:i.clientY},{x:k,y:h.top},{x:D,y:h.top},{x:D,y:h.bottom},{x:k,y:h.bottom}],side:M}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>c.onPointerGraceIntentChange(null),300)}else{if(c.onTriggerLeave(i),i.defaultPrevented)return;c.onPointerGraceIntentChange(null)}})),onKeyDown:g(t.onKeyDown,i=>{const h=c.searchRef.current!=="";t.disabled||h&&i.key===" "||Nn[o.dir].includes(i.key)&&(n.onOpenChange(!0),n.content?.focus(),i.preventDefault())})})})});jt.displayName=ne;var Mt="MenuSubContent",Nt=s.forwardRef((t,r)=>{const n=at(P,t.__scopeMenu),{forceMount:o=n.forceMount,...a}=t,c=z(P,t.__scopeMenu),d=ce(P,t.__scopeMenu),l=bt(Mt,t.__scopeMenu),m=s.useRef(null),x=se(r,m);return e.jsx(re.Provider,{scope:t.__scopeMenu,children:e.jsx(xe,{present:o||c.open,children:e.jsx(re.Slot,{scope:t.__scopeMenu,children:e.jsx(ke,{id:l.contentId,"aria-labelledby":l.triggerId,...a,ref:x,align:"start",side:d.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:f=>{d.isUsingKeyboardRef.current&&m.current?.focus(),f.preventDefault()},onCloseAutoFocus:f=>f.preventDefault(),onFocusOutside:g(t.onFocusOutside,f=>{f.target!==l.trigger&&c.onOpenChange(!1)}),onEscapeKeyDown:g(t.onEscapeKeyDown,f=>{d.onClose(),f.preventDefault()}),onKeyDown:g(t.onKeyDown,f=>{const i=f.currentTarget.contains(f.target),h=Cn[d.dir].includes(f.key);i&&h&&(c.onOpenChange(!1),l.trigger?.focus(),f.preventDefault())})})})})})});Nt.displayName=Mt;function Ct(t){return t?"open":"closed"}function me(t){return t==="indeterminate"}function Oe(t){return me(t)?"indeterminate":t?"checked":"unchecked"}function Vn(t){const r=document.activeElement;for(const n of t)if(n===r||(n.focus(),document.activeElement!==r))return}function zn(t,r){return t.map((n,o)=>t[(r+o)%t.length])}function Wn(t,r,n){const a=r.length>1&&Array.from(r).every(x=>x===r[0])?r[0]:r,c=n?t.indexOf(n):-1;let d=zn(t,Math.max(c,0));a.length===1&&(d=d.filter(x=>x!==n));const m=d.find(x=>x.toLowerCase().startsWith(a.toLowerCase()));return m!==n?m:void 0}function Hn(t,r){const{x:n,y:o}=t;let a=!1;for(let c=0,d=r.length-1;c<r.length;d=c++){const l=r[c],m=r[d],x=l.x,f=l.y,i=m.x,h=m.y;f>o!=h>o&&n<(i-x)*(o-f)/(h-f)+x&&(a=!a)}return a}function Yn(t,r){if(!r)return!1;const n={x:t.clientX,y:t.clientY};return Hn(n,r)}function oe(t){return r=>r.pointerType==="mouse"?t(r):void 0}var Xn=st,qn=Se,Zn=ct,Jn=it,Qn=Ae,er=lt,tr=he,nr=ut,rr=mt,or=pt,sr=gt,ar=vt,cr=wt,ir=jt,lr=Nt,ge="DropdownMenu",[dr]=Ze(ge,[rt]),j=rt(),[ur,_t]=dr(ge),yt=t=>{const{__scopeDropdownMenu:r,children:n,dir:o,open:a,defaultOpen:c,onOpenChange:d,modal:l=!0}=t,m=j(r),x=s.useRef(null),[f,i]=Yt({prop:a,defaultProp:c??!1,onChange:d,caller:ge});return e.jsx(ur,{scope:r,triggerId:Ke(),triggerRef:x,contentId:Ke(),open:f,onOpenChange:i,onOpenToggle:s.useCallback(()=>i(h=>!h),[i]),modal:l,children:e.jsx(Xn,{...m,open:f,onOpenChange:i,dir:o,modal:l,children:n})})};yt.displayName=ge;var Rt="DropdownMenuTrigger",Et=s.forwardRef((t,r)=>{const{__scopeDropdownMenu:n,disabled:o=!1,...a}=t,c=_t(Rt,n),d=j(n);return e.jsx(qn,{asChild:!0,...d,children:e.jsx(X.button,{type:"button",id:c.triggerId,"aria-haspopup":"menu","aria-expanded":c.open,"aria-controls":c.open?c.contentId:void 0,"data-state":c.open?"open":"closed","data-disabled":o?"":void 0,disabled:o,...a,ref:Pe(r,c.triggerRef),onPointerDown:g(t.onPointerDown,l=>{!o&&l.button===0&&l.ctrlKey===!1&&(c.onOpenToggle(),c.open||l.preventDefault())}),onKeyDown:g(t.onKeyDown,l=>{o||(["Enter"," "].includes(l.key)&&c.onOpenToggle(),l.key==="ArrowDown"&&c.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});Et.displayName=Rt;var fr="DropdownMenuPortal",Pt=t=>{const{__scopeDropdownMenu:r,...n}=t,o=j(r);return e.jsx(Zn,{...o,...n})};Pt.displayName=fr;var St="DropdownMenuContent",Dt=s.forwardRef((t,r)=>{const{__scopeDropdownMenu:n,...o}=t,a=_t(St,n),c=j(n),d=s.useRef(!1);return e.jsx(Jn,{id:a.contentId,"aria-labelledby":a.triggerId,...c,...o,ref:r,onCloseAutoFocus:g(t.onCloseAutoFocus,l=>{d.current||a.triggerRef.current?.focus(),d.current=!1,l.preventDefault()}),onInteractOutside:g(t.onInteractOutside,l=>{const m=l.detail.originalEvent,x=m.button===0&&m.ctrlKey===!0,f=m.button===2||x;(!a.modal||f)&&(d.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Dt.displayName=St;var mr="DropdownMenuGroup",xr=s.forwardRef((t,r)=>{const{__scopeDropdownMenu:n,...o}=t,a=j(n);return e.jsx(Qn,{...a,...o,ref:r})});xr.displayName=mr;var pr="DropdownMenuLabel",hr=s.forwardRef((t,r)=>{const{__scopeDropdownMenu:n,...o}=t,a=j(n);return e.jsx(er,{...a,...o,ref:r})});hr.displayName=pr;var gr="DropdownMenuItem",It=s.forwardRef((t,r)=>{const{__scopeDropdownMenu:n,...o}=t,a=j(n);return e.jsx(tr,{...a,...o,ref:r})});It.displayName=gr;var vr="DropdownMenuCheckboxItem",wr=s.forwardRef((t,r)=>{const{__scopeDropdownMenu:n,...o}=t,a=j(n);return e.jsx(nr,{...a,...o,ref:r})});wr.displayName=vr;var br="DropdownMenuRadioGroup",jr=s.forwardRef((t,r)=>{const{__scopeDropdownMenu:n,...o}=t,a=j(n);return e.jsx(rr,{...a,...o,ref:r})});jr.displayName=br;var Mr="DropdownMenuRadioItem",Nr=s.forwardRef((t,r)=>{const{__scopeDropdownMenu:n,...o}=t,a=j(n);return e.jsx(or,{...a,...o,ref:r})});Nr.displayName=Mr;var Cr="DropdownMenuItemIndicator",_r=s.forwardRef((t,r)=>{const{__scopeDropdownMenu:n,...o}=t,a=j(n);return e.jsx(sr,{...a,...o,ref:r})});_r.displayName=Cr;var yr="DropdownMenuSeparator",Rr=s.forwardRef((t,r)=>{const{__scopeDropdownMenu:n,...o}=t,a=j(n);return e.jsx(ar,{...a,...o,ref:r})});Rr.displayName=yr;var Er="DropdownMenuArrow",Pr=s.forwardRef((t,r)=>{const{__scopeDropdownMenu:n,...o}=t,a=j(n);return e.jsx(cr,{...a,...o,ref:r})});Pr.displayName=Er;var Sr="DropdownMenuSubTrigger",Dr=s.forwardRef((t,r)=>{const{__scopeDropdownMenu:n,...o}=t,a=j(n);return e.jsx(ir,{...a,...o,ref:r})});Dr.displayName=Sr;var Ir="DropdownMenuSubContent",kr=s.forwardRef((t,r)=>{const{__scopeDropdownMenu:n,...o}=t,a=j(n);return e.jsx(lr,{...a,...o,ref:r,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});kr.displayName=Ir;var Ar=yt,Tr=Et,Or=Pt,Lr=Dt,Fr=It;function Gr({...t}){return e.jsx(Ar,{"data-slot":"dropdown-menu",...t})}function Kr({...t}){return e.jsx(Tr,{"data-slot":"dropdown-menu-trigger",...t})}function Ur({className:t,sideOffset:r=4,...n}){return e.jsx(Or,{children:e.jsx(Lr,{"data-slot":"dropdown-menu-content",sideOffset:r,className:et("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",t),...n})})}function Br({className:t,inset:r,variant:n="default",...o}){return e.jsx(Fr,{"data-slot":"dropdown-menu-item","data-inset":r,"data-variant":n,className:et("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...o})}function $r(t){return t<=10?"text-red-400":t<=30?"text-orange-400":t<=70?"text-emerald-400":"text-blue-400"}function Vr(t){return t<=10?"질문·답변 활동이 아직 적거나, 신고 이력이 있어 낮게 책정된 상태예요.":t<=30?"기본 수준의 신뢰도예요. 꾸준히 좋은 질문과 답변을 남기면 점수가 올라가요.":t<=70?"안정적인 신뢰도예요. 다른 사용자에게 도움을 꽤 많이 주고 있어요.":"매우 높은 신뢰도예요. 많은 사용자들에게 신뢰를 받고 있는 계정입니다."}function Re(t){return t?t instanceof Date?t.toLocaleString("ko-KR"):String(t):""}function so({onBack:t,userName:r,userAvatar:n,username:o,userBio:a,posts:c=[],trustScore:d=30,reportCount:l=0,achievementCount:m=0,titleCount:x=0,guideCount:f=0,followerCount:i=0,followingCount:h=0,followerUsers:M=[],followingUsers:v=[],onPostClick:S,onReplyClick:k,isMyself:D=!1,isFollowing:W=!1,onToggleFollowUser:H,onFollowUserClick:q,activeSection:ve,onChangeSection:ie,targetUid:F}){const b=o||r||"사용자",$=b===Ne,[Y,we]=s.useState("profile"),G=ve??Y,C=ie??we,K=s.useCallback(()=>{C("profile")},[C]),be=s.useCallback(()=>{C("followers")},[C]),je=s.useCallback(()=>{C("following")},[C]),Me=s.useCallback(()=>{C("posts")},[C]),U=s.useCallback(()=>{C("replies")},[C]),u=s.useMemo(()=>Math.max(0,Math.min(100,d)),[d]),B=$r(u),T=Vr(u),p=s.useMemo(()=>{const _=c.length;let I=0,L=0,ee=null;c.forEach(N=>{const ue=N.lanterns??0,A=N.comments??(Array.isArray(N.replies)?N.replies.length:0);I+=ue,L+=A,(!ee||ue>ee.lanterns)&&(ee={id:N.id,title:N.title,lanterns:ue,comments:A,category:N.category,timeAgo:Re(N.timeAgo||N.createdAtText||N.createdAt||"")})});let y=null;const Fe=o||r;return c.forEach(N=>{(N.replies??[]).forEach(A=>{if(!Fe||A.author!==Fe)return;const Ge=A.lanterns??0;(!y||Ge>y.lanterns)&&(y={id:A.id,content:A.content,lanterns:Ge,timeAgo:Re(A.timeAgo||A.createdAtText||A.createdAt||""),postTitle:N.title,postId:N.id})})}),{nickname:b,totalPosts:_,totalLanterns:I,totalComments:L,bio:a||"깊이 있는 학습을 추구하는 탐구자입니다.",bestPost:ee,bestReply:y}},[b,c,o,r,a]),Z=s.useMemo(()=>{const _=[],I=o||r;return c.forEach(L=>{(L.replies??[]).forEach(y=>{!I||y.author!==I||_.push({id:y.id,postId:L.id,postAuthor:L.author||L.nickname||L.userName||"질문 작성자",postTitle:L.title,content:y.content,lanterns:y.lanterns??0,timeAgo:Re(y.timeAgo||y.createdAtText||y.createdAt||"")})})}),_},[c,o,r]),J=s.useCallback(()=>{S&&p.bestPost?.id!=null&&S(p.bestPost.id)},[S,p]),le=s.useCallback(()=>{k&&p.bestReply?.postId!=null&&p.bestReply?.id!=null&&k(p.bestReply.postId,p.bestReply.id)},[k,p]),[O,w]=s.useState(!1),[de,Le]=s.useState(!1),kt=s.useCallback(async()=>{if(!H||D||O)return;const _=W?"하선":"승선";w(!0);try{await Promise.resolve(H(b))===!0&&te.success(`${_}이 완료되었습니다.`)}catch{te.error(`${_}에 실패했습니다. 잠시 후 다시 시도해주세요.`)}finally{w(!1)}},[H,D,b,O,W]),Q=s.useMemo(()=>{if(F)return F;const _=c.find(I=>I.author===b||I.nickname===b);return _?.authorUid||_?.uid||null},[F,c,b]),At=s.useCallback(()=>{if(!Q){te.error("사용자 정보를 찾을 수 없어 차단할 수 없습니다.");return}Le(!0)},[Q]),Tt=s.useCallback(async()=>{if(Q)try{const _=an();await cn(_,"blockUser")({targetUserId:Q}),te.success("차단되었습니다."),t()}catch{te.error("차단에 실패했습니다.")}},[Q,t]);return $?e.jsxs("div",{className:"w-full h-full bg-background text-foreground flex flex-col overflow-hidden",children:[e.jsx(Ve,{title:"사용자 프로필",onBack:t}),e.jsx("main",{className:"flex-1 flex items-center justify-center px-4",children:e.jsxs("div",{className:"w-full max-w-sm mx-auto text-center space-y-4",children:[e.jsx(Ue,{src:void 0,alt:b,nickname:Ne,size:64,fallbackText:"탈퇴"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"font-semibold text-base",children:Ne}),e.jsx("p",{className:"text-xs text-muted-foreground leading-snug",children:"탈퇴한 계정입니다. 더 이상 프로필, 작성 글, 답글을 볼 수 없어요."})]}),e.jsx(Ce,{size:"sm",className:"mt-2",onClick:t,children:"닫기"})]})})]}):G==="followers"?e.jsx("div",{className:"w-full h-full bg-background text-foreground flex flex-col overflow-hidden",children:e.jsx(ze,{mode:"followers",users:M,onBack:K,onUserClick:q})}):G==="following"?e.jsx("div",{className:"w-full h-full bg-background text-foreground flex flex-col overflow-hidden",children:e.jsx(ze,{mode:"following",users:v,onBack:K,onUserClick:q})}):G==="posts"?e.jsx("div",{className:"w-full h-full bg-background text-foreground flex flex-col overflow-hidden",children:e.jsx(We,{mode:"posts",posts:c,onBack:K,onPostClick:S})}):G==="replies"?e.jsx("div",{className:"w-full h-full bg-background text-foreground flex flex-col overflow-hidden",children:e.jsx(We,{mode:"replies",replies:Z,onBack:K,onReplyClick:k})}):e.jsxs("div",{className:"w-full h-full bg-background text-foreground flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ve,{title:"사용자 프로필",onBack:t}),!D&&!$&&e.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 z-50",children:e.jsxs(Gr,{modal:!1,children:[e.jsx(Kr,{asChild:!0,children:e.jsx(Ce,{variant:"ghost",size:"icon",className:"h-9 w-9 hover:bg-accent",children:e.jsx(fn,{className:"w-5 h-5 text-foreground"})})}),e.jsx(Ur,{align:"end",className:"w-40",children:e.jsxs(Br,{className:"text-red-500 focus:text-red-500 focus:bg-red-50 dark:focus:bg-red-900/10 cursor-pointer",onClick:At,children:[e.jsx(ln,{className:"w-4 h-4 mr-2"}),"차단하기"]})})]})})]}),e.jsx("main",{className:"flex-1 scroll-container scrollbar-hide",children:e.jsxs("div",{className:"w-full max-w-md sm:max-w-lg md:max-w-2xl lg:max-w-3xl xl:max-w-4xl mx-auto p-4 space-y-4",children:[e.jsx(R,{className:"border-border/70 shadow-sm rounded-xl",children:e.jsxs(E,{className:"p-4 flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[e.jsx(Ue,{src:n,alt:b,nickname:b,size:64,fallbackText:b.charAt(0).toUpperCase()}),e.jsxs("div",{className:"flex flex-col gap-1 flex-1",children:[e.jsx("h3",{className:"font-semibold text-base",children:p.nickname}),e.jsx("p",{className:"text-xs text-muted-foreground leading-snug",children:p.bio})]})]}),!D&&H&&e.jsx("div",{className:"flex flex-col items-end gap-2",children:e.jsx(Ce,{size:"sm",className:"h-8 px-3 rounded-full text-xs",variant:W?"outline":"default",onClick:kt,disabled:O,children:W?e.jsxs(e.Fragment,{children:[e.jsx(He,{className:"w-3 h-3 mr-1"}),"하선하기"]}):e.jsxs(e.Fragment,{children:[e.jsx(xn,{className:"w-3 h-3 mr-1"}),"승선하기"]})})})]})}),e.jsx(R,{className:"border-border/70 shadow-sm rounded-xl",children:e.jsxs(E,{className:"p-4 flex flex-col items-center text-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(dn,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("span",{className:"text-sm font-medium",children:["신뢰도"," ",e.jsxs("span",{className:`font-semibold ${B}`,children:[Math.round(u),"점"]})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground leading-snug",children:T}),l>0&&e.jsxs("p",{className:"text-[11px] text-muted-foreground",children:["최근 신고 ",l,"회가 신뢰도 계산에 함께 반영되어 있습니다."]})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(R,{className:"cursor-pointer",onClick:be,children:e.jsxs(E,{className:"p-4 text-center",children:[e.jsx(Xt,{className:"w-6 h-6 mx-auto mb-2 text-amber-500"}),e.jsx("div",{className:"text-lg font-medium",children:i}),e.jsx("div",{className:"text-xs text-muted-foreground leading-snug",children:"선원"})]})}),e.jsx(R,{className:"cursor-pointer",onClick:je,children:e.jsxs(E,{className:"p-4 text-center",children:[e.jsx(He,{className:"w-6 h-6 mx-auto mb-2 text-amber-500"}),e.jsx("div",{className:"text-lg font-medium",children:h}),e.jsx("div",{className:"text-xs text-muted-foreground leading-snug",children:"승선한 배"})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(R,{className:"cursor-pointer",onClick:Me,children:e.jsxs(E,{className:"p-4 text-center",children:[e.jsx(Ye,{className:"w-6 h-6 mx-auto mb-2 text-blue-500"}),e.jsx("div",{className:"text-lg font-medium",children:p.totalPosts}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"작성한 글"})]})}),e.jsx(R,{className:"cursor-pointer",onClick:U,children:e.jsxs(E,{className:"p-4 text-center",children:[e.jsx(_e,{className:"w-6 h-6 mx-auto mb-2 text-green-500"}),e.jsx("div",{className:"text-lg font-medium",children:p.totalComments}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"답글"})]})}),e.jsx(R,{children:e.jsxs(E,{className:"p-4 text-center",children:[e.jsx(qt,{className:"w-6 h-6 mx-auto mb-2 text-amber-500"}),e.jsx("div",{className:"text-lg font-medium",children:m}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"달성한 업적"})]})}),e.jsx(R,{children:e.jsxs(E,{className:"p-4 text-center",children:[e.jsx(Zt,{className:"w-6 h-6 mx-auto mb-2 text-purple-500"}),e.jsx("div",{className:"text-lg font-medium",children:x}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"보유 칭호"})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(R,{children:e.jsxs(E,{className:"p-4 text-center",children:[e.jsx(ye,{className:"w-6 h-6 mx-auto mb-2 text-amber-500"}),e.jsx("div",{className:"text-lg font-medium",children:p.totalLanterns}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"받은 등불"})]})}),e.jsx(R,{children:e.jsxs(E,{className:"p-4 text-center",children:[e.jsx(Jt,{className:"w-6 h-6 mx-auto mb-2 text-primary"}),e.jsx("div",{className:"text-lg font-medium",children:f}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"길잡이 횟수"})]})})]}),e.jsx("div",{className:"mt-4",children:e.jsxs(on,{defaultValue:"bestPost",className:"w-full",children:[e.jsxs(sn,{className:"grid w-full grid-cols-2 gap-2 bg-transparent p-0 border-0",children:[e.jsxs(Be,{value:"bestPost",className:`
                    text-xs rounded-xl border border-border/70 bg-card/60
                    flex items-center justify-center gap-1 py-2
                    data-[state=active]:bg-card
                    data-[state=active]:text-foreground
                    data-[state=active]:shadow-sm
                  `,children:[e.jsx(Ye,{className:"w-4 h-4"}),e.jsx("span",{children:"인기 글"})]}),e.jsxs(Be,{value:"bestReply",className:`
                    text-xs rounded-xl border border-border/70 bg-card/60
                    flex items-center justify-center gap-1 py-2
                    data-[state=active]:bg-card
                    data-[state=active]:text-foreground
                    data-[state=active]:shadow-sm
                  `,children:[e.jsx(_e,{className:"w-4 h-4"}),e.jsx("span",{children:"인기 답변"})]})]}),e.jsx($e,{value:"bestPost",className:"mt-4 border-t border-border pt-4",children:p.bestPost?e.jsx(R,{className:"hover:shadow-md transition-shadow cursor-pointer list-optimized",onClick:J,children:e.jsx(E,{className:"p-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Qt,{variant:"outline",className:"text-xs",children:p.bestPost.category}),p.bestPost.timeAgo&&e.jsx("span",{className:"text-xs text-muted-foreground",children:p.bestPost.timeAgo})]}),e.jsx("h3",{className:"font-medium text-sm line-clamp-1",children:p.bestPost.title}),e.jsxs("div",{className:"flex items-center space-x-3 pt-2 border-t border-border",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(ye,{className:"w-3 h-3 text-amber-500"}),e.jsx("span",{className:"text-xs text-amber-600",children:p.bestPost.lanterns})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(_e,{className:"w-3 h-3 text-muted-foreground"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:p.bestPost.comments})]})]})]})})}):e.jsx("div",{className:"py-10 flex justify-center",children:e.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"아직 인기 글이 없습니다."})})}),e.jsx($e,{value:"bestReply",className:"mt-4 border-t border-border pt-4",children:p.bestReply?e.jsx(R,{className:"hover:shadow-md transition-shadow list-optimized cursor-pointer",onClick:le,children:e.jsx(E,{className:"p-4",children:e.jsxs("div",{className:"space-y-2",children:[p.bestReply.postTitle&&e.jsx("p",{className:"text-[11px] text-muted-foreground line-clamp-1",children:p.bestReply.postTitle}),e.jsx("p",{className:"text-sm line-clamp-2",children:p.bestReply.content}),e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-border",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(ye,{className:"w-3 h-3 text-amber-500"}),e.jsx("span",{className:"text-xs text-amber-600",children:p.bestReply.lanterns})]}),p.bestReply.timeAgo&&e.jsx("span",{className:"text-xs text-muted-foreground",children:p.bestReply.timeAgo})]})]})})}):e.jsx("div",{className:"py-10 flex justify-center",children:e.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"아직 인기 답변이 없습니다."})})})]})})]})}),e.jsx(en,{open:de,onOpenChange:Le,title:"사용자 차단",description:`'${b}' 님을 차단하시겠습니까?
차단하면 서로의 글이 보이지 않으며, 팔로우가 취소됩니다.`,confirmText:"차단하기",cancelText:"취소",isDestructive:!0,onConfirm:Tt})]})}export{so as UserProfileDialog};
