class i{cache=new Map;get(e){const t=this.cache.get(e);return t?Date.now()-t.timestamp>t.ttl?(this.cache.delete(e),null):t.data:null}set(e,t,a=300*1e3){this.cache.set(e,{data:t,timestamp:Date.now(),ttl:a})}invalidate(e){this.cache.delete(e)}invalidatePattern(e){for(const t of this.cache.keys())e.test(t)&&this.cache.delete(t)}clear(){this.cache.clear()}cleanup(){const e=Date.now();for(const[t,a]of this.cache.entries())e-a.timestamp>a.ttl&&this.cache.delete(t)}getStats(){return{size:this.cache.size,keys:Array.from(this.cache.keys())}}}const n=new i;typeof window<"u"&&setInterval(()=>{n.cleanup()},300*1e3);async function r(c,e,t=300*1e3){const a=n.get(c);if(a!==null)return a;const s=await e();return n.set(c,s,t),s}function h(c,e){return`${c}:${e}`}export{n as f,h as g,r as w};
